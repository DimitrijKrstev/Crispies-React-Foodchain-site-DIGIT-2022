/*! For license information please see main.1b0a1fc1.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function z(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case E:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ge=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Se=null;function Ee(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ce(e){xe?Se?Se.push(e):Se=[e]:xe=e}function Te(){if(xe){var e=xe,t=Se;if(Se=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ie(e,t){return e(t)}function Ne(){}var Pe=!1;function Re(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Ie(e,t,n)}finally{Pe=!1,(null!==xe||null!==Se)&&(Ne(),Te())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ae=!1;if(c)try{var De={};Object.defineProperty(De,"passive",{get:function(){Ae=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ce){Ae=!1}function Le(e,t,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Me=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,a,o,s,u){Me=!1,Fe=null,Le.apply(Ve,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(qe(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,St,Et,Ct=!1,Tt=[],It=null,Nt=null,Pt=null,Rt=new Map,Ot=new Map,At=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){Ct=!1,null!==It&&jt(It)&&(It=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==Pt&&jt(Pt)&&(Pt=null),Rt.forEach(Ut),Ot.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function qt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&zt(It,e),null!==Nt&&zt(Nt,e),null!==Pt&&zt(Pt,e),Rt.forEach(t),Ot.forEach(t),n=0;n<At.length;n++)(r=At[n]).blockedOn===e&&(r.blockedOn=null);for(;0<At.length&&null===(n=At[0]).blockedOn;)Ft(n),null===n.blockedOn&&At.shift()}var Bt=b.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=1,Kt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Gt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=4,Kt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Kt(e,t,n,r){if(Ht){var i=$t(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Mt(It,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Pt=Mt(Pt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ot.set(a,Mt(Ot.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Hr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=yi(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(ln),hn=F({},ln,{view:0,detail:0}),fn=an(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},hn,{relatedTarget:0})),gn=an(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(yn),bn=an(F({},ln,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return Sn}var Cn=F({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Cn),In=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Pn=an(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Rn),An=[9,13,27,32],Dn=c&&"CompositionEvent"in window,Ln=null;c&&"documentMode"in document&&(Ln=document.documentMode);var Mn=c&&"TextEvent"in window&&!Ln,Fn=c&&(!Dn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==An.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ce(r),0<(t=Gr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Qn(e){jr(e,0)}function $n(e){if(K(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(c){var Jn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Kn=Gn=null)}function nr(e){if("value"===e.propertyName&&$n(Kn)){var t=[];Wn(t,Kn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Kn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Gr(gr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Sr={};function Er(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return xr[e]=n[t];return e}c&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Cr=Er("animationend"),Tr=Er("animationiteration"),Ir=Er("animationstart"),Nr=Er("transitionend"),Pr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Pr.set(e,t),u(t,[e])}for(var Ar=0;Ar<Rr.length;Ar++){var Dr=Rr[Ar];Or(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Or(Cr,"onAnimationEnd"),Or(Tr,"onAnimationIteration"),Or(Ir,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Nr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,l){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var c=Fe;Me=!1,Fe=null,je||(je=!0,Ue=c)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,l),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,l),a=u}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=Gt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Ae||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),o=[];e:{var s=Pr.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":l="focus",u=mn;break;case"focusout":l="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Nn;break;case Cr:case Tr:case Ir:u=gn;break;case Nr:u=Pn;break;case"scroll":u=fn;break;case"wheel":u=On;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=In}var c=0!==(4&t),h=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Oe(p,f))&&c.push(Wr(p,v,d)))),h)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!yi(l)&&!l[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?yi(l):null)&&(l!==(h=qe(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=In,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:bi(u),d=null==l?s:bi(l),(s=new c(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,yi(i)===r&&((c=new c(f,p+"enter",l,n,i)).target=d,c.relatedTarget=h,v=c),h=v,u&&l)e:{for(f=l,p=0,d=c=u;d;d=Kr(d))p++;for(d=0,v=f;v;v=Kr(v))d++;for(;0<p-d;)c=Kr(c),p--;for(;0<d-p;)f=Kr(f),d--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break e;c=Kr(c),f=Kr(f)}c=null}else c=null;null!==u&&Qr(o,s,u,c,!1),null!==l&&null!==h&&Qr(o,h,l,c,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Yn;else if(Hn(s))if(Xn)m=or;else{m=ir;var g=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?bi(r):window,e){case"focusin":(Hn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&qn&&(y=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,qn=!0)),0<(g=Gr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:g}),y?k.data=y:null!==(y=zn(n))&&(k.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}jr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Oe(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Oe(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Oe(n,a))&&o.unshift(Wr(n,u,s)):i||null!=(u=Oe(n,a))&&o.push(Wr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,mi="__reactListeners$"+hi,gi="__reactHandles$"+hi;function yi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[fi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Si(e){return{current:e}}function Ei(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ci(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ii=Si(Ti),Ni=Si(!1),Pi=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ai(){Ei(Ni),Ei(Ii)}function Di(e,t,n){if(Ii.current!==Ti)throw Error(a(168));Ci(Ii,t),Ci(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,B(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Pi=Ii.current,Ci(Ii,e),Ci(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ii),Ci(Ii,e)):Ei(Ni),Ci(Ni,n)}var ji=null,Ui=!1,Vi=!1;function zi(e){null===ji?ji=[e]:ji.push(e)}function qi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=kt;try{var n=ji;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Ke(Ze,qi),i}finally{kt=t,Vi=!1}}return null}var Bi=[],Hi=0,Wi=null,Gi=0,Ki=[],Qi=0,$i=null,Yi=1,Xi="";function Ji(e,t){Bi[Hi++]=Gi,Bi[Hi++]=Wi,Wi=e,Gi=t}function Zi(e,t,n){Ki[Qi++]=Yi,Ki[Qi++]=Xi,Ki[Qi++]=$i,$i=e;var r=Yi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else Yi=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Wi;)Wi=Bi[--Hi],Bi[Hi]=null,Gi=Bi[--Hi],Bi[Hi]=null;for(;e===$i;)$i=Ki[--Qi],Ki[Qi]=null,Xi=Ki[--Qi],Ki[Qi]=null,Yi=Ki[--Qi],Ki[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function la(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=li(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=li(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?li(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=li(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ga=Si(null),ya=null,ka=null,ba=null;function wa(){ba=ka=ya=null}function _a(e){var t=ga.current;Ei(ga),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ya=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ya)throw Error(a(308));ka=e,ya.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ca=null;function Ta(e){null===Ca?Ca=[e]:Ca.push(e)}function Ia(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Pa=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Aa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Iu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Pa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===o?a=l:o.next=l,o=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(o=0,c=l=u=null,s=a;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==c&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=F({},h,f);break e;case 2:Pa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=d,u=h):c=c.next=d,o|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===c&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Mu|=o,e.lanes=o,e.memoizedState=h}}function ja(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),a=Aa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(nl(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),a=Aa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(nl(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),i=Aa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(nl(t,e,r,n),La(t,e,r))}};function qa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function Ba(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Oi(t)?Pi:Ii.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Oi(t)?Pi:Ii.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ka(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Al(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Fl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ga(e,t,n),r.return=e,r):((r=Dl(n.type,n.key,n.props,null,e.mode,r)).ref=Ga(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Ll(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dl(t.type,t.key,t.props,null,e.mode,n)).ref=Ga(e,null,t),n.return=e,n;case _:return(t=jl(t,e.mode,n)).return=e,t;case O:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ll(t,e.mode,n,null)).return=e,t;Ka(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?l(e,t,n,r):null;case _:return n.key===i?c(e,t,n,r):null;case O:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ka(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ka(t,r)}return null}function v(i,a,s,u){for(var l=null,c=null,h=a,v=a=0,m=null;null!==h&&v<s.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var g=d(i,h,s[v],u);if(null===g){null===h&&(h=m);break}e&&h&&null===g.alternate&&t(i,h),a=o(g,a,v),null===c?l=g:c.sibling=g,c=g,h=m}if(v===s.length)return n(i,h),ia&&Ji(i,v),l;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(a=o(h,a,v),null===c?l=h:c.sibling=h,c=h);return ia&&Ji(i,v),l}for(h=r(i,h);v<s.length;v++)null!==(m=p(h,i,v,s[v],u))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),a=o(m,a,v),null===c?l=m:c.sibling=m,c=m);return e&&h.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),l}function m(i,s,u,l){var c=L(u);if("function"!==typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var h=c=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var k=d(i,v,y.value,l);if(null===k){null===v&&(v=g);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,m),null===h?c=k:h.sibling=k,h=k,v=g}if(y.done)return n(i,v),ia&&Ji(i,m),c;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=f(i,y.value,l))&&(s=o(y,s,m),null===h?c=y:h.sibling=y,h=y);return ia&&Ji(i,m),c}for(v=r(i,v);!y.done;m++,y=u.next())null!==(y=p(v,i,m,y.value,l))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=o(y,s,m),null===h?c=y:h.sibling=y,h=y);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),c}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var l=o.key,c=a;null!==c;){if(c.key===l){if((l=o.type)===x){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===O&&Qa(l)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=Ga(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===x?((a=Ll(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Dl(o.type,o.key,o.props,null,r.mode,u)).ref=Ga(r,a,o),u.return=r,r=u)}return s(r);case _:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=jl(o,r.mode,u)).return=r,r=a}return s(r);case O:return e(r,a,(c=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(L(o))return m(r,a,o,u);Ka(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fl(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Ya=$a(!0),Xa=$a(!1),Ja={},Za=Si(Ja),eo=Si(Ja),to=Si(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ci(to,t),Ci(eo,e),Ci(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Ci(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=ue(t,e.type);t!==n&&(Ci(eo,e),Ci(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var so=Si(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function co(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,go=null,yo=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,go=mo=null,t.updateQueue=null,ho.current=ls,e=n(r,i)}while(ko)}if(ho.current=os,t=null!==mo&&null!==mo.next,po=0,go=mo=vo=null,yo=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function Co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?vo.memoizedState=go=e:go=go.next=e,go}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===go?vo.memoizedState:go.next;if(null!==t)go=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===go?vo.memoizedState=go=e:go=go.next=e}return go}function Io(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,l=null,c=o;do{var h=c.lane;if((po&h)===h)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=f,s=r):l=l.next=f,vo.lanes|=h,Mu|=h}c=c.next}while(null!==c&&c!==o);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Mu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Po(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Oo(e,t){var n=vo,r=To(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Ho(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,Uo(9,Do.bind(null,n,r,i,t),void 0,null),null===Nu)throw Error(a(349));0!==(30&po)||Ao(n,t,i)}return i}function Ao(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&nl(t,e,1,-1)}function jo(e){var t=Co();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function zo(e,t,n,r){var i=Co();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function qo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function Bo(e,t){return zo(8390656,8,e,t)}function Ho(e,t){return qo(2048,8,e,t)}function Wo(e,t){return qo(4,2,e,t)}function Go(e,t){return qo(4,4,e,t)}function Ko(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4,4,Ko.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Mu|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function es(){return To().memoizedState}function ts(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ia(e,t,n,r))){nl(n,e,r,el()),as(n,t,r)}}function ns(e,t,n){var r=tl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ta(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Ia(e,t,i,r))&&(nl(n,e,r,i=el()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:Ea,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},ss={readContext:Ea,useCallback:function(e,t){return Co().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:Bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=Co();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Co();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Co().memoizedState=e},useState:jo,useDebugValue:$o,useDeferredValue:function(e){return Co().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),Co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Co();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Nu)throw Error(a(349));0!==(30&po)||Ao(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Bo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Co(),t=Nu.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:Xo,useReducer:No,useRef:Vo,useState:function(){return No(Io)},useDebugValue:$o,useDeferredValue:function(e){return Jo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Io)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Oo,useId:es,unstable_isNewReconciler:!1},ls={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:Xo,useReducer:Po,useRef:Vo,useState:function(){return Po(Io)},useDebugValue:$o,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Po(Io)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Oo,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Aa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hu||(Hu=!0,Wu=r),fs(0,t)},n}function vs(e,t,n){(n=Aa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Gu?Gu=new Set([this]):Gu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=El.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Aa(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=b.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?Xa(t,null,n,r):Ya(t,e.child,n,r)}function _s(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Eo(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function xs(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Ol(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dl(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Al(a,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Ts(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Au,Ou),Ou|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Au,Ou),Ou|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ci(Au,Ou),Ou|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ci(Au,Ou),Ou|=r;return ws(e,t,i,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var a=Oi(n)?Pi:Ii.current;return a=Ri(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Eo(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Is(e,t,n,r,i){if(Oi(n)){var a=!0;Mi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Bs(e,t),Ba(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ea(l):l=Ri(t,l=Oi(n)?Pi:Ii.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&Ha(t,o,r,l),Pa=!1;var f=t.memoizedState;o.state=f,Fa(t,r,o,i),u=t.memoizedState,s!==r||f!==u||Ni.current||Pa?("function"===typeof c&&(Va(t,n,c,r),u=t.memoizedState),(s=Pa||qa(t,n,s,r,f,u,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Oa(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:ma(t.type,s),o.props=l,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ea(u):u=Ri(t,u=Oi(n)?Pi:Ii.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&Ha(t,o,r,u),Pa=!1,f=t.memoizedState,o.state=f,Fa(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||Ni.current||Pa?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(l=Pa||qa(t,n,l,r,f,p,u)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,a,i)}function Ns(e,t,n,r,i,a){Cs(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Hs(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Rs(e,t,n,r,i){return da(),pa(i),t.flags|=256,ws(e,t,n,r),t.child}var Os,As,Ds,Ls={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(so,1&o),null===e)return la(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Ml(u,i,0,null),e=Ll(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=Ls,e):js(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Ml({mode:"visible",children:r.children},i,0,null),(o=Ll(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=Ls,o);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Us(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Nu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nl(r,e,i,-1))}return vl(),Us(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tl.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=li(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Ki[Qi++]=Yi,Ki[Qi++]=Xi,Ki[Qi++]=$i,Yi=e.id,Xi=e.overflow,$i=t),t=js(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Al(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Al(r,s):(s=Ll(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Ms(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Al(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function js(e,t){return(t=Ml({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=js(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function zs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vs(e,n,t);else if(19===e.tag)Vs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zs(t,!0,n,null,a);break;case"together":zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Al(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Al(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ks(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Oi(t.type)&&Ai(),Gs(t),null;case 3:return r=t.stateNode,io(),Ei(Ni),Ei(Ii),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ol(aa),aa=null))),Gs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)As(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gs(t),null}if(e=no(Za.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var u in ye(n,o),i=null,o)if(o.hasOwnProperty(u)){var l=o[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fi]=t,e[di]=r,Os(e,t),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ye(n,i),l=i)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?me(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&fe(e,c):"number"===typeof c&&fe(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Ur("scroll",e):null!=c&&k(e,o,c,u))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Ds(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Gs(t),null;case 13:if(Ei(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),o=!1}else null!==aa&&(ol(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Du&&(Du=3):vl())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return io(),null===e&&qr(t.stateNode.containerInfo),Gs(t),null;case 10:return _a(t.type._context),Gs(t),null;case 19:if(Ei(so),null===(o=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Ws(o,!1);else{if(0!==Du||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Ws(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>qu&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Gs(t),null}else 2*Xe()-o.renderingStartTime>qu&&1073741824!==n&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=so.current,Ci(so,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return hl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ou)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qs(e,t){switch(ta(t),t.tag){case 1:return Oi(t.type)&&Ai(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ni),Ei(Ii),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(so),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hl(),null;default:return null}}Os=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},As=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(a in u)!u.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&u[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Ur("scroll",e),o||u===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ds=function(e,t,n,r){n!==r&&(t.flags|=4)};var $s=!1,Ys=!1,Xs="function"===typeof WeakSet?WeakSet:Set,Js=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sl(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){Sl(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&eu(t,n,a)}i=i.next}while(i!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[mi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var cu=null,hu=!1;function fu(e,t,n){for(n=n.child;null!==n;)du(e,t,n),n=n.sibling}function du(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Ys||Zs(n,t);case 6:var r=cu,i=hu;cu=null,fu(e,t,n),hu=i,null!==(cu=r)&&(hu?(e=cu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cu.removeChild(n.stateNode));break;case 18:null!==cu&&(hu?(e=cu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),qt(e)):ui(cu,n.stateNode));break;case 4:r=cu,i=hu,cu=n.stateNode.containerInfo,hu=!0,fu(e,t,n),cu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&eu(n,t,o),i=i.next}while(i!==r)}fu(e,t,n);break;case 1:if(!Ys&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Sl(n,t,s)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?(Ys=(r=Ys)||null!==n.memoizedState,fu(e,t,n),Ys=r):fu(e,t,n);break;default:fu(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach((function(t){var r=Il.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:cu=u.stateNode,hu=!1;break e;case 3:case 4:cu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===cu)throw Error(a(160));du(o,s,i),cu=null,hu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){Sl(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vu(t,e),gu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(m){Sl(e,e.return,m)}try{nu(5,e,e.return)}catch(m){Sl(e,e.return,m)}}break;case 1:vu(t,e),gu(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(vu(t,e),gu(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(m){Sl(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===o.type&&null!=o.name&&X(i,o),ke(u,s);var c=ke(u,o);for(s=0;s<l.length;s+=2){var h=l[s],f=l[s+1];"style"===h?me(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,c)}switch(u){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Sl(e,e.return,m)}}break;case 6:if(vu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Sl(e,e.return,m)}}break;case 3:if(vu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(m){Sl(e,e.return,m)}break;case 4:default:vu(t,e),gu(e);break;case 13:vu(t,e),gu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zu=Xe())),4&r&&pu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ys=(c=Ys)||h,vu(t,e),Ys=c):vu(t,e),gu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Js=e,h=e.child;null!==h;){for(f=Js=h;null!==Js;){switch(p=(d=Js).child,d.tag){case 0:case 11:case 14:case 15:nu(4,d,d.return);break;case 1:Zs(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Sl(r,n,m)}}break;case 5:Zs(d,d.return);break;case 22:if(null!==d.memoizedState){wu(f);continue}}null!==p?(p.return=d,Js=p):wu(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=f.stateNode,s=void 0!==(l=f.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=ve("display",s))}catch(m){Sl(e,e.return,m)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(m){Sl(e,e.return,m)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vu(t,e),gu(e),4&r&&pu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),lu(e,su(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;uu(e,su(e),o);break;default:throw Error(a(161))}}catch(s){Sl(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yu(e,t,n){Js=e,ku(e,t,n)}function ku(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var i=Js,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$s;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Ys;s=$s;var l=Ys;if($s=o,(Ys=u)&&!l)for(Js=i;null!==Js;)u=(o=Js).child,22===o.tag&&null!==o.memoizedState?_u(i):null!==u?(u.return=o,Js=u):_u(i);for(;null!==a;)Js=a,ku(a,t,n),a=a.sibling;Js=i,$s=s,Ys=l}bu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Js=a):bu(e)}}function bu(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ys)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ja(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ja(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&qt(f)}}}break;default:throw Error(a(163))}Ys||512&t.flags&&iu(t)}catch(d){Sl(t,t.return,d)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function wu(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function _u(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){Sl(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Sl(t,i,u)}}var a=t.return;try{iu(t)}catch(u){Sl(t,a,u)}break;case 5:var o=t.return;try{iu(t)}catch(u){Sl(t,o,u)}}}catch(u){Sl(t,t.return,u)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var xu,Su=Math.ceil,Eu=b.ReactCurrentDispatcher,Cu=b.ReactCurrentOwner,Tu=b.ReactCurrentBatchConfig,Iu=0,Nu=null,Pu=null,Ru=0,Ou=0,Au=Si(0),Du=0,Lu=null,Mu=0,Fu=0,ju=0,Uu=null,Vu=null,zu=0,qu=1/0,Bu=null,Hu=!1,Wu=null,Gu=null,Ku=!1,Qu=null,$u=0,Yu=0,Xu=null,Ju=-1,Zu=0;function el(){return 0!==(6&Iu)?Xe():-1!==Ju?Ju:Ju=Xe()}function tl(e){return 0===(1&e.mode)?1:0!==(2&Iu)&&0!==Ru?Ru&-Ru:null!==va.transition?(0===Zu&&(Zu=vt()),Zu):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nl(e,t,n,r){if(50<Yu)throw Yu=0,Xu=null,Error(a(185));gt(e,n,r),0!==(2&Iu)&&e===Nu||(e===Nu&&(0===(2&Iu)&&(Fu|=n),4===Du&&sl(e,Ru)),rl(e,r),1===n&&0===Iu&&0===(1&t.mode)&&(qu=Xe()+500,Ui&&qi()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Nu?Ru:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(ul.bind(null,e)):zi(ul.bind(null,e)),oi((function(){0===(6&Iu)&&qi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nl(n,il.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function il(e,t){if(Ju=-1,Zu=0,0!==(6&Iu))throw Error(a(327));var n=e.callbackNode;if(_l()&&e.callbackNode!==n)return null;var r=ft(e,e===Nu?Ru:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ml(e,r);else{t=r;var i=Iu;Iu|=2;var o=pl();for(Nu===e&&Ru===t||(Bu=null,qu=Xe()+500,fl(e,t));;)try{yl();break}catch(u){dl(e,u)}wa(),Eu.current=o,Iu=i,null!==Pu?t=0:(Nu=null,Ru=0,t=Du)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=al(e,i))),1===t)throw n=Lu,fl(e,0),sl(e,r),rl(e,Xe()),n;if(6===t)sl(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=ml(e,r))&&(0!==(o=pt(e))&&(r=o,t=al(e,o))),1===t))throw n=Lu,fl(e,0),sl(e,r),rl(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wl(e,Vu,Bu);break;case 3:if(sl(e,r),(130023424&r)===r&&10<(t=zu+500-Xe())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wl.bind(null,e,Vu,Bu),t);break}wl(e,Vu,Bu);break;case 4:if(sl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Su(r/1960))-r)){e.timeoutHandle=ri(wl.bind(null,e,Vu,Bu),r);break}wl(e,Vu,Bu);break;default:throw Error(a(329))}}}return rl(e,Xe()),e.callbackNode===n?il.bind(null,e):null}function al(e,t){var n=Uu;return e.current.memoizedState.isDehydrated&&(fl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=Vu,Vu=n,null!==t&&ol(t)),e}function ol(e){null===Vu?Vu=e:Vu.push.apply(Vu,e)}function sl(e,t){for(t&=~ju,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ul(e){if(0!==(6&Iu))throw Error(a(327));_l();var t=ft(e,0);if(0===(1&t))return rl(e,Xe()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=al(e,r))}if(1===n)throw n=Lu,fl(e,0),sl(e,t),rl(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wl(e,Vu,Bu),rl(e,Xe()),null}function ll(e,t){var n=Iu;Iu|=1;try{return e(t)}finally{0===(Iu=n)&&(qu=Xe()+500,Ui&&qi())}}function cl(e){null!==Qu&&0===Qu.tag&&0===(6&Iu)&&_l();var t=Iu;Iu|=1;var n=Tu.transition,r=kt;try{if(Tu.transition=null,kt=1,e)return e()}finally{kt=r,Tu.transition=n,0===(6&(Iu=t))&&qi()}}function hl(){Ou=Au.current,Ei(Au)}function fl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pu)for(n=Pu.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ai();break;case 3:io(),Ei(Ni),Ei(Ii),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(so);break;case 10:_a(r.type._context);break;case 22:case 23:hl()}n=n.return}if(Nu=e,Pu=e=Al(e.current,null),Ru=Ou=t,Du=0,Lu=null,ju=Fu=Mu=0,Vu=Uu=null,null!==Ca){for(t=0;t<Ca.length;t++)if(null!==(r=(n=Ca[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ca=null}return e}function dl(e,t){for(;;){var n=Pu;try{if(wa(),ho.current=os,yo){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,go=mo=vo=null,ko=!1,bo=0,Cu.current=null,null===n||null===n.return){Du=1,Lu=t,Pu=null;break}e:{var o=e,s=n.return,u=n,l=t;if(t=Ru,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,h=u,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,u,0,t),1&p.mode&&ms(o,c,t),l=c;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(l),t.updateQueue=m}else v.add(l);break e}if(0===(1&t)){ms(o,c,t),vl();break e}l=Error(a(426))}else if(ia&&1&u.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,u,0,t),pa(cs(l,u));break e}}o=l=cs(l,u),4!==Du&&(Du=2),null===Uu?Uu=[o]:Uu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,ps(0,l,t));break e;case 1:u=l;var y=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Gu||!Gu.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}bl(n)}catch(b){t=b,Pu===n&&null!==n&&(Pu=n=n.return);continue}break}}function pl(){var e=Eu.current;return Eu.current=os,null===e?os:e}function vl(){0!==Du&&3!==Du&&2!==Du||(Du=4),null===Nu||0===(268435455&Mu)&&0===(268435455&Fu)||sl(Nu,Ru)}function ml(e,t){var n=Iu;Iu|=2;var r=pl();for(Nu===e&&Ru===t||(Bu=null,fl(e,t));;)try{gl();break}catch(i){dl(e,i)}if(wa(),Iu=n,Eu.current=r,null!==Pu)throw Error(a(261));return Nu=null,Ru=0,Du}function gl(){for(;null!==Pu;)kl(Pu)}function yl(){for(;null!==Pu&&!$e();)kl(Pu)}function kl(e){var t=xu(e.alternate,e,Ou);e.memoizedProps=e.pendingProps,null===t?bl(e):Pu=t,Cu.current=null}function bl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ks(n,t,Ou)))return void(Pu=n)}else{if(null!==(n=Qs(n,t)))return n.flags&=32767,void(Pu=n);if(null===e)return Du=6,void(Pu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pu=t);Pu=t=e}while(null!==t);0===Du&&(Du=5)}function wl(e,t,n){var r=kt,i=Tu.transition;try{Tu.transition=null,kt=1,function(e,t,n,r){do{_l()}while(null!==Qu);if(0!==(6&Iu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Nu&&(Pu=Nu=null,Ru=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ku||(Ku=!0,Nl(tt,(function(){return _l(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tu.transition,Tu.transition=null;var s=kt;kt=1;var u=Iu;Iu|=4,Cu.current=null,function(e,t){if(ei=Ht,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,l=-1,c=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(u=s+i),f!==o||0!==r&&3!==f.nodeType||(l=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++c===i&&(u=s),d===o&&++h===r&&(l=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,k=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Sl(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}v=tu,tu=!1}(e,n),mu(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,yu(n,e,i),Ye(),Iu=u,kt=s,Tu.transition=o}else e.current=n;if(Ku&&(Ku=!1,Qu=e,$u=i),o=e.pendingLanes,0===o&&(Gu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Hu)throw Hu=!1,e=Wu,Wu=null,e;0!==(1&$u)&&0!==e.tag&&_l(),o=e.pendingLanes,0!==(1&o)?e===Xu?Yu++:(Yu=0,Xu=e):Yu=0,qi()}(e,t,n,r)}finally{Tu.transition=i,kt=r}return null}function _l(){if(null!==Qu){var e=bt($u),t=Tu.transition,n=kt;try{if(Tu.transition=null,kt=16>e?16:e,null===Qu)var r=!1;else{if(e=Qu,Qu=null,$u=0,0!==(6&Iu))throw Error(a(331));var i=Iu;for(Iu|=4,Js=e.current;null!==Js;){var o=Js,s=o.child;if(0!==(16&Js.flags)){var u=o.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Js=c;null!==Js;){var h=Js;switch(h.tag){case 0:case 11:case 15:nu(8,h,o)}var f=h.child;if(null!==f)f.return=h,Js=f;else for(;null!==Js;){var d=(h=Js).sibling,p=h.return;if(au(h),h===c){Js=null;break}if(null!==d){d.return=p,Js=d;break}Js=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Js=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Js=s;else e:for(;null!==Js;){if(0!==(2048&(o=Js).flags))switch(o.tag){case 0:case 11:case 15:nu(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Js=y;break e}Js=o.return}}var k=e.current;for(Js=k;null!==Js;){var b=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Js=b;else e:for(s=k;null!==Js;){if(0!==(2048&(u=Js).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(_){Sl(u,u.return,_)}if(u===s){Js=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Js=w;break e}Js=u.return}}if(Iu=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Tu.transition=t}}return!1}function xl(e,t,n){e=Da(e,t=ps(0,t=cs(n,t),1),1),t=el(),null!==e&&(gt(e,1,t),rl(e,t))}function Sl(e,t,n){if(3===e.tag)xl(e,e,n);else for(;null!==t;){if(3===t.tag){xl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gu||!Gu.has(r))){t=Da(t,e=vs(t,e=cs(n,e),1),1),e=el(),null!==t&&(gt(t,1,e),rl(t,e));break}}t=t.return}}function El(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Nu===e&&(Ru&n)===n&&(4===Du||3===Du&&(130023424&Ru)===Ru&&500>Xe()-zu?fl(e,0):ju|=n),rl(e,t)}function Cl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=el();null!==(e=Na(e,t))&&(gt(e,t,n),rl(e,n))}function Tl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cl(e,n)}function Il(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Cl(e,n)}function Nl(e,t){return Ke(e,t)}function Pl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rl(e,t,n,r){return new Pl(e,t,n,r)}function Ol(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Al(e,t){var n=e.alternate;return null===n?((n=Rl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dl(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Ol(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Ll(n.children,i,o,t);case S:s=8,i|=8;break;case E:return(e=Rl(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=Rl(13,n,t,i)).elementType=N,e.lanes=o,e;case P:return(e=Rl(19,n,t,i)).elementType=P,e.lanes=o,e;case A:return Ml(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case T:s=9;break e;case I:s=11;break e;case R:s=14;break e;case O:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rl(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ll(e,t,n,r){return(e=Rl(7,e,r,t)).lanes=n,e}function Ml(e,t,n,r){return(e=Rl(22,e,r,t)).elementType=A,e.lanes=n,e.stateNode={isHidden:!1},e}function Fl(e,t,n){return(e=Rl(6,e,null,t)).lanes=n,e}function jl(e,t,n){return(t=Rl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ul(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vl(e,t,n,r,i,a,o,s,u){return e=new Ul(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rl(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function zl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ql(e){if(!e)return Ti;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Li(e,n,t)}return t}function Bl(e,t,n,r,i,a,o,s,u){return(e=Vl(n,r,!0,e,0,a,0,s,u)).context=ql(null),n=e.current,(a=Aa(r=el(),i=tl(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,gt(e,i,r),rl(e,r),e}function Hl(e,t,n,r){var i=t.current,a=el(),o=tl(i);return n=ql(n),null===t.context?t.context=n:t.pendingContext=n,(t=Aa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(nl(e,i,o,a),La(e,i,o)),o}function Wl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kl(e,t){Gl(e,t),(e=e.alternate)&&Gl(e,t)}xu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Ps(t),da();break;case 5:ao(t);break;case 1:Oi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(ga,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Ci(so,1&so.current),null!==(e=Hs(e,t,n))?e.sibling:null);Ci(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Hs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bs(e,t),e=t.pendingProps;var i=Ri(t,Ii.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=Ns(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ol(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===R)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Is(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Ps(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Oa(e,t),Fa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Rs(e,t,r,n,i=cs(Error(a(423)),t));break e}if(r!==i){t=Rs(e,t,r,n,i=cs(Error(a(424)),t));break e}for(ra=li(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Hs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&la(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Cs(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&la(t),null;case 13:return Fs(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ci(ga,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ni.current){t=Hs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Aa(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),xa(o.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),xa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ea(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xs(e,t,r,i=ma(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Bs(e,t),t.tag=1,Oi(r)?(e=!0,Mi(t)):e=!1,Sa(t,n),Ba(t,r,i),Wa(t,r,i,n),Ns(null,t,r,!0,e,n);case 19:return qs(e,t,n);case 22:return Es(e,t,n)}throw Error(a(156,t.tag))};var Ql="function"===typeof reportError?reportError:function(e){console.error(e)};function $l(e){this._internalRoot=e}function Yl(e){this._internalRoot=e}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function ec(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Wl(o);s.call(e)}}Hl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wl(o);a.call(e)}}var o=Bl(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),cl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Wl(u);s.call(e)}}var u=Vl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=u,e[pi]=u.current,qr(8===e.nodeType?e.parentNode:e),cl((function(){Hl(t,u,n,r)})),u}(n,t,e,i,r);return Wl(o)}Yl.prototype.render=$l.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hl(e,t,null,null)},Yl.prototype.unmount=$l.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cl((function(){Hl(null,e,null,null)})),t[pi]=null}},Yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<At.length&&0!==t&&t<At[n].priority;n++);At.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),rl(t,Xe()),0===(6&Iu)&&(qu=Xe()+500,qi()))}break;case 13:cl((function(){var t=Na(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Kl(e,1)}},_t=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nl(t,e,134217728,el());Kl(e,134217728)}},xt=function(e){if(13===e.tag){var t=tl(e),n=Na(e,t);if(null!==n)nl(n,e,t,el());Kl(e,t)}},St=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));K(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=ll,Ne=cl;var tc={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ce,Te,ll]},nc={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),at=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xl(t))throw Error(a(200));return zl(e,t,null,n)},t.createRoot=function(e,t){if(!Xl(e))throw Error(a(299));var n=!1,r="",i=Ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new $l(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return cl(e)},t.hydrate=function(e,t,n){if(!Jl(t))throw Error(a(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xl(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Bl(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yl(t)},t.render=function(e,t,n){if(!Jl(t))throw Error(a(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(a(40));return!!e._reactRootContainer&&(cl((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jl(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:a,_owner:s.current}}t.Fragment=a,t.jsx=l,t.jsxs=l},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var b=k.prototype=new y;b.constructor=k,v(b,g.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:x.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+I(u,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",w(e))for(var l=0;l<e.length;l++){var c=a+I(s=e[l],l);u+=N(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=N(s=s.value,t,i,c=a+I(s,l++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function P(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},A={transition:null},D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:A,ReactCurrentOwner:x};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)_.call(t,l)&&!S.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=A.transition;A.transition={};try{e()}finally{A.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>a(u,n))l<i&&0>a(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<i&&0>a(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],h=1,f=null,d=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function w(e){if(m=!1,b(e),!v)if(null!==r(l))v=!0,A(_);else{var t=r(c);null!==t&&D(w,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,y(C),C=-1),p=!0;var a=d;try{for(b(n),f=r(l);null!==f&&(!(f.expirationTime>n)||e&&!N());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(l)&&i(l),b(n)}else i(l);f=r(l)}if(null!==f)var u=!0;else{var h=r(c);null!==h&&D(w,h.startTime-n),u=!1}return u}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,S=!1,E=null,C=-1,T=5,I=-1;function N(){return!(t.unstable_now()-I<T)}function P(){if(null!==E){var e=t.unstable_now();I=e;var n=!0;try{n=E(!0,e)}finally{n?x():(S=!1,E=null)}}else S=!1}if("function"===typeof k)x=function(){k(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,O=R.port2;R.port1.onmessage=P,x=function(){O.postMessage(null)}}else x=function(){g(P,0)};function A(e){E=e,S||(S=!0,x())}function D(e,n){C=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,A(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(l)&&e===r(c)&&(m?(y(C),C=-1):m=!0,D(w,a-o))):(e.sortIndex=s,n(l,e),v||p||(v=!0,A(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}!function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Crispies-React-Foodchain-site-DIGIT-2022/";var r={};!function(){n.d(r,{I:function(){return QT},db:function(){return $T},u:function(){return YT}});var e,t=n(791),i=n.t(t,2),a=n(250);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function f(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){if(t&&("object"===h(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function w(e){var t=y();return function(){var n,r=g(e);if(t){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}function _(e,t,n){return _=y()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&v(i,n.prototype),i},_.apply(null,arguments)}function x(e){var t="function"===typeof Map?new Map:void 0;return x=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _(e,arguments,g(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),v(n,e)},x(e)}function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));var E,C="popstate";function T(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function I(e){return{usr:e.state,key:e.key}}function N(e,t,n,r){return void 0===n&&(n=null),S({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?R(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function P(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function R(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function O(e){var t="undefined"!==typeof window&&"undefined"!==typeof window.location&&"null"!==window.location.origin?window.location.origin:window.location.href,n="string"===typeof e?e:P(e);return T(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}function A(t,n,r,i){void 0===i&&(i={});var a=i,o=a.window,s=void 0===o?document.defaultView:o,u=a.v5Compat,l=void 0!==u&&u,c=s.history,h=e.Pop,f=null;function d(){h=e.Pop,f&&f({action:h,location:p.location})}var p={get action(){return h},get location(){return t(s,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(C,d),f=e,function(){s.removeEventListener(C,d),f=null}},createHref:function(e){return n(s,e)},encodeLocation:function(e){var t=O("string"===typeof e?e:P(e));return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){h=e.Push;var i=N(p.location,t,n);r&&r(i,t);var a=I(i),o=p.createHref(i);try{c.pushState(a,"",o)}catch(qg){s.location.assign(o)}l&&f&&f({action:h,location:p.location})},replace:function(t,n){h=e.Replace;var i=N(p.location,t,n);r&&r(i,t);var a=I(i),o=p.createHref(i);c.replaceState(a,"",o),l&&f&&f({action:h,location:p.location})},go:function(e){return c.go(e)}};return p}function D(e,t,n){void 0===n&&(n="/");var r=q(("string"===typeof t?R(t):t).pathname||"/",n);if(null==r)return null;var i=L(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=U(i[o],z(r));return a}function L(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(T(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));var o=K([r,a.relativePath]),s=n.concat(a);e.children&&e.children.length>0&&(T(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),L(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:j(o,e.index),routesMeta:s})})),t}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(E||(E={}));var M=/^:\w+$/,F=function(e){return"*"===e};function j(e,t){var n=e.split("/"),r=n.length;return n.some(F)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!F(e)})).reduce((function(e,t){return e+(M.test(t)?3:""===t?1:10)}),r)}function U(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=V({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);var h=s.route;a.push({params:r,pathname:K([i,c.pathname]),pathnameBase:Q(K([i,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(i=K([i,c.pathnameBase]))}return a}function V(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);B("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=u(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],l=s.replace(/(.)\/+$/,"$1"),c=o.slice(1),h=a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";l=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(qg){return B(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+qg+")."),e}}(c[n]||"",t),e}),{});return{params:h,pathname:s,pathnameBase:l,pattern:e}}function z(e){try{return decodeURI(e)}catch(qg){return B(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+qg+")."),e}}function q(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function B(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function H(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function W(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function G(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=R(e):(T(!(i=S({},e)).pathname||!i.pathname.includes("?"),H("?","pathname","search",i)),T(!i.pathname||!i.pathname.includes("#"),H("#","pathname","hash",i)),T(!i.search||!i.search.includes("#"),H("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(r||null==s)a=n;else{var u=t.length-1;if(s.startsWith("..")){for(var l=s.split("/");".."===l[0];)l.shift(),u-=1;i.pathname=l.join("/")}a=u>=0?t[u]:"/"}var c=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?R(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:$(a),hash:Y(s)}}(i,a),h=s&&"/"!==s&&s.endsWith("/"),f=(o||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!f||(c.pathname+="/"),c}var K=function(e){return e.join("/").replace(/\/\/+/g,"/")},Q=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},$=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},Y=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},X=function(e){m(n,e);var t=w(n);function n(){return c(this,n),t.apply(this,arguments)}return p(n)}(x(Error));var J=p((function e(t,n,r,i){c(this,e),void 0===i&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}));function Z(e){return e instanceof J}var ee=["post","put","patch","delete"],te=(new Set(ee),["get"].concat(ee));new Set(te),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ne.apply(this,arguments)}var re="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ie=t.useState,ae=t.useEffect,oe=t.useLayoutEffect,se=t.useDebugValue;function ue(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!re(n,r)}catch(qg){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,i.useSyncExternalStore;var le=t.createContext(null);var ce=t.createContext(null);var he=t.createContext(null);var fe=t.createContext(null);var de=t.createContext(null);var pe=t.createContext(null);var ve=t.createContext({outlet:null,matches:[]});var me=t.createContext(null);function ge(){return null!=t.useContext(pe)}function ye(){return ge()||T(!1),t.useContext(pe).location}function ke(){ge()||T(!1);var e=t.useContext(de),n=e.basename,r=e.navigator,i=t.useContext(ve).matches,a=ye().pathname,o=JSON.stringify(W(i).map((function(e){return e.pathnameBase}))),s=t.useRef(!1);t.useEffect((function(){s.current=!0}));var u=t.useCallback((function(e,t){if(void 0===t&&(t={}),s.current)if("number"!==typeof e){var i=G(e,JSON.parse(o),a,"path"===t.relative);"/"!==n&&(i.pathname="/"===i.pathname?n:K([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state,t)}else r.go(e)}),[n,r,o,a]);return u}function be(e,n){var r=(void 0===n?{}:n).relative,i=t.useContext(ve).matches,a=ye().pathname,o=JSON.stringify(W(i).map((function(e){return e.pathnameBase})));return t.useMemo((function(){return G(e,JSON.parse(o),a,"path"===r)}),[e,o,a,r])}function we(){var e=function(){var e,n=t.useContext(me),r=Te(xe.UseRouteError),i=t.useContext(ve),a=i.matches[i.matches.length-1];if(n)return n;return i||T(!1),!a.route.id&&T(!1),null==(e=r.errors)?void 0:e[a.route.id]}(),n=Z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unhandled Thrown Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",t.createElement("code",{style:o},"errorElement")," props on\xa0",t.createElement("code",{style:o},"<Route>")))}var _e,xe,Se=function(e){m(r,e);var n=w(r);function r(e){var t;return c(this,r),(t=n.call(this,e)).state={location:e.location,error:e.error},t}return p(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(me.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),r}(t.Component);function Ee(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(le);return a&&r.route.errorElement&&(a._deepestRenderedBoundaryId=r.route.id),t.createElement(ve.Provider,{value:n},i)}function Ce(e,n,r){if(void 0===n&&(n=[]),null==e){if(null==r||!r.errors)return null;e=r.matches}var i=e,a=null==r?void 0:r.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||T(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(e,o,s){var u=o.route.id?null==a?void 0:a[o.route.id]:null,l=r?o.route.errorElement||t.createElement(we,null):null,c=function(){return t.createElement(Ee,{match:o,routeContext:{outlet:e,matches:n.concat(i.slice(0,s+1))}},u?l:void 0!==o.route.element?o.route.element:e)};return r&&(o.route.errorElement||0===s)?t.createElement(Se,{location:r.location,component:l,error:u,children:c()}):c()}),null)}function Te(e){var n=t.useContext(he);return n||T(!1),n}!function(e){e.UseRevalidator="useRevalidator"}(_e||(_e={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(xe||(xe={}));var Ie;function Ne(e){var n=e.to,r=e.replace,i=e.state,a=e.relative;ge()||T(!1);var o=t.useContext(he),s=ke();return t.useEffect((function(){o&&"idle"!==o.navigation.state||s(n,{replace:r,state:i,relative:a})})),null}function Pe(e){T(!1)}function Re(n){var r=n.basename,i=void 0===r?"/":r,a=n.children,o=void 0===a?null:a,s=n.location,u=n.navigationType,l=void 0===u?e.Pop:u,c=n.navigator,h=n.static,f=void 0!==h&&h;ge()&&T(!1);var d=i.replace(/^\/*/,"/"),p=t.useMemo((function(){return{basename:d,navigator:c,static:f}}),[d,c,f]);"string"===typeof s&&(s=R(s));var v=s,m=v.pathname,g=void 0===m?"/":m,y=v.search,k=void 0===y?"":y,b=v.hash,w=void 0===b?"":b,_=v.state,x=void 0===_?null:_,S=v.key,E=void 0===S?"default":S,C=t.useMemo((function(){var e=q(g,d);return null==e?null:{pathname:e,search:k,hash:w,state:x,key:E}}),[d,g,k,w,x,E]);return null==C?null:t.createElement(de.Provider,{value:p},t.createElement(pe.Provider,{children:o,value:{location:C,navigationType:l}}))}function Oe(n){var r=n.children,i=n.location,a=t.useContext(ce);return function(n,r){ge()||T(!1);var i,a=t.useContext(de).navigator,o=t.useContext(he),s=t.useContext(ve).matches,u=s[s.length-1],l=u?u.params:{},c=(u&&u.pathname,u?u.pathnameBase:"/"),h=(u&&u.route,ye());if(r){var f,d="string"===typeof r?R(r):r;"/"===c||(null==(f=d.pathname)?void 0:f.startsWith(c))||T(!1),i=d}else i=h;var p=i.pathname||"/",v=D(n,{pathname:"/"===c?p:p.slice(c.length)||"/"}),m=Ce(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},l,e.params),pathname:K([c,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:K([c,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),s,o||void 0);return r&&m?t.createElement(pe.Provider,{value:{location:ne({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:e.Pop}},m):m}(a&&!r?a.router.routes:De(r),i)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Ie||(Ie={}));var Ae=new Promise((function(){}));t.Component;function De(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e))if(e.type!==t.Fragment){e.type!==Pe&&T(!1),e.props.index&&e.props.children&&T(!1);var a=[].concat(l(n),[i]),o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(o.children=De(e.props.children,a)),r.push(o)}else r.push.apply(r,De(e.props.children,n))})),r}function Le(){return Le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Le.apply(this,arguments)}function Me(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Fe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function je(e){var n,r=e.basename,i=e.children,a=e.window,o=t.useRef();null==o.current&&(o.current=(void 0===(n={window:a,v5Compat:!0})&&(n={}),A((function(e,t){var n=e.location;return N("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:P(t)}),null,n)));var s=o.current,l=u(t.useState({action:s.action,location:s.location}),2),c=l[0],h=l[1];return t.useLayoutEffect((function(){return s.listen(h)}),[s]),t.createElement(Re,{basename:r,children:i,location:c.location,navigationType:c.action,navigator:s})}var Ue=t.forwardRef((function(e,n){var r=e.onClick,i=e.relative,a=e.reloadDocument,o=e.replace,s=e.state,u=e.target,l=e.to,c=e.preventScrollReset,h=Me(e,Fe),f=function(e,n){var r=(void 0===n?{}:n).relative;ge()||T(!1);var i=t.useContext(de),a=i.basename,o=i.navigator,s=be(e,{relative:r}),u=s.hash,l=s.pathname,c=s.search,h=l;return"/"!==a&&(h="/"===l?a:K([a,l])),o.createHref({pathname:h,search:c,hash:u})}(l,{relative:i}),d=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,s=r.preventScrollReset,u=r.relative,l=ke(),c=ye(),h=be(e,{relative:u});return t.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:P(c)===P(h);l(e,{replace:n,state:o,preventScrollReset:s,relative:u})}}),[c,l,h,a,o,i,e,s,u])}(l,{replace:o,state:s,target:u,preventScrollReset:c,relative:i});return t.createElement("a",Le({},h,{href:f,onClick:a?r:function(e){r&&r(e),e.defaultPrevented||d(e)},ref:n,target:u}))}));var Ve,ze;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Ve||(Ve={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ze||(ze={}));function qe(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Be(e){return null!==e&&"object"===typeof e&&"constructor"in e&&e.constructor===Object}function He(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(t).forEach((function(n){"undefined"===typeof e[n]?e[n]=t[n]:Be(t[n])&&Be(e[n])&&Object.keys(t[n]).length>0&&He(e[n],t[n])}))}var We={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Ge(){var e="undefined"!==typeof document?document:{};return He(e,We),e}var Ke={document:We,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(e){return"undefined"===typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){"undefined"!==typeof setTimeout&&clearTimeout(e)}};function Qe(){var e="undefined"!==typeof window?window:{};return He(e,Ke),e}var $e=function(e){m(n,e);var t=w(n);function n(e){var r;return c(this,n),"number"===typeof e?r=t.call(this,e):function(e){var t=e.__proto__;Object.defineProperty(e,"__proto__",{get:function(){return t},set:function(e){t.__proto__=e}})}(k(r=t.call.apply(t,[this].concat(l(e||[]))))),b(r)}return p(n)}(x(Array));function Ye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.forEach((function(e){Array.isArray(e)?t.push.apply(t,l(Ye(e))):t.push(e)})),t}function Xe(e,t){return Array.prototype.filter.call(e,t)}function Je(e,t){var n=Qe(),r=Ge(),i=[];if(!t&&e instanceof $e)return e;if(!e)return new $e(i);if("string"===typeof e){var a=e.trim();if(a.indexOf("<")>=0&&a.indexOf(">")>=0){var o="div";0===a.indexOf("<li")&&(o="ul"),0===a.indexOf("<tr")&&(o="tbody"),0!==a.indexOf("<td")&&0!==a.indexOf("<th")||(o="tr"),0===a.indexOf("<tbody")&&(o="table"),0===a.indexOf("<option")&&(o="select");var s=r.createElement(o);s.innerHTML=a;for(var u=0;u<s.childNodes.length;u+=1)i.push(s.childNodes[u])}else i=function(e,t){if("string"!==typeof e)return[e];for(var n=[],r=t.querySelectorAll(e),i=0;i<r.length;i+=1)n.push(r[i]);return n}(e.trim(),t||r)}else if(e.nodeType||e===n||e===r)i.push(e);else if(Array.isArray(e)){if(e instanceof $e)return e;i=e}return new $e(function(e){for(var t=[],n=0;n<e.length;n+=1)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(i))}Je.fn=$e.prototype;var Ze="resize scroll".split(" ");function et(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if("undefined"===typeof n[0]){for(var i=0;i<this.length;i+=1)Ze.indexOf(e)<0&&(e in this[i]?this[i][e]():Je(this[i]).trigger(e));return this}return this.on.apply(this,[e].concat(n))}}et("click"),et("blur"),et("focus"),et("focusin"),et("focusout"),et("keyup"),et("keydown"),et("keypress"),et("submit"),et("change"),et("mousedown"),et("mousemove"),et("mouseup"),et("mouseenter"),et("mouseleave"),et("mouseout"),et("mouseover"),et("touchstart"),et("touchend"),et("touchmove"),et("resize"),et("scroll");var tt={addClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Ye(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).add.apply(t,l(r))})),this},removeClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Ye(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).remove.apply(t,l(r))})),this},hasClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Ye(t.map((function(e){return e.split(" ")})));return Xe(this,(function(e){return r.filter((function(t){return e.classList.contains(t)})).length>0})).length>0},toggleClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Ye(t.map((function(e){return e.split(" ")})));this.forEach((function(e){r.forEach((function(t){e.classList.toggle(t)}))}))},attr:function(e,t){if(1===arguments.length&&"string"===typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var n=0;n<this.length;n+=1)if(2===arguments.length)this[n].setAttribute(e,t);else for(var r in e)this[n][r]=e[r],this[n].setAttribute(r,e[r]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},transform:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transform=e;return this},transition:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transitionDuration="string"!==typeof e?"".concat(e,"ms"):e;return this},on:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2],o=t[3];function s(e){var t=e.target;if(t){var n=e.target.dom7EventData||[];if(n.indexOf(e)<0&&n.unshift(e),Je(t).is(i))a.apply(t,n);else for(var r=Je(t).parents(),o=0;o<r.length;o+=1)Je(r[o]).is(i)&&a.apply(r[o],n)}}function u(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),a.apply(this,t)}"function"===typeof t[1]&&(r=t[0],a=t[1],o=t[2],i=void 0),o||(o=!1);for(var l,c=r.split(" "),h=0;h<this.length;h+=1){var f=this[h];if(i)for(l=0;l<c.length;l+=1){var d=c[l];f.dom7LiveListeners||(f.dom7LiveListeners={}),f.dom7LiveListeners[d]||(f.dom7LiveListeners[d]=[]),f.dom7LiveListeners[d].push({listener:a,proxyListener:s}),f.addEventListener(d,s,o)}else for(l=0;l<c.length;l+=1){var p=c[l];f.dom7Listeners||(f.dom7Listeners={}),f.dom7Listeners[p]||(f.dom7Listeners[p]=[]),f.dom7Listeners[p].push({listener:a,proxyListener:u}),f.addEventListener(p,u,o)}}return this},off:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2],o=t[3];"function"===typeof t[1]&&(r=t[0],a=t[1],o=t[2],i=void 0),o||(o=!1);for(var s=r.split(" "),u=0;u<s.length;u+=1)for(var l=s[u],c=0;c<this.length;c+=1){var h=this[c],f=void 0;if(!i&&h.dom7Listeners?f=h.dom7Listeners[l]:i&&h.dom7LiveListeners&&(f=h.dom7LiveListeners[l]),f&&f.length)for(var d=f.length-1;d>=0;d-=1){var p=f[d];a&&p.listener===a||a&&p.listener&&p.listener.dom7proxy&&p.listener.dom7proxy===a?(h.removeEventListener(l,p.proxyListener,o),f.splice(d,1)):a||(h.removeEventListener(l,p.proxyListener,o),f.splice(d,1))}}return this},trigger:function(){for(var e=Qe(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=n[0].split(" "),a=n[1],o=0;o<i.length;o+=1)for(var s=i[o],u=0;u<this.length;u+=1){var l=this[u];if(e.CustomEvent){var c=new e.CustomEvent(s,{detail:a,bubbles:!0,cancelable:!0});l.dom7EventData=n.filter((function(e,t){return t>0})),l.dispatchEvent(c),l.dom7EventData=[],delete l.dom7EventData}}return this},transitionEnd:function(e){var t=this;return e&&t.on("transitionend",(function n(r){r.target===this&&(e.call(this,r),t.off("transitionend",n))})),this},outerWidth:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){var e=Qe();return this[0]?e.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){var e=Qe(),t=Ge(),n=this[0],r=n.getBoundingClientRect(),i=t.body,a=n.clientTop||i.clientTop||0,o=n.clientLeft||i.clientLeft||0,s=n===e?e.scrollY:n.scrollTop,u=n===e?e.scrollX:n.scrollLeft;return{top:r.top+s-a,left:r.left+u-o}}return null},css:function(e,t){var n,r=Qe();if(1===arguments.length){if("string"!==typeof e){for(n=0;n<this.length;n+=1)for(var i in e)this[n].style[i]=e[i];return this}if(this[0])return r.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"===typeof e){for(n=0;n<this.length;n+=1)this[n].style[e]=t;return this}return this},each:function(e){return e?(this.forEach((function(t,n){e.apply(t,[t,n])})),this):this},html:function(e){if("undefined"===typeof e)return this[0]?this[0].innerHTML:null;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if("undefined"===typeof e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){var t,n,r=Qe(),i=Ge(),a=this[0];if(!a||"undefined"===typeof e)return!1;if("string"===typeof e){if(a.matches)return a.matches(e);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(e);if(a.msMatchesSelector)return a.msMatchesSelector(e);for(t=Je(e),n=0;n<t.length;n+=1)if(t[n]===a)return!0;return!1}if(e===i)return a===i;if(e===r)return a===r;if(e.nodeType||e instanceof $e){for(t=e.nodeType?[e]:e,n=0;n<t.length;n+=1)if(t[n]===a)return!0;return!1}return!1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if("undefined"===typeof e)return this;var t=this.length;if(e>t-1)return Je([]);if(e<0){var n=t+e;return Je(n<0?[]:[this[n]])}return Je([this[e]])},append:function(){for(var e,t=Ge(),n=0;n<arguments.length;n+=1){e=n<0||arguments.length<=n?void 0:arguments[n];for(var r=0;r<this.length;r+=1)if("string"===typeof e){var i=t.createElement("div");for(i.innerHTML=e;i.firstChild;)this[r].appendChild(i.firstChild)}else if(e instanceof $e)for(var a=0;a<e.length;a+=1)this[r].appendChild(e[a]);else this[r].appendChild(e)}return this},prepend:function(e){var t,n,r=Ge();for(t=0;t<this.length;t+=1)if("string"===typeof e){var i=r.createElement("div");for(i.innerHTML=e,n=i.childNodes.length-1;n>=0;n-=1)this[t].insertBefore(i.childNodes[n],this[t].childNodes[0])}else if(e instanceof $e)for(n=0;n<e.length;n+=1)this[t].insertBefore(e[n],this[t].childNodes[0]);else this[t].insertBefore(e,this[t].childNodes[0]);return this},next:function(e){return this.length>0?e?this[0].nextElementSibling&&Je(this[0].nextElementSibling).is(e)?Je([this[0].nextElementSibling]):Je([]):this[0].nextElementSibling?Je([this[0].nextElementSibling]):Je([]):Je([])},nextAll:function(e){var t=[],n=this[0];if(!n)return Je([]);for(;n.nextElementSibling;){var r=n.nextElementSibling;e?Je(r).is(e)&&t.push(r):t.push(r),n=r}return Je(t)},prev:function(e){if(this.length>0){var t=this[0];return e?t.previousElementSibling&&Je(t.previousElementSibling).is(e)?Je([t.previousElementSibling]):Je([]):t.previousElementSibling?Je([t.previousElementSibling]):Je([])}return Je([])},prevAll:function(e){var t=[],n=this[0];if(!n)return Je([]);for(;n.previousElementSibling;){var r=n.previousElementSibling;e?Je(r).is(e)&&t.push(r):t.push(r),n=r}return Je(t)},parent:function(e){for(var t=[],n=0;n<this.length;n+=1)null!==this[n].parentNode&&(e?Je(this[n].parentNode).is(e)&&t.push(this[n].parentNode):t.push(this[n].parentNode));return Je(t)},parents:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].parentNode;r;)e?Je(r).is(e)&&t.push(r):t.push(r),r=r.parentNode;return Je(t)},closest:function(e){var t=this;return"undefined"===typeof e?Je([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].querySelectorAll(e),i=0;i<r.length;i+=1)t.push(r[i]);return Je(t)},children:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].children,i=0;i<r.length;i+=1)e&&!Je(r[i]).is(e)||t.push(r[i]);return Je(t)},filter:function(e){return Je(Xe(this,e))},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}};Object.keys(tt).forEach((function(e){Object.defineProperty(Je.fn,e,{value:tt[e],writable:!0})}));var nt,rt,it,at=Je;function ot(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function st(e){var t=e;Object.keys(t).forEach((function(e){try{t[e]=null}catch(n){}try{delete t[e]}catch(n){}}))}function ut(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return setTimeout(e,t)}function lt(){return Date.now()}function ct(e){var t,n=Qe();return n.getComputedStyle&&(t=n.getComputedStyle(e,null)),!t&&e.currentStyle&&(t=e.currentStyle),t||(t=e.style),t}function ht(e){var t,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",a=Qe(),o=ct(e);return a.WebKitCSSMatrix?((n=o.transform||o.webkitTransform).split(",").length>6&&(n=n.split(", ").map((function(e){return e.replace(",",".")})).join(", ")),r=new a.WebKitCSSMatrix("none"===n?"":n)):t=(r=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===i&&(n=a.WebKitCSSMatrix?r.m41:16===t.length?parseFloat(t[12]):parseFloat(t[4])),"y"===i&&(n=a.WebKitCSSMatrix?r.m42:16===t.length?parseFloat(t[13]):parseFloat(t[5])),n||0}function ft(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function dt(e){return"undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement?e instanceof HTMLElement:e&&(1===e.nodeType||11===e.nodeType)}function pt(){for(var e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"],n=1;n<arguments.length;n+=1){var r=n<0||arguments.length<=n?void 0:arguments[n];if(void 0!==r&&null!==r&&!dt(r))for(var i=Object.keys(Object(r)).filter((function(e){return t.indexOf(e)<0})),a=0,o=i.length;a<o;a+=1){var s=i[a],u=Object.getOwnPropertyDescriptor(r,s);void 0!==u&&u.enumerable&&(ft(e[s])&&ft(r[s])?r[s].__swiper__?e[s]=r[s]:pt(e[s],r[s]):!ft(e[s])&&ft(r[s])?(e[s]={},r[s].__swiper__?e[s]=r[s]:pt(e[s],r[s])):e[s]=r[s])}}return e}function vt(e,t,n){e.style.setProperty(t,n)}function mt(e){var t,n=e.swiper,r=e.targetPosition,i=e.side,a=Qe(),o=-n.translate,s=null,u=n.params.speed;n.wrapperEl.style.scrollSnapType="none",a.cancelAnimationFrame(n.cssModeFrameID);var l=r>o?"next":"prev",c=function(e,t){return"next"===l&&e>=t||"prev"===l&&e<=t};!function e(){t=(new Date).getTime(),null===s&&(s=t);var l=Math.max(Math.min((t-s)/u,1),0),h=.5-Math.cos(l*Math.PI)/2,f=o+h*(r-o);if(c(f,r)&&(f=r),n.wrapperEl.scrollTo(ot({},i,f)),c(f,r))return n.wrapperEl.style.overflow="hidden",n.wrapperEl.style.scrollSnapType="",setTimeout((function(){n.wrapperEl.style.overflow="",n.wrapperEl.scrollTo(ot({},i,f))})),void a.cancelAnimationFrame(n.cssModeFrameID);n.cssModeFrameID=a.requestAnimationFrame(e)}()}function gt(){return nt||(nt=function(){var e=Qe(),t=Ge();return{smoothScroll:t.documentElement&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),passiveListener:function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("testPassiveListener",null,n)}catch(r){}return t}(),gestures:"ongesturestart"in e}}()),nt}function yt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userAgent,n=gt(),r=Qe(),i=r.navigator.platform,a=t||r.navigator.userAgent,o={ios:!1,android:!1},s=r.screen.width,u=r.screen.height,l=a.match(/(Android);?[\s\/]+([\d.]+)?/),c=a.match(/(iPad).*OS\s([\d_]+)/),h=a.match(/(iPod)(.*OS\s([\d_]+))?/),f=!c&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),d="Win32"===i,p="MacIntel"===i,v=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!c&&p&&n.touch&&v.indexOf("".concat(s,"x").concat(u))>=0&&((c=a.match(/(Version)\/([\d.]+)/))||(c=[0,1,"13_0_0"]),p=!1),l&&!d&&(o.os="android",o.android=!0),(c||f||h)&&(o.os="ios",o.ios=!0),o}function kt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return rt||(rt=yt(e)),rt}function bt(){return it||(it=function(){var e=Qe();return{isSafari:function(){var t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}()),it}var wt={on:function(e,t,n){var r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!==typeof t)return r;var i=n?"unshift":"push";return e.split(" ").forEach((function(e){r.eventsListeners[e]||(r.eventsListeners[e]=[]),r.eventsListeners[e][i](t)})),r},once:function(e,t,n){var r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!==typeof t)return r;function i(){r.off(e,i),i.__emitterProxy&&delete i.__emitterProxy;for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];t.apply(r,a)}return i.__emitterProxy=t,r.on(e,i,n)},onAny:function(e,t){var n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!==typeof e)return n;var r=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[r](e),n},offAny:function(e){var t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;var n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off:function(e,t){var n=this;return!n.eventsListeners||n.destroyed?n:n.eventsListeners?(e.split(" ").forEach((function(e){"undefined"===typeof t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach((function(r,i){(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[e].splice(i,1)}))})),n):n},emit:function(){var e,t,n,r=this;if(!r.eventsListeners||r.destroyed)return r;if(!r.eventsListeners)return r;for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];"string"===typeof a[0]||Array.isArray(a[0])?(e=a[0],t=a.slice(1,a.length),n=r):(e=a[0].events,t=a[0].data,n=a[0].context||r),t.unshift(n);var s=Array.isArray(e)?e:e.split(" ");return s.forEach((function(e){r.eventsAnyListeners&&r.eventsAnyListeners.length&&r.eventsAnyListeners.forEach((function(r){r.apply(n,[e].concat(l(t)))})),r.eventsListeners&&r.eventsListeners[e]&&r.eventsListeners[e].forEach((function(e){e.apply(n,t)}))})),r}};var _t={updateSize:function(){var e,t,n=this,r=n.$el;e="undefined"!==typeof n.params.width&&null!==n.params.width?n.params.width:r[0].clientWidth,t="undefined"!==typeof n.params.height&&null!==n.params.height?n.params.height:r[0].clientHeight,0===e&&n.isHorizontal()||0===t&&n.isVertical()||(e=e-parseInt(r.css("padding-left")||0,10)-parseInt(r.css("padding-right")||0,10),t=t-parseInt(r.css("padding-top")||0,10)-parseInt(r.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))},updateSlides:function(){var e=this;function t(t){return e.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}function n(e,n){return parseFloat(e.getPropertyValue(t(n))||0)}var r=e.params,i=e.$wrapperEl,a=e.size,o=e.rtlTranslate,s=e.wrongRTL,u=e.virtual&&r.virtual.enabled,l=u?e.virtual.slides.length:e.slides.length,c=i.children(".".concat(e.params.slideClass)),h=u?e.virtual.slides.length:c.length,f=[],d=[],p=[],v=r.slidesOffsetBefore;"function"===typeof v&&(v=r.slidesOffsetBefore.call(e));var m=r.slidesOffsetAfter;"function"===typeof m&&(m=r.slidesOffsetAfter.call(e));var g=e.snapGrid.length,y=e.slidesGrid.length,k=r.spaceBetween,b=-v,w=0,_=0;if("undefined"!==typeof a){"string"===typeof k&&k.indexOf("%")>=0&&(k=parseFloat(k.replace("%",""))/100*a),e.virtualSize=-k,o?c.css({marginLeft:"",marginBottom:"",marginTop:""}):c.css({marginRight:"",marginBottom:"",marginTop:""}),r.centeredSlides&&r.cssMode&&(vt(e.wrapperEl,"--swiper-centered-offset-before",""),vt(e.wrapperEl,"--swiper-centered-offset-after",""));var x,S=r.grid&&r.grid.rows>1&&e.grid;S&&e.grid.initSlides(h);for(var E="auto"===r.slidesPerView&&r.breakpoints&&Object.keys(r.breakpoints).filter((function(e){return"undefined"!==typeof r.breakpoints[e].slidesPerView})).length>0,C=0;C<h;C+=1){x=0;var T=c.eq(C);if(S&&e.grid.updateSlide(C,T,h,t),"none"!==T.css("display")){if("auto"===r.slidesPerView){E&&(c[C].style[t("width")]="");var I=getComputedStyle(T[0]),N=T[0].style.transform,P=T[0].style.webkitTransform;if(N&&(T[0].style.transform="none"),P&&(T[0].style.webkitTransform="none"),r.roundLengths)x=e.isHorizontal()?T.outerWidth(!0):T.outerHeight(!0);else{var R=n(I,"width"),O=n(I,"padding-left"),A=n(I,"padding-right"),D=n(I,"margin-left"),L=n(I,"margin-right"),M=I.getPropertyValue("box-sizing");if(M&&"border-box"===M)x=R+D+L;else{var F=T[0],j=F.clientWidth;x=R+O+A+D+L+(F.offsetWidth-j)}}N&&(T[0].style.transform=N),P&&(T[0].style.webkitTransform=P),r.roundLengths&&(x=Math.floor(x))}else x=(a-(r.slidesPerView-1)*k)/r.slidesPerView,r.roundLengths&&(x=Math.floor(x)),c[C]&&(c[C].style[t("width")]="".concat(x,"px"));c[C]&&(c[C].swiperSlideSize=x),p.push(x),r.centeredSlides?(b=b+x/2+w/2+k,0===w&&0!==C&&(b=b-a/2-k),0===C&&(b=b-a/2-k),Math.abs(b)<.001&&(b=0),r.roundLengths&&(b=Math.floor(b)),_%r.slidesPerGroup===0&&f.push(b),d.push(b)):(r.roundLengths&&(b=Math.floor(b)),(_-Math.min(e.params.slidesPerGroupSkip,_))%e.params.slidesPerGroup===0&&f.push(b),d.push(b),b=b+x+k),e.virtualSize+=x+k,w=x,_+=1}}if(e.virtualSize=Math.max(e.virtualSize,a)+m,o&&s&&("slide"===r.effect||"coverflow"===r.effect)&&i.css({width:"".concat(e.virtualSize+r.spaceBetween,"px")}),r.setWrapperSize&&i.css(ot({},t("width"),"".concat(e.virtualSize+r.spaceBetween,"px"))),S&&e.grid.updateWrapperSize(x,f,t),!r.centeredSlides){for(var U=[],V=0;V<f.length;V+=1){var z=f[V];r.roundLengths&&(z=Math.floor(z)),f[V]<=e.virtualSize-a&&U.push(z)}f=U,Math.floor(e.virtualSize-a)-Math.floor(f[f.length-1])>1&&f.push(e.virtualSize-a)}if(0===f.length&&(f=[0]),0!==r.spaceBetween){var q=e.isHorizontal()&&o?"marginLeft":t("marginRight");c.filter((function(e,t){return!r.cssMode||t!==c.length-1})).css(ot({},q,"".concat(k,"px")))}if(r.centeredSlides&&r.centeredSlidesBounds){var B=0;p.forEach((function(e){B+=e+(r.spaceBetween?r.spaceBetween:0)}));var H=(B-=r.spaceBetween)-a;f=f.map((function(e){return e<0?-v:e>H?H+m:e}))}if(r.centerInsufficientSlides){var W=0;if(p.forEach((function(e){W+=e+(r.spaceBetween?r.spaceBetween:0)})),(W-=r.spaceBetween)<a){var G=(a-W)/2;f.forEach((function(e,t){f[t]=e-G})),d.forEach((function(e,t){d[t]=e+G}))}}if(Object.assign(e,{slides:c,snapGrid:f,slidesGrid:d,slidesSizesGrid:p}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){vt(e.wrapperEl,"--swiper-centered-offset-before","".concat(-f[0],"px")),vt(e.wrapperEl,"--swiper-centered-offset-after","".concat(e.size/2-p[p.length-1]/2,"px"));var K=-e.snapGrid[0],Q=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map((function(e){return e+K})),e.slidesGrid=e.slidesGrid.map((function(e){return e+Q}))}if(h!==l&&e.emit("slidesLengthChange"),f.length!==g&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),d.length!==y&&e.emit("slidesGridLengthChange"),r.watchSlidesProgress&&e.updateSlidesOffset(),!u&&!r.cssMode&&("slide"===r.effect||"fade"===r.effect)){var $="".concat(r.containerModifierClass,"backface-hidden"),Y=e.$el.hasClass($);h<=r.maxBackfaceHiddenSlides?Y||e.$el.addClass($):Y&&e.$el.removeClass($)}}},updateAutoHeight:function(e){var t,n=this,r=[],i=n.virtual&&n.params.virtual.enabled,a=0;"number"===typeof e?n.setTransition(e):!0===e&&n.setTransition(n.params.speed);var o=function(e){return i?n.slides.filter((function(t){return parseInt(t.getAttribute("data-swiper-slide-index"),10)===e}))[0]:n.slides.eq(e)[0]};if("auto"!==n.params.slidesPerView&&n.params.slidesPerView>1)if(n.params.centeredSlides)(n.visibleSlides||at([])).each((function(e){r.push(e)}));else for(t=0;t<Math.ceil(n.params.slidesPerView);t+=1){var s=n.activeIndex+t;if(s>n.slides.length&&!i)break;r.push(o(s))}else r.push(o(n.activeIndex));for(t=0;t<r.length;t+=1)if("undefined"!==typeof r[t]){var u=r[t].offsetHeight;a=u>a?u:a}(a||0===a)&&n.$wrapperEl.css("height","".concat(a,"px"))},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this&&this.translate||0,t=this,n=t.params,r=t.slides,i=t.rtlTranslate,a=t.snapGrid;if(0!==r.length){"undefined"===typeof r[0].swiperSlideOffset&&t.updateSlidesOffset();var o=-e;i&&(o=e),r.removeClass(n.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(var s=0;s<r.length;s+=1){var u=r[s],l=u.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(l-=r[0].swiperSlideOffset);var c=(o+(n.centeredSlides?t.minTranslate():0)-l)/(u.swiperSlideSize+n.spaceBetween),h=(o-a[0]+(n.centeredSlides?t.minTranslate():0)-l)/(u.swiperSlideSize+n.spaceBetween),f=-(o-l),d=f+t.slidesSizesGrid[s],p=f>=0&&f<t.size-1||d>1&&d<=t.size||f<=0&&d>=t.size;p&&(t.visibleSlides.push(u),t.visibleSlidesIndexes.push(s),r.eq(s).addClass(n.slideVisibleClass)),u.progress=i?-c:c,u.originalProgress=i?-h:h}t.visibleSlides=at(t.visibleSlides)}},updateProgress:function(e){var t=this;if("undefined"===typeof e){var n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}var r=t.params,i=t.maxTranslate()-t.minTranslate(),a=t.progress,o=t.isBeginning,s=t.isEnd,u=o,l=s;0===i?(a=0,o=!0,s=!0):(o=(a=(e-t.minTranslate())/i)<=0,s=a>=1),Object.assign(t,{progress:a,isBeginning:o,isEnd:s}),(r.watchSlidesProgress||r.centeredSlides&&r.autoHeight)&&t.updateSlidesProgress(e),o&&!u&&t.emit("reachBeginning toEdge"),s&&!l&&t.emit("reachEnd toEdge"),(u&&!o||l&&!s)&&t.emit("fromEdge"),t.emit("progress",a)},updateSlidesClasses:function(){var e,t=this,n=t.slides,r=t.params,i=t.$wrapperEl,a=t.activeIndex,o=t.realIndex,s=t.virtual&&r.virtual.enabled;n.removeClass("".concat(r.slideActiveClass," ").concat(r.slideNextClass," ").concat(r.slidePrevClass," ").concat(r.slideDuplicateActiveClass," ").concat(r.slideDuplicateNextClass," ").concat(r.slideDuplicatePrevClass)),(e=s?t.$wrapperEl.find(".".concat(r.slideClass,'[data-swiper-slide-index="').concat(a,'"]')):n.eq(a)).addClass(r.slideActiveClass),r.loop&&(e.hasClass(r.slideDuplicateClass)?i.children(".".concat(r.slideClass,":not(.").concat(r.slideDuplicateClass,')[data-swiper-slide-index="').concat(o,'"]')).addClass(r.slideDuplicateActiveClass):i.children(".".concat(r.slideClass,".").concat(r.slideDuplicateClass,'[data-swiper-slide-index="').concat(o,'"]')).addClass(r.slideDuplicateActiveClass));var u=e.nextAll(".".concat(r.slideClass)).eq(0).addClass(r.slideNextClass);r.loop&&0===u.length&&(u=n.eq(0)).addClass(r.slideNextClass);var l=e.prevAll(".".concat(r.slideClass)).eq(0).addClass(r.slidePrevClass);r.loop&&0===l.length&&(l=n.eq(-1)).addClass(r.slidePrevClass),r.loop&&(u.hasClass(r.slideDuplicateClass)?i.children(".".concat(r.slideClass,":not(.").concat(r.slideDuplicateClass,')[data-swiper-slide-index="').concat(u.attr("data-swiper-slide-index"),'"]')).addClass(r.slideDuplicateNextClass):i.children(".".concat(r.slideClass,".").concat(r.slideDuplicateClass,'[data-swiper-slide-index="').concat(u.attr("data-swiper-slide-index"),'"]')).addClass(r.slideDuplicateNextClass),l.hasClass(r.slideDuplicateClass)?i.children(".".concat(r.slideClass,":not(.").concat(r.slideDuplicateClass,')[data-swiper-slide-index="').concat(l.attr("data-swiper-slide-index"),'"]')).addClass(r.slideDuplicatePrevClass):i.children(".".concat(r.slideClass,".").concat(r.slideDuplicateClass,'[data-swiper-slide-index="').concat(l.attr("data-swiper-slide-index"),'"]')).addClass(r.slideDuplicatePrevClass)),t.emitSlidesClasses()},updateActiveIndex:function(e){var t,n=this,r=n.rtlTranslate?n.translate:-n.translate,i=n.slidesGrid,a=n.snapGrid,o=n.params,s=n.activeIndex,u=n.realIndex,l=n.snapIndex,c=e;if("undefined"===typeof c){for(var h=0;h<i.length;h+=1)"undefined"!==typeof i[h+1]?r>=i[h]&&r<i[h+1]-(i[h+1]-i[h])/2?c=h:r>=i[h]&&r<i[h+1]&&(c=h+1):r>=i[h]&&(c=h);o.normalizeSlideIndex&&(c<0||"undefined"===typeof c)&&(c=0)}if(a.indexOf(r)>=0)t=a.indexOf(r);else{var f=Math.min(o.slidesPerGroupSkip,c);t=f+Math.floor((c-f)/o.slidesPerGroup)}if(t>=a.length&&(t=a.length-1),c!==s){var d=parseInt(n.slides.eq(c).attr("data-swiper-slide-index")||c,10);Object.assign(n,{snapIndex:t,realIndex:d,previousIndex:s,activeIndex:c}),n.emit("activeIndexChange"),n.emit("snapIndexChange"),u!==d&&n.emit("realIndexChange"),(n.initialized||n.params.runCallbacksOnInit)&&n.emit("slideChange")}else t!==l&&(n.snapIndex=t,n.emit("snapIndexChange"))},updateClickedSlide:function(e){var t,n=this,r=n.params,i=at(e).closest(".".concat(r.slideClass))[0],a=!1;if(i)for(var o=0;o<n.slides.length;o+=1)if(n.slides[o]===i){a=!0,t=o;break}if(!i||!a)return n.clickedSlide=void 0,void(n.clickedIndex=void 0);n.clickedSlide=i,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(at(i).attr("data-swiper-slide-index"),10):n.clickedIndex=t,r.slideToClickedSlide&&void 0!==n.clickedIndex&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}};var xt={getTranslate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.isHorizontal()?"x":"y",t=this,n=t.params,r=t.rtlTranslate,i=t.translate,a=t.$wrapperEl;if(n.virtualTranslate)return r?-i:i;if(n.cssMode)return i;var o=ht(a[0],e);return r&&(o=-o),o||0},setTranslate:function(e,t){var n=this,r=n.rtlTranslate,i=n.params,a=n.$wrapperEl,o=n.wrapperEl,s=n.progress,u=0,l=0;n.isHorizontal()?u=r?-e:e:l=e,i.roundLengths&&(u=Math.floor(u),l=Math.floor(l)),i.cssMode?o[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-u:-l:i.virtualTranslate||a.transform("translate3d(".concat(u,"px, ").concat(l,"px, ").concat(0,"px)")),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?u:l;var c=n.maxTranslate()-n.minTranslate();(0===c?0:(e-n.minTranslate())/c)!==s&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.speed,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4?arguments[4]:void 0,a=this,o=a.params,s=a.wrapperEl;if(a.animating&&o.preventInteractionOnTransition)return!1;var u,l=a.minTranslate(),c=a.maxTranslate();if(u=r&&e>l?l:r&&e<c?c:e,a.updateProgress(u),o.cssMode){var h=a.isHorizontal();if(0===t)s[h?"scrollLeft":"scrollTop"]=-u;else{var f;if(!a.support.smoothScroll)return mt({swiper:a,targetPosition:-u,side:h?"left":"top"}),!0;s.scrollTo((ot(f={},h?"left":"top",-u),ot(f,"behavior","smooth"),f))}return!0}return 0===t?(a.setTransition(0),a.setTranslate(u),n&&(a.emit("beforeTransitionStart",t,i),a.emit("transitionEnd"))):(a.setTransition(t),a.setTranslate(u),n&&(a.emit("beforeTransitionStart",t,i),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(e){a&&!a.destroyed&&e.target===this&&(a.$wrapperEl[0].removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].removeEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,n&&a.emit("transitionEnd"))}),a.$wrapperEl[0].addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].addEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd))),!0}};function St(e){var t=e.swiper,n=e.runCallbacks,r=e.direction,i=e.step,a=t.activeIndex,o=t.previousIndex,s=r;if(s||(s=a>o?"next":a<o?"prev":"reset"),t.emit("transition".concat(i)),n&&a!==o){if("reset"===s)return void t.emit("slideResetTransition".concat(i));t.emit("slideChangeTransition".concat(i)),"next"===s?t.emit("slideNextTransition".concat(i)):t.emit("slidePrevTransition".concat(i))}}var Et={setTransition:function(e,t){var n=this;n.params.cssMode||n.$wrapperEl.transition(e),n.emit("setTransition",e,t)},transitionStart:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=this,r=n.params;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),St({swiper:n,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=this,r=n.params;n.animating=!1,r.cssMode||(n.setTransition(0),St({swiper:n,runCallbacks:e,direction:t,step:"End"}))}};var Ct={slideTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.speed,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if("number"!==typeof e&&"string"!==typeof e)throw new Error("The 'index' argument cannot have type other than 'number' or 'string'. [".concat(typeof e,"] given."));if("string"===typeof e){var a=parseInt(e,10),o=isFinite(a);if(!o)throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. [".concat(e,"] given."));e=a}var s=this,u=e;u<0&&(u=0);var l=s.params,c=s.snapGrid,h=s.slidesGrid,f=s.previousIndex,d=s.activeIndex,p=s.rtlTranslate,v=s.wrapperEl,m=s.enabled;if(s.animating&&l.preventInteractionOnTransition||!m&&!r&&!i)return!1;var g=Math.min(s.params.slidesPerGroupSkip,u),y=g+Math.floor((u-g)/s.params.slidesPerGroup);y>=c.length&&(y=c.length-1);var k,b=-c[y];if(l.normalizeSlideIndex)for(var w=0;w<h.length;w+=1){var _=-Math.floor(100*b),x=Math.floor(100*h[w]),S=Math.floor(100*h[w+1]);"undefined"!==typeof h[w+1]?_>=x&&_<S-(S-x)/2?u=w:_>=x&&_<S&&(u=w+1):_>=x&&(u=w)}if(s.initialized&&u!==d){if(!s.allowSlideNext&&b<s.translate&&b<s.minTranslate())return!1;if(!s.allowSlidePrev&&b>s.translate&&b>s.maxTranslate()&&(d||0)!==u)return!1}if(u!==(f||0)&&n&&s.emit("beforeSlideChangeStart"),s.updateProgress(b),k=u>d?"next":u<d?"prev":"reset",p&&-b===s.translate||!p&&b===s.translate)return s.updateActiveIndex(u),l.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),"slide"!==l.effect&&s.setTranslate(b),"reset"!==k&&(s.transitionStart(n,k),s.transitionEnd(n,k)),!1;if(l.cssMode){var E=s.isHorizontal(),C=p?b:-b;if(0===t){var T=s.virtual&&s.params.virtual.enabled;T&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),v[E?"scrollLeft":"scrollTop"]=C,T&&requestAnimationFrame((function(){s.wrapperEl.style.scrollSnapType="",s._swiperImmediateVirtual=!1}))}else{var I;if(!s.support.smoothScroll)return mt({swiper:s,targetPosition:C,side:E?"left":"top"}),!0;v.scrollTo((ot(I={},E?"left":"top",C),ot(I,"behavior","smooth"),I))}return!0}return s.setTransition(t),s.setTranslate(b),s.updateActiveIndex(u),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,r),s.transitionStart(n,k),0===t?s.transitionEnd(n,k):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(n,k))}),s.$wrapperEl[0].addEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.speed,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0;if("string"===typeof e){var i=parseInt(e,10),a=isFinite(i);if(!a)throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. [".concat(e,"] given."));e=i}var o=this,s=e;return o.params.loop&&(s+=o.loopedSlides),o.slideTo(s,t,n,r)},slideNext:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this,i=r.animating,a=r.enabled,o=r.params;if(!a)return r;var s=o.slidesPerGroup;"auto"===o.slidesPerView&&1===o.slidesPerGroup&&o.slidesPerGroupAuto&&(s=Math.max(r.slidesPerViewDynamic("current",!0),1));var u=r.activeIndex<o.slidesPerGroupSkip?1:s;if(o.loop){if(i&&o.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}return o.rewind&&r.isEnd?r.slideTo(0,e,t,n):r.slideTo(r.activeIndex+u,e,t,n)},slidePrev:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this,i=r.params,a=r.animating,o=r.snapGrid,s=r.slidesGrid,u=r.rtlTranslate,l=r.enabled;if(!l)return r;if(i.loop){if(a&&i.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}var c=u?r.translate:-r.translate;function h(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var f,d=h(c),p=o.map((function(e){return h(e)})),v=o[p.indexOf(d)-1];"undefined"===typeof v&&i.cssMode&&(o.forEach((function(e,t){d>=e&&(f=t)})),"undefined"!==typeof f&&(v=o[f>0?f-1:f]));var m=0;if("undefined"!==typeof v&&((m=s.indexOf(v))<0&&(m=r.activeIndex-1),"auto"===i.slidesPerView&&1===i.slidesPerGroup&&i.slidesPerGroupAuto&&(m=m-r.slidesPerViewDynamic("previous",!0)+1,m=Math.max(m,0))),i.rewind&&r.isBeginning){var g=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(g,e,t,n)}return r.slideTo(m,e,t,n)},slideReset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this;return r.slideTo(r.activeIndex,e,t,n)},slideToClosest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=this,a=i.activeIndex,o=Math.min(i.params.slidesPerGroupSkip,a),s=o+Math.floor((a-o)/i.params.slidesPerGroup),u=i.rtlTranslate?i.translate:-i.translate;if(u>=i.snapGrid[s]){var l=i.snapGrid[s],c=i.snapGrid[s+1];u-l>(c-l)*r&&(a+=i.params.slidesPerGroup)}else{var h=i.snapGrid[s-1],f=i.snapGrid[s];u-h<=(f-h)*r&&(a-=i.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,i.slidesGrid.length-1),i.slideTo(a,e,t,n)},slideToClickedSlide:function(){var e,t=this,n=t.params,r=t.$wrapperEl,i="auto"===n.slidesPerView?t.slidesPerViewDynamic():n.slidesPerView,a=t.clickedIndex;if(n.loop){if(t.animating)return;e=parseInt(at(t.clickedSlide).attr("data-swiper-slide-index"),10),n.centeredSlides?a<t.loopedSlides-i/2||a>t.slides.length-t.loopedSlides+i/2?(t.loopFix(),a=r.children(".".concat(n.slideClass,'[data-swiper-slide-index="').concat(e,'"]:not(.').concat(n.slideDuplicateClass,")")).eq(0).index(),ut((function(){t.slideTo(a)}))):t.slideTo(a):a>t.slides.length-i?(t.loopFix(),a=r.children(".".concat(n.slideClass,'[data-swiper-slide-index="').concat(e,'"]:not(.').concat(n.slideDuplicateClass,")")).eq(0).index(),ut((function(){t.slideTo(a)}))):t.slideTo(a)}else t.slideTo(a)}};var Tt={loopCreate:function(){var e=this,t=Ge(),n=e.params,r=e.$wrapperEl,i=r.children().length>0?at(r.children()[0].parentNode):r;i.children(".".concat(n.slideClass,".").concat(n.slideDuplicateClass)).remove();var a=i.children(".".concat(n.slideClass));if(n.loopFillGroupWithBlank){var o=n.slidesPerGroup-a.length%n.slidesPerGroup;if(o!==n.slidesPerGroup){for(var s=0;s<o;s+=1){var u=at(t.createElement("div")).addClass("".concat(n.slideClass," ").concat(n.slideBlankClass));i.append(u)}a=i.children(".".concat(n.slideClass))}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=a.length),e.loopedSlides=Math.ceil(parseFloat(n.loopedSlides||n.slidesPerView,10)),e.loopedSlides+=n.loopAdditionalSlides,e.loopedSlides>a.length&&e.params.loopedSlidesLimit&&(e.loopedSlides=a.length);var l=[],c=[];a.each((function(e,t){at(e).attr("data-swiper-slide-index",t)}));for(var h=0;h<e.loopedSlides;h+=1){var f=h-Math.floor(h/a.length)*a.length;c.push(a.eq(f)[0]),l.unshift(a.eq(a.length-f-1)[0])}for(var d=0;d<c.length;d+=1)i.append(at(c[d].cloneNode(!0)).addClass(n.slideDuplicateClass));for(var p=l.length-1;p>=0;p-=1)i.prepend(at(l[p].cloneNode(!0)).addClass(n.slideDuplicateClass))},loopFix:function(){var e=this;e.emit("beforeLoopFix");var t,n=e.activeIndex,r=e.slides,i=e.loopedSlides,a=e.allowSlidePrev,o=e.allowSlideNext,s=e.snapGrid,u=e.rtlTranslate;e.allowSlidePrev=!0,e.allowSlideNext=!0;var l=-s[n]-e.getTranslate();if(n<i)t=r.length-3*i+n,t+=i,e.slideTo(t,0,!1,!0)&&0!==l&&e.setTranslate((u?-e.translate:e.translate)-l);else if(n>=r.length-i){t=-r.length+n+i,t+=i,e.slideTo(t,0,!1,!0)&&0!==l&&e.setTranslate((u?-e.translate:e.translate)-l)}e.allowSlidePrev=a,e.allowSlideNext=o,e.emit("loopFix")},loopDestroy:function(){var e=this,t=e.$wrapperEl,n=e.params,r=e.slides;t.children(".".concat(n.slideClass,".").concat(n.slideDuplicateClass,",.").concat(n.slideClass,".").concat(n.slideBlankClass)).remove(),r.removeAttr("data-swiper-slide-index")}};var It={setGrabCursor:function(e){var t=this;if(!(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)){var n="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;n.style.cursor="move",n.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){var e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="")}};function Nt(e){var t=this,n=Ge(),r=Qe(),i=t.touchEventsData,a=t.params,o=t.touches;if(t.enabled&&(!t.animating||!a.preventInteractionOnTransition)){!t.animating&&a.cssMode&&a.loop&&t.loopFix();var s=e;s.originalEvent&&(s=s.originalEvent);var u=at(s.target);if(("wrapper"!==a.touchEventsTarget||u.closest(t.wrapperEl).length)&&(i.isTouchEvent="touchstart"===s.type,(i.isTouchEvent||!("which"in s)||3!==s.which)&&!(!i.isTouchEvent&&"button"in s&&s.button>0)&&(!i.isTouched||!i.isMoved))){var l=!!a.noSwipingClass&&""!==a.noSwipingClass,c=e.composedPath?e.composedPath():e.path;l&&s.target&&s.target.shadowRoot&&c&&(u=at(c[0]));var h=a.noSwipingSelector?a.noSwipingSelector:".".concat(a.noSwipingClass),f=!(!s.target||!s.target.shadowRoot);if(a.noSwiping&&(f?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;function n(t){if(!t||t===Ge()||t===Qe())return null;t.assignedSlot&&(t=t.assignedSlot);var r=t.closest(e);return r||t.getRootNode?r||n(t.getRootNode().host):null}return n(t)}(h,u[0]):u.closest(h)[0]))t.allowClick=!0;else if(!a.swipeHandler||u.closest(a.swipeHandler)[0]){o.currentX="touchstart"===s.type?s.targetTouches[0].pageX:s.pageX,o.currentY="touchstart"===s.type?s.targetTouches[0].pageY:s.pageY;var d=o.currentX,p=o.currentY,v=a.edgeSwipeDetection||a.iOSEdgeSwipeDetection,m=a.edgeSwipeThreshold||a.iOSEdgeSwipeThreshold;if(v&&(d<=m||d>=r.innerWidth-m)){if("prevent"!==v)return;e.preventDefault()}if(Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=d,o.startY=p,i.touchStartTime=lt(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,a.threshold>0&&(i.allowThresholdMove=!1),"touchstart"!==s.type){var g=!0;u.is(i.focusableElements)&&(g=!1,"SELECT"===u[0].nodeName&&(i.isTouched=!1)),n.activeElement&&at(n.activeElement).is(i.focusableElements)&&n.activeElement!==u[0]&&n.activeElement.blur();var y=g&&t.allowTouchMove&&a.touchStartPreventDefault;!a.touchStartForcePreventDefault&&!y||u[0].isContentEditable||s.preventDefault()}t.params.freeMode&&t.params.freeMode.enabled&&t.freeMode&&t.animating&&!a.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",s)}}}}function Pt(e){var t=Ge(),n=this,r=n.touchEventsData,i=n.params,a=n.touches,o=n.rtlTranslate;if(n.enabled){var s=e;if(s.originalEvent&&(s=s.originalEvent),r.isTouched){if(!r.isTouchEvent||"touchmove"===s.type){var u="touchmove"===s.type&&s.targetTouches&&(s.targetTouches[0]||s.changedTouches[0]),l="touchmove"===s.type?u.pageX:s.pageX,c="touchmove"===s.type?u.pageY:s.pageY;if(s.preventedByNestedSwiper)return a.startX=l,void(a.startY=c);if(!n.allowTouchMove)return at(s.target).is(r.focusableElements)||(n.allowClick=!1),void(r.isTouched&&(Object.assign(a,{startX:l,startY:c,currentX:l,currentY:c}),r.touchStartTime=lt()));if(r.isTouchEvent&&i.touchReleaseOnEdges&&!i.loop)if(n.isVertical()){if(c<a.startY&&n.translate<=n.maxTranslate()||c>a.startY&&n.translate>=n.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(l<a.startX&&n.translate<=n.maxTranslate()||l>a.startX&&n.translate>=n.minTranslate())return;if(r.isTouchEvent&&t.activeElement&&s.target===t.activeElement&&at(s.target).is(r.focusableElements))return r.isMoved=!0,void(n.allowClick=!1);if(r.allowTouchCallbacks&&n.emit("touchMove",s),!(s.targetTouches&&s.targetTouches.length>1)){a.currentX=l,a.currentY=c;var h=a.currentX-a.startX,f=a.currentY-a.startY;if(!(n.params.threshold&&Math.sqrt(Math.pow(h,2)+Math.pow(f,2))<n.params.threshold)){var d;if("undefined"===typeof r.isScrolling)n.isHorizontal()&&a.currentY===a.startY||n.isVertical()&&a.currentX===a.startX?r.isScrolling=!1:h*h+f*f>=25&&(d=180*Math.atan2(Math.abs(f),Math.abs(h))/Math.PI,r.isScrolling=n.isHorizontal()?d>i.touchAngle:90-d>i.touchAngle);if(r.isScrolling&&n.emit("touchMoveOpposite",s),"undefined"===typeof r.startMoving&&(a.currentX===a.startX&&a.currentY===a.startY||(r.startMoving=!0)),r.isScrolling)r.isTouched=!1;else if(r.startMoving){n.allowClick=!1,!i.cssMode&&s.cancelable&&s.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&s.stopPropagation(),r.isMoved||(i.loop&&!i.cssMode&&n.loopFix(),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating&&n.$wrapperEl.trigger("webkitTransitionEnd transitionend"),r.allowMomentumBounce=!1,!i.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",s)),n.emit("sliderMove",s),r.isMoved=!0;var p=n.isHorizontal()?h:f;a.diff=p,p*=i.touchRatio,o&&(p=-p),n.swipeDirection=p>0?"prev":"next",r.currentTranslate=p+r.startTranslate;var v=!0,m=i.resistanceRatio;if(i.touchReleaseOnEdges&&(m=0),p>0&&r.currentTranslate>n.minTranslate()?(v=!1,i.resistance&&(r.currentTranslate=n.minTranslate()-1+Math.pow(-n.minTranslate()+r.startTranslate+p,m))):p<0&&r.currentTranslate<n.maxTranslate()&&(v=!1,i.resistance&&(r.currentTranslate=n.maxTranslate()+1-Math.pow(n.maxTranslate()-r.startTranslate-p,m))),v&&(s.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),n.allowSlidePrev||n.allowSlideNext||(r.currentTranslate=r.startTranslate),i.threshold>0){if(!(Math.abs(p)>i.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,a.startX=a.currentX,a.startY=a.currentY,r.currentTranslate=r.startTranslate,void(a.diff=n.isHorizontal()?a.currentX-a.startX:a.currentY-a.startY)}i.followFinger&&!i.cssMode&&((i.freeMode&&i.freeMode.enabled&&n.freeMode||i.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),n.params.freeMode&&i.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}}}}}else r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",s)}}function Rt(e){var t=this,n=t.touchEventsData,r=t.params,i=t.touches,a=t.rtlTranslate,o=t.slidesGrid;if(t.enabled){var s=e;if(s.originalEvent&&(s=s.originalEvent),n.allowTouchCallbacks&&t.emit("touchEnd",s),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&r.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);r.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var u,l=lt(),c=l-n.touchStartTime;if(t.allowClick){var h=s.path||s.composedPath&&s.composedPath();t.updateClickedSlide(h&&h[0]||s.target),t.emit("tap click",s),c<300&&l-n.lastClickTime<300&&t.emit("doubleTap doubleClick",s)}if(n.lastClickTime=lt(),ut((function(){t.destroyed||(t.allowClick=!0)})),!n.isTouched||!n.isMoved||!t.swipeDirection||0===i.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,u=r.followFinger?a?t.translate:-t.translate:-n.currentTranslate,!r.cssMode)if(t.params.freeMode&&r.freeMode.enabled)t.freeMode.onTouchEnd({currentPos:u});else{for(var f=0,d=t.slidesSizesGrid[0],p=0;p<o.length;p+=p<r.slidesPerGroupSkip?1:r.slidesPerGroup){var v=p<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;"undefined"!==typeof o[p+v]?u>=o[p]&&u<o[p+v]&&(f=p,d=o[p+v]-o[p]):u>=o[p]&&(f=p,d=o[o.length-1]-o[o.length-2])}var m=null,g=null;r.rewind&&(t.isBeginning?g=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(m=0));var y=(u-o[f])/d,k=f<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(c>r.longSwipesMs){if(!r.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(y>=r.longSwipesRatio?t.slideTo(r.rewind&&t.isEnd?m:f+k):t.slideTo(f)),"prev"===t.swipeDirection&&(y>1-r.longSwipesRatio?t.slideTo(f+k):null!==g&&y<0&&Math.abs(y)>r.longSwipesRatio?t.slideTo(g):t.slideTo(f))}else{if(!r.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(s.target===t.navigation.nextEl||s.target===t.navigation.prevEl)?s.target===t.navigation.nextEl?t.slideTo(f+k):t.slideTo(f):("next"===t.swipeDirection&&t.slideTo(null!==m?m:f+k),"prev"===t.swipeDirection&&t.slideTo(null!==g?g:f))}}}}function Ot(){var e=this,t=e.params,n=e.el;if(!n||0!==n.offsetWidth){t.breakpoints&&e.setBreakpoint();var r=e.allowSlideNext,i=e.allowSlidePrev,a=e.snapGrid;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=i,e.allowSlideNext=r,e.params.watchOverflow&&a!==e.snapGrid&&e.checkOverflow()}}function At(e){var t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function Dt(){var e=this,t=e.wrapperEl,n=e.rtlTranslate;if(e.enabled){e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();var r=e.maxTranslate()-e.minTranslate();(0===r?0:(e.translate-e.minTranslate())/r)!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}}var Lt=!1;function Mt(){}var Ft=function(e,t){var n=Ge(),r=e.params,i=e.touchEvents,a=e.el,o=e.wrapperEl,s=e.device,u=e.support,l=!!r.nested,c="on"===t?"addEventListener":"removeEventListener",h=t;if(u.touch){var f=!("touchstart"!==i.start||!u.passiveListener||!r.passiveListeners)&&{passive:!0,capture:!1};a[c](i.start,e.onTouchStart,f),a[c](i.move,e.onTouchMove,u.passiveListener?{passive:!1,capture:l}:l),a[c](i.end,e.onTouchEnd,f),i.cancel&&a[c](i.cancel,e.onTouchEnd,f)}else a[c](i.start,e.onTouchStart,!1),n[c](i.move,e.onTouchMove,l),n[c](i.end,e.onTouchEnd,!1);(r.preventClicks||r.preventClicksPropagation)&&a[c]("click",e.onClick,!0),r.cssMode&&o[c]("scroll",e.onScroll),r.updateOnWindowResize?e[h](s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",Ot,!0):e[h]("observerUpdate",Ot,!0)};var jt={attachEvents:function(){var e=this,t=Ge(),n=e.params,r=e.support;e.onTouchStart=Nt.bind(e),e.onTouchMove=Pt.bind(e),e.onTouchEnd=Rt.bind(e),n.cssMode&&(e.onScroll=Dt.bind(e)),e.onClick=At.bind(e),r.touch&&!Lt&&(t.addEventListener("touchstart",Mt),Lt=!0),Ft(e,"on")},detachEvents:function(){Ft(this,"off")}},Ut=function(e,t){return e.grid&&t.grid&&t.grid.rows>1};var Vt={setBreakpoint:function(){var e=this,t=e.activeIndex,n=e.initialized,r=e.loopedSlides,i=void 0===r?0:r,a=e.params,o=e.$el,s=a.breakpoints;if(s&&(!s||0!==Object.keys(s).length)){var u=e.getBreakpoint(s,e.params.breakpointsBase,e.el);if(u&&e.currentBreakpoint!==u){var l=(u in s?s[u]:void 0)||e.originalParams,c=Ut(e,a),h=Ut(e,l),f=a.enabled;c&&!h?(o.removeClass("".concat(a.containerModifierClass,"grid ").concat(a.containerModifierClass,"grid-column")),e.emitContainerClasses()):!c&&h&&(o.addClass("".concat(a.containerModifierClass,"grid")),(l.grid.fill&&"column"===l.grid.fill||!l.grid.fill&&"column"===a.grid.fill)&&o.addClass("".concat(a.containerModifierClass,"grid-column")),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach((function(t){var n=a[t]&&a[t].enabled,r=l[t]&&l[t].enabled;n&&!r&&e[t].disable(),!n&&r&&e[t].enable()}));var d=l.direction&&l.direction!==a.direction,p=a.loop&&(l.slidesPerView!==a.slidesPerView||d);d&&n&&e.changeDirection(),pt(e.params,l);var v=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),f&&!v?e.disable():!f&&v&&e.enable(),e.currentBreakpoint=u,e.emit("_beforeBreakpoint",l),p&&n&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-i+e.loopedSlides,0,!1)),e.emit("breakpoint",l)}}},getBreakpoint:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"window",n=arguments.length>2?arguments[2]:void 0;if(e&&("container"!==t||n)){var r=!1,i=Qe(),a="window"===t?i.innerHeight:n.clientHeight,o=Object.keys(e).map((function(e){if("string"===typeof e&&0===e.indexOf("@")){var t=parseFloat(e.substr(1));return{value:a*t,point:e}}return{value:e,point:e}}));o.sort((function(e,t){return parseInt(e.value,10)-parseInt(t.value,10)}));for(var s=0;s<o.length;s+=1){var u=o[s],l=u.point,c=u.value;"window"===t?i.matchMedia("(min-width: ".concat(c,"px)")).matches&&(r=l):c<=n.clientWidth&&(r=l)}return r||"max"}}};var zt={addClasses:function(){var e=this,t=e.classNames,n=e.params,r=e.rtl,i=e.$el,a=e.device,o=e.support,s=function(e,t){var n=[];return e.forEach((function(e){"object"===typeof e?Object.keys(e).forEach((function(r){e[r]&&n.push(t+r)})):"string"===typeof e&&n.push(t+e)})),n}(["initialized",n.direction,{"pointer-events":!o.touch},{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:r},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&"column"===n.grid.fill},{android:a.android},{ios:a.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push.apply(t,l(s)),i.addClass(l(t).join(" ")),e.emitContainerClasses()},removeClasses:function(){var e=this,t=e.$el,n=e.classNames;t.removeClass(n.join(" ")),e.emitContainerClasses()}};var qt={loadImage:function(e,t,n,r,i,a){var o,s=Qe();function u(){a&&a()}at(e).parent("picture")[0]||e.complete&&i?u():t?((o=new s.Image).onload=u,o.onerror=u,r&&(o.sizes=r),n&&(o.srcset=n),t&&(o.src=t)):u()},preloadImages:function(){var e=this;function t(){"undefined"!==typeof e&&null!==e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var n=0;n<e.imagesToLoad.length;n+=1){var r=e.imagesToLoad[n];e.loadImage(r,r.currentSrc||r.getAttribute("src"),r.srcset||r.getAttribute("srcset"),r.sizes||r.getAttribute("sizes"),!0,t)}}};var Bt={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function Ht(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Object.keys(n)[0],i=n[r];"object"===typeof i&&null!==i?(["navigation","pagination","scrollbar"].indexOf(r)>=0&&!0===e[r]&&(e[r]={auto:!0}),r in e&&"enabled"in i?(!0===e[r]&&(e[r]={enabled:!0}),"object"!==typeof e[r]||"enabled"in e[r]||(e[r].enabled=!0),e[r]||(e[r]={enabled:!1}),pt(t,n)):pt(t,n)):pt(t,n)}}var Wt={eventsEmitter:wt,update:_t,translate:xt,transition:Et,slide:Ct,loop:Tt,grabCursor:It,events:jt,breakpoints:Vt,checkOverflow:{checkOverflow:function(){var e=this,t=e.isLocked,n=e.params,r=n.slidesOffsetBefore;if(r){var i=e.slides.length-1,a=e.slidesGrid[i]+e.slidesSizesGrid[i]+2*r;e.isLocked=e.size>a}else e.isLocked=1===e.snapGrid.length;!0===n.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===n.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},classes:zt,images:qt},Gt={},Kt=function(){function e(){var t,n;c(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];if(1===i.length&&i[0].constructor&&"Object"===Object.prototype.toString.call(i[0]).slice(8,-1)?n=i[0]:(t=i[0],n=i[1]),n||(n={}),n=pt({},n),t&&!n.el&&(n.el=t),n.el&&at(n.el).length>1){var o=[];return at(n.el).each((function(t){var r=pt({},n,{el:t});o.push(new e(r))})),o}var s,u=this;(u.__swiper__=!0,u.support=gt(),u.device=kt({userAgent:n.userAgent}),u.browser=bt(),u.eventsListeners={},u.eventsAnyListeners=[],u.modules=l(u.__modules__),n.modules&&Array.isArray(n.modules))&&(s=u.modules).push.apply(s,l(n.modules));var h={};u.modules.forEach((function(e){e({swiper:u,extendParams:Ht(n,h),on:u.on.bind(u),once:u.once.bind(u),off:u.off.bind(u),emit:u.emit.bind(u)})}));var f=pt({},Bt,h);return u.params=pt({},f,Gt,n),u.originalParams=pt({},u.params),u.passedParams=pt({},n),u.params&&u.params.on&&Object.keys(u.params.on).forEach((function(e){u.on(e,u.params.on[e])})),u.params&&u.params.onAny&&u.onAny(u.params.onAny),u.$=at,Object.assign(u,{enabled:u.params.enabled,el:t,classNames:[],slides:at(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===u.params.direction},isVertical:function(){return"vertical"===u.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:u.params.allowSlideNext,allowSlidePrev:u.params.allowSlidePrev,touchEvents:function(){var e=["touchstart","touchmove","touchend","touchcancel"],t=["pointerdown","pointermove","pointerup"];return u.touchEventsTouch={start:e[0],move:e[1],end:e[2],cancel:e[3]},u.touchEventsDesktop={start:t[0],move:t[1],end:t[2]},u.support.touch||!u.params.simulateTouch?u.touchEventsTouch:u.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:u.params.focusableElements,lastClickTime:lt(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:u.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),u.emit("_swiper"),u.params.init&&u.init(),u}return p(e,[{key:"enable",value:function(){var e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}},{key:"disable",value:function(){var e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}},{key:"setProgress",value:function(e,t){var n=this;e=Math.min(Math.max(e,0),1);var r=n.minTranslate(),i=(n.maxTranslate()-r)*e+r;n.translateTo(i,"undefined"===typeof t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}},{key:"emitContainerClasses",value:function(){var e=this;if(e.params._emitClasses&&e.el){var t=e.el.className.split(" ").filter((function(t){return 0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass)}));e.emit("_containerClasses",t.join(" "))}}},{key:"getSlideClasses",value:function(e){var t=this;return t.destroyed?"":e.className.split(" ").filter((function(e){return 0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)})).join(" ")}},{key:"emitSlidesClasses",value:function(){var e=this;if(e.params._emitClasses&&e.el){var t=[];e.slides.each((function(n){var r=e.getSlideClasses(n);t.push({slideEl:n,classNames:r}),e.emit("_slideClass",n,r)})),e.emit("_slideClasses",t)}}},{key:"slidesPerViewDynamic",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"current",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,r=n.params,i=n.slides,a=n.slidesGrid,o=n.slidesSizesGrid,s=n.size,u=n.activeIndex,l=1;if(r.centeredSlides){for(var c,h=i[u].swiperSlideSize,f=u+1;f<i.length;f+=1)i[f]&&!c&&(l+=1,(h+=i[f].swiperSlideSize)>s&&(c=!0));for(var d=u-1;d>=0;d-=1)i[d]&&!c&&(l+=1,(h+=i[d].swiperSlideSize)>s&&(c=!0))}else if("current"===e)for(var p=u+1;p<i.length;p+=1){var v=t?a[p]+o[p]-a[u]<s:a[p]-a[u]<s;v&&(l+=1)}else for(var m=u-1;m>=0;m-=1){var g=a[u]-a[m]<s;g&&(l+=1)}return l}},{key:"update",value:function(){var e=this;if(e&&!e.destroyed){var t=e.snapGrid,n=e.params;n.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode&&e.params.freeMode.enabled?(r(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||r(),n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}function r(){var t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}}},{key:"changeDirection",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,r=n.params.direction;return e||(e="horizontal"===r?"vertical":"horizontal"),e===r||"horizontal"!==e&&"vertical"!==e||(n.$el.removeClass("".concat(n.params.containerModifierClass).concat(r)).addClass("".concat(n.params.containerModifierClass).concat(e)),n.emitContainerClasses(),n.params.direction=e,n.slides.each((function(t){"vertical"===e?t.style.width="":t.style.height=""})),n.emit("changeDirection"),t&&n.update()),n}},{key:"changeLanguageDirection",value:function(e){var t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.$el.addClass("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="rtl"):(t.$el.removeClass("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="ltr"),t.update())}},{key:"mount",value:function(e){var t=this;if(t.mounted)return!0;var n=at(e||t.params.el);if(!(e=n[0]))return!1;e.swiper=t;var r=function(){return".".concat((t.params.wrapperClass||"").trim().split(" ").join("."))},i=function(){if(e&&e.shadowRoot&&e.shadowRoot.querySelector){var t=at(e.shadowRoot.querySelector(r()));return t.children=function(e){return n.children(e)},t}return n.children?n.children(r()):at(n).children(r())}();if(0===i.length&&t.params.createElements){var a=Ge().createElement("div");i=at(a),a.className=t.params.wrapperClass,n.append(a),n.children(".".concat(t.params.slideClass)).each((function(e){i.append(e)}))}return Object.assign(t,{$el:n,el:e,$wrapperEl:i,wrapperEl:i[0],mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction")),wrongRTL:"-webkit-box"===i.css("display")}),!0}},{key:"init",value:function(e){var t=this;return t.initialized||!1===t.mount(e)||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.params.loop&&t.loopCreate(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.preloadImages&&t.preloadImages(),t.params.loop?t.slideTo(t.params.initialSlide+t.loopedSlides,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.attachEvents(),t.initialized=!0,t.emit("init"),t.emit("afterInit")),t}},{key:"destroy",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,r=n.params,i=n.$el,a=n.$wrapperEl,o=n.slides;return"undefined"===typeof n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),r.loop&&n.loopDestroy(),t&&(n.removeClasses(),i.removeAttr("style"),a.removeAttr("style"),o&&o.length&&o.removeClass([r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach((function(e){n.off(e)})),!1!==e&&(n.$el[0].swiper=null,st(n)),n.destroyed=!0),null}}],[{key:"extendDefaults",value:function(e){pt(Gt,e)}},{key:"extendedDefaults",get:function(){return Gt}},{key:"defaults",get:function(){return Bt}},{key:"installModule",value:function(t){e.prototype.__modules__||(e.prototype.__modules__=[]);var n=e.prototype.__modules__;"function"===typeof t&&n.indexOf(t)<0&&n.push(t)}},{key:"use",value:function(t){return Array.isArray(t)?(t.forEach((function(t){return e.installModule(t)})),e):(e.installModule(t),e)}}]),e}();Object.keys(Wt).forEach((function(e){Object.keys(Wt[e]).forEach((function(t){Kt.prototype[t]=Wt[e][t]}))})),Kt.use([function(e){var t=e.swiper,n=e.on,r=e.emit,i=Qe(),a=null,o=null,s=function(){t&&!t.destroyed&&t.initialized&&(r("beforeResize"),r("resize"))},u=function(){t&&!t.destroyed&&t.initialized&&r("orientationchange")};n("init",(function(){t.params.resizeObserver&&"undefined"!==typeof i.ResizeObserver?t&&!t.destroyed&&t.initialized&&(a=new ResizeObserver((function(e){o=i.requestAnimationFrame((function(){var n=t.width,r=t.height,i=n,a=r;e.forEach((function(e){var n=e.contentBoxSize,r=e.contentRect,o=e.target;o&&o!==t.el||(i=r?r.width:(n[0]||n).inlineSize,a=r?r.height:(n[0]||n).blockSize)})),i===n&&a===r||s()}))})),a.observe(t.el)):(i.addEventListener("resize",s),i.addEventListener("orientationchange",u))})),n("destroy",(function(){o&&i.cancelAnimationFrame(o),a&&a.unobserve&&t.el&&(a.unobserve(t.el),a=null),i.removeEventListener("resize",s),i.removeEventListener("orientationchange",u)}))},function(e){var t=e.swiper,n=e.extendParams,r=e.on,i=e.emit,a=[],o=Qe(),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.MutationObserver||o.WebkitMutationObserver,r=new n((function(e){if(1!==e.length){var t=function(){i("observerUpdate",e[0])};o.requestAnimationFrame?o.requestAnimationFrame(t):o.setTimeout(t,0)}else i("observerUpdate",e[0])}));r.observe(e,{attributes:"undefined"===typeof t.attributes||t.attributes,childList:"undefined"===typeof t.childList||t.childList,characterData:"undefined"===typeof t.characterData||t.characterData}),a.push(r)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",(function(){if(t.params.observer){if(t.params.observeParents)for(var e=t.$el.parents(),n=0;n<e.length;n+=1)s(e[n]);s(t.$el[0],{childList:t.params.observeSlideChildren}),s(t.$wrapperEl[0],{attributes:!1})}})),r("destroy",(function(){a.forEach((function(e){e.disconnect()})),a.splice(0,a.length)}))}]);var Qt=Kt;function $t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return".".concat(e.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,"."))}function Yt(e){var t,n=e.swiper,r=e.extendParams,i=e.on,a=e.emit,o="swiper-pagination";r({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"".concat(o,"-bullet"),bulletActiveClass:"".concat(o,"-bullet-active"),modifierClass:"".concat(o,"-"),currentClass:"".concat(o,"-current"),totalClass:"".concat(o,"-total"),hiddenClass:"".concat(o,"-hidden"),progressbarFillClass:"".concat(o,"-progressbar-fill"),progressbarOppositeClass:"".concat(o,"-progressbar-opposite"),clickableClass:"".concat(o,"-clickable"),lockClass:"".concat(o,"-lock"),horizontalClass:"".concat(o,"-horizontal"),verticalClass:"".concat(o,"-vertical"),paginationDisabledClass:"".concat(o,"-disabled")}}),n.pagination={el:null,$el:null,bullets:[]};var s=0;function u(){return!n.params.pagination.el||!n.pagination.el||!n.pagination.$el||0===n.pagination.$el.length}function l(e,t){var r=n.params.pagination.bulletActiveClass;e[t]().addClass("".concat(r,"-").concat(t))[t]().addClass("".concat(r,"-").concat(t,"-").concat(t))}function c(){var e=n.rtl,r=n.params.pagination;if(!u()){var i,o=n.virtual&&n.params.virtual.enabled?n.virtual.slides.length:n.slides.length,c=n.pagination.$el,h=n.params.loop?Math.ceil((o-2*n.loopedSlides)/n.params.slidesPerGroup):n.snapGrid.length;if(n.params.loop?((i=Math.ceil((n.activeIndex-n.loopedSlides)/n.params.slidesPerGroup))>o-1-2*n.loopedSlides&&(i-=o-2*n.loopedSlides),i>h-1&&(i-=h),i<0&&"bullets"!==n.params.paginationType&&(i=h+i)):i="undefined"!==typeof n.snapIndex?n.snapIndex:n.activeIndex||0,"bullets"===r.type&&n.pagination.bullets&&n.pagination.bullets.length>0){var f,d,p,v=n.pagination.bullets;if(r.dynamicBullets&&(t=v.eq(0)[n.isHorizontal()?"outerWidth":"outerHeight"](!0),c.css(n.isHorizontal()?"width":"height","".concat(t*(r.dynamicMainBullets+4),"px")),r.dynamicMainBullets>1&&void 0!==n.previousIndex&&((s+=i-(n.previousIndex-n.loopedSlides||0))>r.dynamicMainBullets-1?s=r.dynamicMainBullets-1:s<0&&(s=0)),f=Math.max(i-s,0),p=((d=f+(Math.min(v.length,r.dynamicMainBullets)-1))+f)/2),v.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map((function(e){return"".concat(r.bulletActiveClass).concat(e)})).join(" ")),c.length>1)v.each((function(e){var t=at(e),n=t.index();n===i&&t.addClass(r.bulletActiveClass),r.dynamicBullets&&(n>=f&&n<=d&&t.addClass("".concat(r.bulletActiveClass,"-main")),n===f&&l(t,"prev"),n===d&&l(t,"next"))}));else{var m=v.eq(i),g=m.index();if(m.addClass(r.bulletActiveClass),r.dynamicBullets){for(var y=v.eq(f),k=v.eq(d),b=f;b<=d;b+=1)v.eq(b).addClass("".concat(r.bulletActiveClass,"-main"));if(n.params.loop)if(g>=v.length){for(var w=r.dynamicMainBullets;w>=0;w-=1)v.eq(v.length-w).addClass("".concat(r.bulletActiveClass,"-main"));v.eq(v.length-r.dynamicMainBullets-1).addClass("".concat(r.bulletActiveClass,"-prev"))}else l(y,"prev"),l(k,"next");else l(y,"prev"),l(k,"next")}}if(r.dynamicBullets){var _=Math.min(v.length,r.dynamicMainBullets+4),x=(t*_-t)/2-p*t,S=e?"right":"left";v.css(n.isHorizontal()?S:"top","".concat(x,"px"))}}if("fraction"===r.type&&(c.find($t(r.currentClass)).text(r.formatFractionCurrent(i+1)),c.find($t(r.totalClass)).text(r.formatFractionTotal(h))),"progressbar"===r.type){var E;E=r.progressbarOpposite?n.isHorizontal()?"vertical":"horizontal":n.isHorizontal()?"horizontal":"vertical";var C=(i+1)/h,T=1,I=1;"horizontal"===E?T=C:I=C,c.find($t(r.progressbarFillClass)).transform("translate3d(0,0,0) scaleX(".concat(T,") scaleY(").concat(I,")")).transition(n.params.speed)}"custom"===r.type&&r.renderCustom?(c.html(r.renderCustom(n,i+1,h)),a("paginationRender",c[0])):a("paginationUpdate",c[0]),n.params.watchOverflow&&n.enabled&&c[n.isLocked?"addClass":"removeClass"](r.lockClass)}}function h(){var e=n.params.pagination;if(!u()){var t=n.virtual&&n.params.virtual.enabled?n.virtual.slides.length:n.slides.length,r=n.pagination.$el,i="";if("bullets"===e.type){var o=n.params.loop?Math.ceil((t-2*n.loopedSlides)/n.params.slidesPerGroup):n.snapGrid.length;n.params.freeMode&&n.params.freeMode.enabled&&!n.params.loop&&o>t&&(o=t);for(var s=0;s<o;s+=1)e.renderBullet?i+=e.renderBullet.call(n,s,e.bulletClass):i+="<".concat(e.bulletElement,' class="').concat(e.bulletClass,'"></').concat(e.bulletElement,">");r.html(i),n.pagination.bullets=r.find($t(e.bulletClass))}"fraction"===e.type&&(i=e.renderFraction?e.renderFraction.call(n,e.currentClass,e.totalClass):'<span class="'.concat(e.currentClass,'"></span>')+" / "+'<span class="'.concat(e.totalClass,'"></span>'),r.html(i)),"progressbar"===e.type&&(i=e.renderProgressbar?e.renderProgressbar.call(n,e.progressbarFillClass):'<span class="'.concat(e.progressbarFillClass,'"></span>'),r.html(i)),"custom"!==e.type&&a("paginationRender",n.pagination.$el[0])}}function f(){n.params.pagination=function(e,t,n,r){var i=Ge();return e.params.createElements&&Object.keys(r).forEach((function(a){if(!n[a]&&!0===n.auto){var o=e.$el.children(".".concat(r[a]))[0];o||((o=i.createElement("div")).className=r[a],e.$el.append(o)),n[a]=o,t[a]=o}})),n}(n,n.originalParams.pagination,n.params.pagination,{el:"swiper-pagination"});var e=n.params.pagination;if(e.el){var t=at(e.el);0!==t.length&&(n.params.uniqueNavElements&&"string"===typeof e.el&&t.length>1&&(t=n.$el.find(e.el)).length>1&&(t=t.filter((function(e){return at(e).parents(".swiper")[0]===n.el}))),"bullets"===e.type&&e.clickable&&t.addClass(e.clickableClass),t.addClass(e.modifierClass+e.type),t.addClass(n.isHorizontal()?e.horizontalClass:e.verticalClass),"bullets"===e.type&&e.dynamicBullets&&(t.addClass("".concat(e.modifierClass).concat(e.type,"-dynamic")),s=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),"progressbar"===e.type&&e.progressbarOpposite&&t.addClass(e.progressbarOppositeClass),e.clickable&&t.on("click",$t(e.bulletClass),(function(e){e.preventDefault();var t=at(this).index()*n.params.slidesPerGroup;n.params.loop&&(t+=n.loopedSlides),n.slideTo(t)})),Object.assign(n.pagination,{$el:t,el:t[0]}),n.enabled||t.addClass(e.lockClass))}}function d(){var e=n.params.pagination;if(!u()){var t=n.pagination.$el;t.removeClass(e.hiddenClass),t.removeClass(e.modifierClass+e.type),t.removeClass(n.isHorizontal()?e.horizontalClass:e.verticalClass),n.pagination.bullets&&n.pagination.bullets.removeClass&&n.pagination.bullets.removeClass(e.bulletActiveClass),e.clickable&&t.off("click",$t(e.bulletClass))}}i("init",(function(){!1===n.params.pagination.enabled?p():(f(),h(),c())})),i("activeIndexChange",(function(){(n.params.loop||"undefined"===typeof n.snapIndex)&&c()})),i("snapIndexChange",(function(){n.params.loop||c()})),i("slidesLengthChange",(function(){n.params.loop&&(h(),c())})),i("snapGridLengthChange",(function(){n.params.loop||(h(),c())})),i("destroy",(function(){d()})),i("enable disable",(function(){var e=n.pagination.$el;e&&e[n.enabled?"removeClass":"addClass"](n.params.pagination.lockClass)})),i("lock unlock",(function(){c()})),i("click",(function(e,t){var r=t.target,i=n.pagination.$el;if(n.params.pagination.el&&n.params.pagination.hideOnClick&&i&&i.length>0&&!at(r).hasClass(n.params.pagination.bulletClass)){if(n.navigation&&(n.navigation.nextEl&&r===n.navigation.nextEl||n.navigation.prevEl&&r===n.navigation.prevEl))return;var o=i.hasClass(n.params.pagination.hiddenClass);a(!0===o?"paginationShow":"paginationHide"),i.toggleClass(n.params.pagination.hiddenClass)}}));var p=function(){n.$el.addClass(n.params.pagination.paginationDisabledClass),n.pagination.$el&&n.pagination.$el.addClass(n.params.pagination.paginationDisabledClass),d()};Object.assign(n.pagination,{enable:function(){n.$el.removeClass(n.params.pagination.paginationDisabledClass),n.pagination.$el&&n.pagination.$el.removeClass(n.params.pagination.paginationDisabledClass),f(),h(),c()},disable:p,render:h,update:c,init:f,destroy:d})}function Xt(e){var t,n=e.swiper,r=e.extendParams,i=e.on,a=e.emit;function o(){if(!n.size)return n.autoplay.running=!1,void(n.autoplay.paused=!1);var e=n.slides.eq(n.activeIndex),r=n.params.autoplay.delay;e.attr("data-swiper-autoplay")&&(r=e.attr("data-swiper-autoplay")||n.params.autoplay.delay),clearTimeout(t),t=ut((function(){var e;n.params.autoplay.reverseDirection?n.params.loop?(n.loopFix(),e=n.slidePrev(n.params.speed,!0,!0),a("autoplay")):n.isBeginning?n.params.autoplay.stopOnLastSlide?u():(e=n.slideTo(n.slides.length-1,n.params.speed,!0,!0),a("autoplay")):(e=n.slidePrev(n.params.speed,!0,!0),a("autoplay")):n.params.loop?(n.loopFix(),e=n.slideNext(n.params.speed,!0,!0),a("autoplay")):n.isEnd?n.params.autoplay.stopOnLastSlide?u():(e=n.slideTo(0,n.params.speed,!0,!0),a("autoplay")):(e=n.slideNext(n.params.speed,!0,!0),a("autoplay")),(n.params.cssMode&&n.autoplay.running||!1===e)&&o()}),r)}function s(){return"undefined"===typeof t&&(!n.autoplay.running&&(n.autoplay.running=!0,a("autoplayStart"),o(),!0))}function u(){return!!n.autoplay.running&&("undefined"!==typeof t&&(t&&(clearTimeout(t),t=void 0),n.autoplay.running=!1,a("autoplayStop"),!0))}function l(e){n.autoplay.running&&(n.autoplay.paused||(t&&clearTimeout(t),n.autoplay.paused=!0,0!==e&&n.params.autoplay.waitForTransition?["transitionend","webkitTransitionEnd"].forEach((function(e){n.$wrapperEl[0].addEventListener(e,h)})):(n.autoplay.paused=!1,o())))}function c(){var e=Ge();"hidden"===e.visibilityState&&n.autoplay.running&&l(),"visible"===e.visibilityState&&n.autoplay.paused&&(o(),n.autoplay.paused=!1)}function h(e){n&&!n.destroyed&&n.$wrapperEl&&e.target===n.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach((function(e){n.$wrapperEl[0].removeEventListener(e,h)})),n.autoplay.paused=!1,n.autoplay.running?o():u())}function f(){n.params.autoplay.disableOnInteraction?u():(a("autoplayPause"),l()),["transitionend","webkitTransitionEnd"].forEach((function(e){n.$wrapperEl[0].removeEventListener(e,h)}))}function d(){n.params.autoplay.disableOnInteraction||(n.autoplay.paused=!1,a("autoplayResume"),o())}n.autoplay={running:!1,paused:!1},r({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}}),i("init",(function(){n.params.autoplay.enabled&&(s(),Ge().addEventListener("visibilitychange",c),n.params.autoplay.pauseOnMouseEnter&&(n.$el.on("mouseenter",f),n.$el.on("mouseleave",d)))})),i("beforeTransitionStart",(function(e,t,r){n.autoplay.running&&(r||!n.params.autoplay.disableOnInteraction?n.autoplay.pause(t):u())})),i("sliderFirstMove",(function(){n.autoplay.running&&(n.params.autoplay.disableOnInteraction?u():l())})),i("touchEnd",(function(){n.params.cssMode&&n.autoplay.paused&&!n.params.autoplay.disableOnInteraction&&o()})),i("destroy",(function(){n.$el.off("mouseenter",f),n.$el.off("mouseleave",d),n.autoplay.running&&u(),Ge().removeEventListener("visibilitychange",c)})),Object.assign(n.autoplay,{pause:l,run:o,start:s,stop:u})}function Jt(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function Zt(e,t){var n=["__proto__","constructor","prototype"];Object.keys(t).filter((function(e){return n.indexOf(e)<0})).forEach((function(n){"undefined"===typeof e[n]?e[n]=t[n]:Jt(t[n])&&Jt(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:Zt(e[n],t[n]):e[n]=t[n]}))}function en(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.navigation&&"undefined"===typeof e.navigation.nextEl&&"undefined"===typeof e.navigation.prevEl}function tn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.pagination&&"undefined"===typeof e.pagination.el}function nn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.scrollbar&&"undefined"===typeof e.scrollbar.el}function rn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split(" ").map((function(e){return e.trim()})).filter((function(e){return!!e})),n=[];return t.forEach((function(e){n.indexOf(e)<0&&n.push(e)})),n.join(" ")}var an=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];var on=function(e,t){var n=t.slidesPerView;if(t.breakpoints){var r=Qt.prototype.getBreakpoint(t.breakpoints),i=r in t.breakpoints?t.breakpoints[r]:void 0;i&&i.slidesPerView&&(n=i.slidesPerView)}var a=Math.ceil(parseFloat(t.loopedSlides||n,10));return(a+=t.loopAdditionalSlides)>e.length&&t.loopedSlidesLimit&&(a=e.length),a};function sn(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function un(e){var n=[];return t.Children.toArray(e).forEach((function(e){sn(e)?n.push(e):e.props&&e.props.children&&un(e.props.children).forEach((function(e){return n.push(e)}))})),n}function ln(e){var n=[],r={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return t.Children.toArray(e).forEach((function(e){if(sn(e))n.push(e);else if(e.props&&e.props.slot&&r[e.props.slot])r[e.props.slot].push(e);else if(e.props&&e.props.children){var t=un(e.props.children);t.length>0?t.forEach((function(e){return n.push(e)})):r["container-end"].push(e)}else r["container-end"].push(e)})),{slides:n,slots:r}}function cn(e){var t,n,r,i,a,o=e.swiper,s=e.slides,u=e.passedParams,l=e.changedParams,c=e.nextEl,h=e.prevEl,f=e.scrollbarEl,d=e.paginationEl,p=l.filter((function(e){return"children"!==e&&"direction"!==e})),v=o.params,m=o.pagination,g=o.navigation,y=o.scrollbar,k=o.virtual,b=o.thumbs;l.includes("thumbs")&&u.thumbs&&u.thumbs.swiper&&v.thumbs&&!v.thumbs.swiper&&(t=!0),l.includes("controller")&&u.controller&&u.controller.control&&v.controller&&!v.controller.control&&(n=!0),l.includes("pagination")&&u.pagination&&(u.pagination.el||d)&&(v.pagination||!1===v.pagination)&&m&&!m.el&&(r=!0),l.includes("scrollbar")&&u.scrollbar&&(u.scrollbar.el||f)&&(v.scrollbar||!1===v.scrollbar)&&y&&!y.el&&(i=!0),l.includes("navigation")&&u.navigation&&(u.navigation.prevEl||h)&&(u.navigation.nextEl||c)&&(v.navigation||!1===v.navigation)&&g&&!g.prevEl&&!g.nextEl&&(a=!0);(p.forEach((function(e){if(Jt(v[e])&&Jt(u[e]))Zt(v[e],u[e]);else{var t=u[e];!0!==t&&!1!==t||"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e?v[e]=u[e]:!1===t&&o[n=e]&&(o[n].destroy(),"navigation"===n?(v[n].prevEl=void 0,v[n].nextEl=void 0,o[n].prevEl=void 0,o[n].nextEl=void 0):(v[n].el=void 0,o[n].el=void 0))}var n})),p.includes("controller")&&!n&&o.controller&&o.controller.control&&v.controller&&v.controller.control&&(o.controller.control=v.controller.control),l.includes("children")&&s&&k&&v.virtual.enabled?(k.slides=s,k.update(!0)):l.includes("children")&&o.lazy&&o.params.lazy.enabled&&o.lazy.load(),t)&&(b.init()&&b.update(!0));n&&(o.controller.control=v.controller.control),r&&(d&&(v.pagination.el=d),m.init(),m.render(),m.update()),i&&(f&&(v.scrollbar.el=f),y.init(),y.updateSize(),y.setTranslate()),a&&(c&&(v.navigation.nextEl=c),h&&(v.navigation.prevEl=h),g.init(),g.update()),l.includes("allowSlideNext")&&(o.allowSlideNext=u.allowSlideNext),l.includes("allowSlidePrev")&&(o.allowSlidePrev=u.allowSlidePrev),l.includes("direction")&&o.changeDirection(u.direction,!1),o.update()}function hn(e,n){return"undefined"===typeof window?(0,t.useEffect)(e,n):(0,t.useLayoutEffect)(e,n)}var fn=(0,t.createContext)(null),dn=(0,t.createContext)(null),pn=["className","tag","wrapperTag","children","onSwiper"];function vn(){return vn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vn.apply(this,arguments)}var mn=(0,t.forwardRef)((function(e,n){var r=void 0===e?{}:e,i=r.className,a=r.tag,o=void 0===a?"div":a,s=r.wrapperTag,c=void 0===s?"div":s,h=r.children,f=r.onSwiper,d=qe(r,pn),p=!1,v=u((0,t.useState)("swiper"),2),m=v[0],g=v[1],y=u((0,t.useState)(null),2),k=y[0],b=y[1],w=u((0,t.useState)(!1),2),_=w[0],x=w[1],S=(0,t.useRef)(!1),E=(0,t.useRef)(null),C=(0,t.useRef)(null),T=(0,t.useRef)(null),I=(0,t.useRef)(null),N=(0,t.useRef)(null),P=(0,t.useRef)(null),R=(0,t.useRef)(null),O=(0,t.useRef)(null),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={on:{}},r={},i={};Zt(n,Qt.defaults),Zt(n,Qt.extendedDefaults),n._emitClasses=!0,n.init=!1;var a={},o=an.map((function(e){return e.replace(/_/,"")})),s=Object.assign({},e);return Object.keys(s).forEach((function(s){"undefined"!==typeof e[s]&&(o.indexOf(s)>=0?Jt(e[s])?(n[s]={},i[s]={},Zt(n[s],e[s]),Zt(i[s],e[s])):(n[s]=e[s],i[s]=e[s]):0===s.search(/on[A-Z]/)&&"function"===typeof e[s]?t?r["".concat(s[2].toLowerCase()).concat(s.substr(3))]=e[s]:n.on["".concat(s[2].toLowerCase()).concat(s.substr(3))]=e[s]:a[s]=e[s])})),["navigation","pagination","scrollbar"].forEach((function(e){!0===n[e]&&(n[e]={}),!1===n[e]&&delete n[e]})),{params:n,passedParams:i,rest:a,events:r}}(d),D=A.params,L=A.passedParams,M=A.rest,F=A.events,j=ln(h),U=j.slides,V=j.slots,z=function(){x(!_)};Object.assign(D.on,{_containerClasses:function(e,t){g(t)}});var q=function(){if(Object.assign(D.on,F),p=!0,C.current=new Qt(D),C.current.loopCreate=function(){},C.current.loopDestroy=function(){},D.loop&&(C.current.loopedSlides=on(U,D)),C.current.virtual&&C.current.params.virtual.enabled){C.current.virtual.slides=U;var e={cache:!1,slides:U,renderExternal:b,renderExternalUpdate:!1};Zt(C.current.params.virtual,e),Zt(C.current.originalParams.virtual,e)}};E.current||q(),C.current&&C.current.on("_beforeBreakpoint",z);return(0,t.useEffect)((function(){return function(){C.current&&C.current.off("_beforeBreakpoint",z)}})),(0,t.useEffect)((function(){!S.current&&C.current&&(C.current.emitSlidesClasses(),S.current=!0)})),hn((function(){if(n&&(n.current=E.current),E.current)return C.current.destroyed&&q(),function(e,t){var n=e.el,r=e.nextEl,i=e.prevEl,a=e.paginationEl,o=e.scrollbarEl,s=e.swiper;en(t)&&r&&i&&(s.params.navigation.nextEl=r,s.originalParams.navigation.nextEl=r,s.params.navigation.prevEl=i,s.originalParams.navigation.prevEl=i),tn(t)&&a&&(s.params.pagination.el=a,s.originalParams.pagination.el=a),nn(t)&&o&&(s.params.scrollbar.el=o,s.originalParams.scrollbar.el=o),s.init(n)}({el:E.current,nextEl:N.current,prevEl:P.current,paginationEl:R.current,scrollbarEl:O.current,swiper:C.current},D),f&&f(C.current),function(){C.current&&!C.current.destroyed&&C.current.destroy(!0,!1)}}),[]),hn((function(){!p&&F&&C.current&&Object.keys(F).forEach((function(e){C.current.on(e,F[e])}));var e=function(e,t,n,r,i){var a=[];if(!t)return a;var o=function(e){a.indexOf(e)<0&&a.push(e)};if(n&&r){var s=r.map(i),u=n.map(i);s.join("")!==u.join("")&&o("children"),r.length!==n.length&&o("children")}return an.filter((function(e){return"_"===e[0]})).map((function(e){return e.replace(/_/,"")})).forEach((function(n){if(n in e&&n in t)if(Jt(e[n])&&Jt(t[n])){var r=Object.keys(e[n]),i=Object.keys(t[n]);r.length!==i.length?o(n):(r.forEach((function(r){e[n][r]!==t[n][r]&&o(n)})),i.forEach((function(r){e[n][r]!==t[n][r]&&o(n)})))}else e[n]!==t[n]&&o(n)})),a}(L,T.current,U,I.current,(function(e){return e.key}));return T.current=L,I.current=U,e.length&&C.current&&!C.current.destroyed&&cn({swiper:C.current,slides:U,passedParams:L,changedParams:e,nextEl:N.current,prevEl:P.current,scrollbarEl:O.current,paginationEl:R.current}),function(){F&&C.current&&Object.keys(F).forEach((function(e){C.current.off(e,F[e])}))}})),hn((function(){var e;!(e=C.current)||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())}),[k]),t.createElement(o,vn({ref:E,className:rn("".concat(m).concat(i?" ".concat(i):""))},M),t.createElement(dn.Provider,{value:C.current},V["container-start"],t.createElement(c,{className:"swiper-wrapper"},V["wrapper-start"],D.virtual?function(e,n,r){if(!r)return null;var i=e.isHorizontal()?ot({},e.rtlTranslate?"right":"left","".concat(r.offset,"px")):{top:"".concat(r.offset,"px")};return n.filter((function(e,t){return t>=r.from&&t<=r.to})).map((function(n){return t.cloneElement(n,{swiper:e,style:i})}))}(C.current,U,k):!D.loop||C.current&&C.current.destroyed?U.map((function(e){return t.cloneElement(e,{swiper:C.current})})):function(e,n,r){var i=n.map((function(n,r){return t.cloneElement(n,{swiper:e,"data-swiper-slide-index":r})}));function a(e,n,i){return t.cloneElement(e,{key:"".concat(e.key,"-duplicate-").concat(n,"-").concat(i),className:"".concat(e.props.className||""," ").concat(r.slideDuplicateClass)})}if(r.loopFillGroupWithBlank){var o=r.slidesPerGroup-i.length%r.slidesPerGroup;if(o!==r.slidesPerGroup)for(var s=0;s<o;s+=1){var u=t.createElement("div",{className:"".concat(r.slideClass," ").concat(r.slideBlankClass)});i.push(u)}}"auto"!==r.slidesPerView||r.loopedSlides||(r.loopedSlides=i.length);for(var c=on(i,r),h=[],f=[],d=0;d<c;d+=1){var p=d-Math.floor(d/i.length)*i.length;f.push(a(i[p],d,"append")),h.unshift(a(i[i.length-p-1],d,"prepend"))}return e&&(e.loopedSlides=c),[].concat(h,l(i),f)}(C.current,U,D),V["wrapper-end"]),en(D)&&t.createElement(t.Fragment,null,t.createElement("div",{ref:P,className:"swiper-button-prev"}),t.createElement("div",{ref:N,className:"swiper-button-next"})),nn(D)&&t.createElement("div",{ref:O,className:"swiper-scrollbar"}),tn(D)&&t.createElement("div",{ref:R,className:"swiper-pagination"}),V["container-end"]))}));mn.displayName="Swiper";var gn=["tag","children","className","swiper","zoom","virtualIndex"];function yn(){return yn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yn.apply(this,arguments)}var kn=(0,t.forwardRef)((function(e,n){var r=void 0===e?{}:e,i=r.tag,a=void 0===i?"div":i,o=r.children,s=r.className,l=void 0===s?"":s,c=r.swiper,h=r.zoom,f=r.virtualIndex,d=qe(r,gn),p=(0,t.useRef)(null),v=u((0,t.useState)("swiper-slide"),2),m=v[0],g=v[1];function y(e,t,n){t===p.current&&g(n)}hn((function(){if(n&&(n.current=p.current),p.current&&c){if(!c.destroyed)return c.on("_slideClass",y),function(){c&&c.off("_slideClass",y)};"swiper-slide"!==m&&g("swiper-slide")}})),hn((function(){c&&p.current&&!c.destroyed&&g(c.getSlideClasses(p.current))}),[c]);var k={isActive:m.indexOf("swiper-slide-active")>=0||m.indexOf("swiper-slide-duplicate-active")>=0,isVisible:m.indexOf("swiper-slide-visible")>=0,isDuplicate:m.indexOf("swiper-slide-duplicate")>=0,isPrev:m.indexOf("swiper-slide-prev")>=0||m.indexOf("swiper-slide-duplicate-prev")>=0,isNext:m.indexOf("swiper-slide-next")>=0||m.indexOf("swiper-slide-duplicate-next")>=0},b=function(){return"function"===typeof o?o(k):o};return t.createElement(a,yn({ref:p,className:rn("".concat(m).concat(l?" ".concat(l):"")),"data-swiper-slide-index":f},d),t.createElement(fn.Provider,{value:k},h?t.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"===typeof h?h:void 0},b()):b()))}));kn.displayName="SwiperSlide";n.p;var bn=n.p+"static/media/Carousel1.33376a239083818d5bce.jpg",wn=n.p+"static/media/Carousel2.a9f5e9166d69b4d372ce.jpg",_n=n(184),xn=function(e){return(0,_n.jsx)(Ue,{to:"/Menu#Combos",children:(0,_n.jsxs)("div",{className:"flex flex-col border-2 border-offblack m-1 items-stretch max-w-sm bg-beige w-80 mt-4",children:[(0,_n.jsx)("img",{src:e.picture,className:"flex border-b-2 border-offblack",alt:"item picture"}),(0,_n.jsx)("p",{className:"text-center textSignin text-2xl mt-4",children:e.name}),(0,_n.jsxs)("p",{className:"text-center textSignin text-1xl mb-4",children:["Price: ",e.price]}),(0,_n.jsx)("div",{className:"flex flex-row self-stretch",children:(0,_n.jsx)("p",{className:"border-2 border-black border-b-0 w-full bg-offblack text-beige textSignin text-1xl btnHoverCart text-center",children:"Check out in Menu"})})]})})};function Sn(){return(0,_n.jsxs)(_n.Fragment,{children:[(0,_n.jsx)("h1",{class:" border-b-2 border-offblack text-4xl text-center bg-beige titleLocations py-3",children:"Your Taste buds' second home"}),(0,_n.jsx)("div",{className:"flex justify-center",children:(0,_n.jsxs)("div",{className:"flex flex-col items-center bg-beigeLight border-2 border-black mb-10 mt-8 min-w-[21rem]",children:[(0,_n.jsx)(Ue,{to:"Menu",children:(0,_n.jsxs)(mn,{spaceBetween:0,centeredSlides:!0,autoplay:{delay:3e3,disableOnInteraction:!1},pagination:{clickable:!0,renderBullet:function(){return'<button class="border-2 border-black bg-red-400 min-w-[5px] min-h-[5px] invisible">BOB</button>'}},modules:[Xt,Yt],className:"mySwiper mt-8 max-w-[68vw] max-h-[58vh] border-2 border-black min-w-[20rem] mx-8 w-[970px] object-cover",children:[(0,_n.jsx)(kn,{className:"flex justify-center",children:(0,_n.jsx)("img",{src:bn})}),(0,_n.jsx)(kn,{className:"flex justify-center",children:(0,_n.jsx)("img",{src:wn})})]})}),(0,_n.jsx)("h1",{className:"font-bold text-3xl textSignin mt-8 mb-4",children:"Specials"}),(0,_n.jsxs)("div",{className:"flex justify-center mb-5 flex-wrap max-w-[70vw]",children:[(0,_n.jsx)(xn,{name:"Crispy Chicken Combo",price:"360",picture:"https://media.discordapp.net/attachments/441534031016755200/1052968276382199891/Combo_Cheeseburger.jpg"}),(0,_n.jsx)(xn,{name:"Crispy Wrap Combo",price:"320",picture:"https://media.discordapp.net/attachments/441534031016755200/1052968275744653372/Classic_Combo_Wrap.jpg"}),(0,_n.jsx)(xn,{name:"Cheese Chicken Combo",price:"380",picture:"https://media.discordapp.net/attachments/441534031016755200/1052968276055040010/Combo_Crispy.jpg"})]})]})})]})}function En(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?En(Object(n),!0).forEach((function(t){ot(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):En(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tn=function(e){var n=e.id,r=e.name,i=e.address,a=e.imgUrl,o=e.showOnMap,s=u((0,t.useState)(!1),2),l=s[0],c=s[1];return(0,_n.jsxs)("div",{id:n,className:"FindUsCard flex grow-1 md:w-1/4 flex-col justify-between bg-beigeLight text-offblack text-center",children:[(0,_n.jsx)("h3",{className:"text-2xl text-offblack w-full mt-3",children:r}),(0,_n.jsx)("p",{children:i}),(0,_n.jsx)("div",{className:" border-t-2 border-offblack mt-3 w-full",children:(0,_n.jsxs)("button",{className:"px-3 py-2 w-full bg-sea btnHover",onClick:function(){window.innerWidth<=850&&c(!l),o(a)},children:[(0,_n.jsx)("span",{className:"mapButtonHorizontal",children:"Map"}),!l&&(0,_n.jsx)("span",{className:"mapButtonVerticalShow",children:"Show Map"}),l&&(0,_n.jsx)("span",{className:"mapButtonVerticalHide",children:"Hide Map"})]})}),l&&(0,_n.jsx)("img",{className:"verticalMap",src:a})]})};function In(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function Nn(){return Nn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=In(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Nn.apply(this,arguments)}function Pn(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Rn(){Rn=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(N){u=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),s=new C(i||[]);return r(o,"_invoke",{value:_(e,n,s)}),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=l;var f={};function d(){}function p(){}function v(){}var m={};u(m,a,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(T([])));y&&y!==t&&n.call(y,a)&&(m=y);var k=v.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,s){var u=c(e[r],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==h(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return i("throw",e,o,s)}))}s(u.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=c(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),u(k,s,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function On(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(qg){return void n(qg)}s.done?t(u):Promise.resolve(u).then(r,i)}function An(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){On(a,r,i,o,s,"next",e)}function s(e){On(a,r,i,o,s,"throw",e)}o(void 0)}))}}var Dn=!1,Ln=!1,Mn="${JSCORE_VERSION}",Fn=function(e,t){if(!e)throw jn(t)},jn=function(e){return new Error("Firebase Database ("+Mn+") INTERNAL ASSERT FAILED: "+e)},Un=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Vn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|l>>6,d=63&l;u||(d=64,o||(f=64)),r.push(n[c],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Un(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var l=a<<2|o>>4;if(r.push(l),64!==s){var c=o<<4&240|s>>2;if(r.push(c),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},zn=function(e){var t=Un(e);return Vn.encodeByteArray(t,!0)},qn=function(e){return zn(e).replace(/\./g,"")},Bn=function(e){try{return Vn.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Hn(e){return Wn(void 0,e)}function Wn(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Wn(e[n],t[n]));return e}function Gn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Kn(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gn())}function Qn(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function $n(){return!0===Dn||!0===Ln}function Yn(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Xn=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Jn=function(){try{return Xn()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/Crispies-React-Foodchain-site-DIGIT-2022",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&Bn(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Zn=function(e){var t,n;return null===(n=null===(t=Jn())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},er=function(e){var t=Zn(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},tr=function(){var e;return null===(e=Jn())||void 0===e?void 0:e.config},nr=function(e){var t;return null===(t=Jn())||void 0===t?void 0:t["_".concat(e)]},rr=function(){function e(){var t=this;c(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return p(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function ir(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[qn(JSON.stringify({alg:"none",type:"JWT"})),qn(JSON.stringify(a)),""].join(".")}var ar=function(e){m(n,e);var t=w(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(k(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(k(a),or.prototype.create),a}return p(n)}(x(Error)),or=function(){function e(t,n,r){c(this,e),this.service=t,this.serviceName=n,this.errors=r}return p(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?sr(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new ar(n,a,t);return o}}]),e}();function sr(e,t){return e.replace(ur,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var ur=/\{\$([^}]+)}/g;function lr(e){return JSON.parse(e)}function cr(e){return JSON.stringify(e)}var hr=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=lr(Bn(a[0])||""),n=lr(Bn(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function fr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function dr(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function pr(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function vr(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function mr(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(gr(s)&&gr(u)){if(!mr(s,u))return!1}else if(s!==u)return!1}for(var l=0,c=r;l<c.length;l++){var h=c[l];if(!n.includes(h))return!1}return!0}function gr(e){return null!==e&&"object"===typeof e}function yr(e){for(var t=[],n=function(){var e=u(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function kr(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=u(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function br(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var wr=function(){function e(){c(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return p(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,l=this.chain_[0],c=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=f^c&(h^f),u=1518500249):(s=c^h^f,u=1859775393):p<60?(s=c&h|f&(c|h),u=2400959708):(s=c^h^f,u=3395469782);var v=(l<<5|l>>>27)+s+d+u+n[p]&4294967295;d=f,f=h,h=4294967295&(c<<30|c>>>2),c=l,l=v}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();var _r=function(){function e(t,n){var r=this;c(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return p(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Pn(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=xr),void 0===r.error&&(r.error=xr),void 0===r.complete&&(r.complete=xr);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function xr(){}function Sr(e,t){return"".concat(e," failed: ").concat(t," argument ")}var Er=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Cr(e){return e&&e._delegate?e._delegate:e}var Tr=function(){function e(t,n,r){c(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return p(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ir="[DEFAULT]",Nr=function(){function e(t,n){c(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return p(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new rr;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ir})}catch(l){}var t,n=Pn(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=u(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(l){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ir;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=An(Rn().mark((function e(){var t;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(l(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),l(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ir;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ir;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Pn(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=u(i.value,2),l=s[0],c=s[1],h=this.normalizeInstanceIdentifier(l);r===h&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Pn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Hv){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ir?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Hv){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ir;return this.component?this.component.multipleInstances?e:Ir:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Pr,Rr,Or=function(){function e(t){c(this,e),this.name=t,this.providers=new Map}return p(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Nr(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ar=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Rr||(Rr={}));var Dr={debug:Rr.DEBUG,verbose:Rr.VERBOSE,info:Rr.INFO,warn:Rr.WARN,error:Rr.ERROR,silent:Rr.SILENT},Lr=Rr.INFO,Mr=(ot(Pr={},Rr.DEBUG,"log"),ot(Pr,Rr.VERBOSE,"log"),ot(Pr,Rr.INFO,"info"),ot(Pr,Rr.WARN,"warn"),ot(Pr,Rr.ERROR,"error"),Pr),Fr=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Mr[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},jr=function(){function e(t){c(this,e),this.name=t,this._logLevel=Lr,this._logHandler=Fr,this._userLogHandler=null,Ar.push(this)}return p(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Rr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Dr[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Rr.DEBUG].concat(t)),this._logHandler.apply(this,[this,Rr.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Rr.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Rr.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Rr.INFO].concat(t)),this._logHandler.apply(this,[this,Rr.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Rr.WARN].concat(t)),this._logHandler.apply(this,[this,Rr.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Rr.ERROR].concat(t)),this._logHandler.apply(this,[this,Rr.ERROR].concat(t))}}]),e}();var Ur,Vr;var zr=new WeakMap,qr=new WeakMap,Br=new WeakMap,Hr=new WeakMap,Wr=new WeakMap;var Gr={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return qr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Br.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $r(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Kr(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Vr||(Vr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Yr(this),n),$r(zr.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return $r(e.apply(Yr(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Yr(this),t].concat(r));return Br.set(a,t.sort?t.sort():[t]),$r(a)}}function Qr(e){return"function"===typeof e?Kr(e):(e instanceof IDBTransaction&&function(e){if(!qr.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));qr.set(e,t)}}(e),t=e,(Ur||(Ur=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Gr):e);var t}function $r(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t($r(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&zr.set(t,e)})).catch((function(){})),Wr.set(t,e),t}(e);if(Hr.has(e))return Hr.get(e);var t=Qr(e);return t!==e&&(Hr.set(e,t),Wr.set(t,e)),t}var Yr=function(e){return Wr.get(e)};var Xr,Jr,Zr,ei=["get","getKey","getAll","getAllKeys","count"],ti=["put","add","delete","clear"],ni=new Map;function ri(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(ni.get(t))return ni.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=ti.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||ei.includes(n))){var a=function(){var e=An(Rn().mark((function e(t){var a,o,s,u,l,c,h=arguments;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=h[c];return r&&(s=s.index(l.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,l),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return ni.set(t,a),a}}}Xr=function(e){return Cn(Cn({},e),{},{get:function(t,n,r){return ri(t,n)||e.get(t,n,r)},has:function(t,n){return!!ri(t,n)||e.has(t,n)}})},Gr=Xr(Gr);var ii=function(){function e(t){c(this,e),this.container=t}return p(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var ai="@firebase/app",oi="0.9.0",si=new jr("@firebase/app"),ui="[DEFAULT]",li=(ot(Jr={},ai,"fire-core"),ot(Jr,"@firebase/app-compat","fire-core-compat"),ot(Jr,"@firebase/analytics","fire-analytics"),ot(Jr,"@firebase/analytics-compat","fire-analytics-compat"),ot(Jr,"@firebase/app-check","fire-app-check"),ot(Jr,"@firebase/app-check-compat","fire-app-check-compat"),ot(Jr,"@firebase/auth","fire-auth"),ot(Jr,"@firebase/auth-compat","fire-auth-compat"),ot(Jr,"@firebase/database","fire-rtdb"),ot(Jr,"@firebase/database-compat","fire-rtdb-compat"),ot(Jr,"@firebase/functions","fire-fn"),ot(Jr,"@firebase/functions-compat","fire-fn-compat"),ot(Jr,"@firebase/installations","fire-iid"),ot(Jr,"@firebase/installations-compat","fire-iid-compat"),ot(Jr,"@firebase/messaging","fire-fcm"),ot(Jr,"@firebase/messaging-compat","fire-fcm-compat"),ot(Jr,"@firebase/performance","fire-perf"),ot(Jr,"@firebase/performance-compat","fire-perf-compat"),ot(Jr,"@firebase/remote-config","fire-rc"),ot(Jr,"@firebase/remote-config-compat","fire-rc-compat"),ot(Jr,"@firebase/storage","fire-gcs"),ot(Jr,"@firebase/storage-compat","fire-gcs-compat"),ot(Jr,"@firebase/firestore","fire-fst"),ot(Jr,"@firebase/firestore-compat","fire-fst-compat"),ot(Jr,"fire-js","fire-js"),ot(Jr,"firebase","fire-js-all"),Jr),ci=new Map,hi=new Map;function fi(e,t){try{e.container.addComponent(t)}catch(n){si.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function di(e){var t=e.name;if(hi.has(t))return si.debug("There were multiple attempts to register component ".concat(t,".")),!1;hi.set(t,e);var n,r=Pn(ci.values());try{for(r.s();!(n=r.n()).done;){fi(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function pi(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var vi=(ot(Zr={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),ot(Zr,"bad-app-name","Illegal App name: '{$appName}"),ot(Zr,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),ot(Zr,"app-deleted","Firebase App named '{$appName}' already deleted"),ot(Zr,"no-options","Need to provide options, when not being deployed to hosting via source."),ot(Zr,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ot(Zr,"invalid-log-argument","First argument to `onLog` must be null or a function."),ot(Zr,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),ot(Zr,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),ot(Zr,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),ot(Zr,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Zr),mi=new or("app","Firebase",vi),gi=function(){function e(t,n,r){var i=this;c(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Tr("app",(function(){return i}),"PUBLIC"))}return p(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw mi.create("app-deleted",{appName:this._name})}}]),e}(),yi="9.15.0";function ki(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:ui,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw mi.create("bad-app-name",{appName:String(a)});if(n||(n=tr()),!n)throw mi.create("no-options");var o=ci.get(a);if(o){if(mr(n,o.options)&&mr(i,o.config))return o;throw mi.create("duplicate-app",{appName:a})}var s,u=new Or(a),l=Pn(hi.values());try{for(l.s();!(s=l.n()).done;){var c=s.value;u.addComponent(c)}}catch(f){l.e(f)}finally{l.f()}var h=new gi(n,i,u);return ci.set(a,h),h}function bi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ui,t=ci.get(e);if(!t&&e===ui)return ki();if(!t)throw mi.create("no-app",{appName:e});return t}function wi(e,t,n){var r,i=null!==(r=li[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void si.warn(s.join(" "))}di(new Tr("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}var _i="firebase-heartbeat-store",xi=null;function Si(){return xi||(xi=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=$r(s);return i&&s.addEventListener("upgradeneeded",(function(e){i($r(s.result),e.oldVersion,e.newVersion,$r(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(_i)}}).catch((function(e){throw mi.create("idb-open",{originalErrorMessage:e.message})}))),xi}function Ei(e){return Ci.apply(this,arguments)}function Ci(){return Ci=An(Rn().mark((function e(t){var n,r;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Si();case 3:return n=e.sent,e.abrupt("return",n.transaction(_i).objectStore(_i).get(Ni(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof ar?si.warn(e.t0.message):(r=mi.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),si.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Ci.apply(this,arguments)}function Ti(e,t){return Ii.apply(this,arguments)}function Ii(){return Ii=An(Rn().mark((function e(t,n){var r,i,a,o;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Si();case 3:return r=e.sent,i=r.transaction(_i,"readwrite"),a=i.objectStore(_i),e.next=8,a.put(n,Ni(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof ar?si.warn(e.t0.message):(o=mi.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),si.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Ii.apply(this,arguments)}function Ni(e){return"".concat(e.name,"!").concat(e.options.appId)}var Pi=function(){function e(t){var n=this;c(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Di(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return p(e,[{key:"triggerHeartbeat",value:function(){var e=An(Rn().mark((function e(){var t,n,r;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Ri(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=An(Rn().mark((function e(){var t,n,r,i,a;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Ri(),n=Oi(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=qn(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ri(){return(new Date).toISOString().substring(0,10)}function Oi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Pn(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Li(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Li(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Ai,Di=function(){function e(t){c(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return p(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=An(Rn().mark((function e(){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Yn()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(qg){t(qg)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=An(Rn().mark((function e(){var t;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Ei(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=An(Rn().mark((function e(t){var n,r;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Ti(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=An(Rn().mark((function e(t){var n,r;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Ti(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(l(r.heartbeats),l(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Li(e){return qn(JSON.stringify({version:2,heartbeats:e})).length}Ai="",di(new Tr("platform-logger",(function(e){return new ii(e)}),"PRIVATE")),di(new Tr("heartbeat",(function(e){return new Pi(e)}),"PRIVATE")),wi(ai,oi,Ai),wi(ai,oi,"esm2017"),wi("fire-js","");var Mi,Fi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},ji={},Ui=Ui||{},Vi=Fi||self;function zi(){}function qi(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Bi(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Hi="closure_uid_"+(1e9*Math.random()>>>0),Wi=0;function Gi(e,t,n){return e.call.apply(e.bind,arguments)}function Ki(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Qi(e,t,n){return(Qi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Gi:Ki).apply(null,arguments)}function $i(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Yi(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Xi(){this.s=this.s,this.o=this.o}Xi.prototype.s=!1,Xi.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,Hi)&&e[Hi]||(e[Hi]=++Wi)}(this)},Xi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Ji=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Zi(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function ea(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(qi(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function ta(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ta.prototype.h=function(){this.defaultPrevented=!0};var na=function(){if(!Vi.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Vi.addEventListener("test",zi,t),Vi.removeEventListener("test",zi,t)}catch(gg){}return e}();function ra(e){return/^[\s\xa0]*$/.test(e)}var ia=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function aa(e,t){return e<t?-1:e>t?1:0}function oa(){var e=Vi.navigator;return e&&(e=e.userAgent)?e:""}function sa(e){return-1!=oa().indexOf(e)}function ua(e){return ua[" "](e),e}ua[" "]=zi;var la,ca=sa("Opera"),ha=sa("Trident")||sa("MSIE"),fa=sa("Edge"),da=fa||ha,pa=sa("Gecko")&&!(-1!=oa().toLowerCase().indexOf("webkit")&&!sa("Edge"))&&!(sa("Trident")||sa("MSIE"))&&!sa("Edge"),va=-1!=oa().toLowerCase().indexOf("webkit")&&!sa("Edge");function ma(){var e=Vi.document;return e?e.documentMode:void 0}e:{var ga="",ya=function(){var e=oa();return pa?/rv:([^\);]+)(\)|;)/.exec(e):fa?/Edge\/([\d\.]+)/.exec(e):ha?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):va?/WebKit\/(\S+)/.exec(e):ca?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(ya&&(ga=ya?ya[1]:""),ha){var ka=ma();if(null!=ka&&ka>parseFloat(ga)){la=String(ka);break e}}la=ga}var ba,wa={};function _a(){return function(e){var t=wa;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=ia(String(la)).split("."),n=ia("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=aa(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||aa(0==a[2].length,0==o[2].length)||aa(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Vi.document&&ha){var xa=ma();ba=xa||(parseInt(la,10)||void 0)}else ba=void 0;var Sa=ba;function Ea(e,t){if(ta.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(pa){e:{try{ua(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Ca[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ea.X.h.call(this)}}Yi(Ea,ta);var Ca={2:"touch",3:"pen",4:"mouse"};Ea.prototype.h=function(){Ea.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ta="closure_listenable_"+(1e6*Math.random()|0),Ia=0;function Na(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Ia,this.ba=this.ea=!1}function Pa(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Ra(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Oa(e){var t={};for(var n in e)t[n]=e[n];return t}var Aa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Da(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Aa.length;a++)n=Aa[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function La(e){this.src=e,this.g={},this.h=0}function Ma(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Ji(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Pa(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Fa(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}La.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Fa(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Na(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var ja="closure_lm_"+(1e6*Math.random()|0),Ua={};function Va(e,t,n,r,i){if(r&&r.once)return qa(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Va(e,t[a],n,r,i);return null}return n=$a(n),e&&e[Ta]?e.N(t,n,Bi(r)?!!r.capture:!!r,i):za(e,t,n,!1,r,i)}function za(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Bi(i)?!!i.capture:!!i,s=Ka(e);if(s||(e[ja]=s=new La(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Ga;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)na||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Wa(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function qa(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)qa(e,t[a],n,r,i);return null}return n=$a(n),e&&e[Ta]?e.O(t,n,Bi(r)?!!r.capture:!!r,i):za(e,t,n,!0,r,i)}function Ba(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Ba(e,t[a],n,r,i);else r=Bi(r)?!!r.capture:!!r,n=$a(n),e&&e[Ta]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Fa(a=e.g[t],n,r,i))&&(Pa(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Ka(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Fa(t,n,r,i)),(n=-1<e?t[e]:null)&&Ha(n))}function Ha(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Ta])Ma(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Wa(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ka(t))?(Ma(n,e),0==n.h&&(n.src=null,t[ja]=null)):Pa(e)}}}function Wa(e){return e in Ua?Ua[e]:Ua[e]="on"+e}function Ga(e,t){if(e.ba)e=!0;else{t=new Ea(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&Ha(e),e=n.call(r,t)}return e}function Ka(e){return(e=e[ja])instanceof La?e:null}var Qa="__closure_events_fn_"+(1e9*Math.random()>>>0);function $a(e){return"function"===typeof e?e:(e[Qa]||(e[Qa]=function(t){return e.handleEvent(t)}),e[Qa])}function Ya(){Xi.call(this),this.i=new La(this),this.P=this,this.I=null}function Xa(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new ta(t,e);else if(t instanceof ta)t.target=t.target||e;else{var i=t;Da(t=new ta(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Ja(o,r,!0,t)&&i}if(i=Ja(o=t.g=e,r,!0,t)&&i,i=Ja(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Ja(o=t.g=n[a],r,!1,t)&&i}function Ja(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var s=o.listener,u=o.ha||o.src;o.ea&&Ma(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Yi(Ya,Xi),Ya.prototype[Ta]=!0,Ya.prototype.removeEventListener=function(e,t,n,r){Ba(this,e,t,n,r)},Ya.prototype.M=function(){if(Ya.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Pa(n[r]);delete t.g[e],t.h--}}this.I=null},Ya.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ya.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Za=Vi.JSON.stringify;function eo(){var e=uo,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var to,no=function(){function e(){c(this,e),this.h=this.g=null}return p(e,[{key:"add",value:function(e,t){var n=ro.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),ro=new(function(){function e(t,n){c(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return p(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new io}),(function(e){return e.reset()})),io=function(){function e(){c(this,e),this.next=this.g=this.h=null}return p(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function ao(e){Vi.setTimeout((function(){throw e}),0)}function oo(e,t){to||function(){var e=Vi.Promise.resolve(void 0);to=function(){e.then(lo)}}(),so||(to(),so=!0),uo.add(e,t)}var so=!1,uo=new no;function lo(){for(var e;e=eo();){try{e.h.call(e.g)}catch(gg){ao(gg)}var t=ro;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}so=!1}function co(e,t){Ya.call(this),this.h=e||1,this.g=t||Vi,this.j=Qi(this.lb,this),this.l=Date.now()}function ho(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function fo(e,t,n){if("function"===typeof e)n&&(e=Qi(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Qi(e.handleEvent,e)}return 2147483647<Number(t)?-1:Vi.setTimeout(e,t||0)}function po(e){e.g=fo((function(){e.g=null,e.i&&(e.i=!1,po(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Yi(co,Ya),(Mi=co.prototype).ca=!1,Mi.R=null,Mi.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Xa(this,"tick"),this.ca&&(ho(this),this.start()))}},Mi.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Mi.M=function(){co.X.M.call(this),ho(this),delete this.g};var vo=function(e){m(n,e);var t=w(n);function n(e,r){var i;return c(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return p(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:po(this)}},{key:"M",value:function(){Nn(g(n.prototype),"M",this).call(this),this.g&&(Vi.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Xi);function mo(e){Xi.call(this),this.h=e,this.g={}}Yi(mo,Xi);var go=[];function yo(e,t,n,r){Array.isArray(n)||(n&&(go[0]=n.toString()),n=go);for(var i=0;i<n.length;i++){var a=Va(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function ko(e){Ra(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ha(e)}),e),e.g={}}function bo(){this.g=!0}function wo(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Za(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}mo.prototype.M=function(){mo.X.M.call(this),ko(this)},mo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bo.prototype.Aa=function(){this.g=!1},bo.prototype.info=function(){};var _o={},xo=null;function So(){return xo=xo||new Ya}function Eo(e){ta.call(this,_o.Pa,e)}function Co(e){var t=So();Xa(t,new Eo(t))}function To(e,t){ta.call(this,_o.STAT_EVENT,e),this.stat=t}function Io(e){var t=So();Xa(t,new To(t,e))}function No(e,t){ta.call(this,_o.Qa,e),this.size=t}function Po(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Vi.setTimeout((function(){e()}),t)}_o.Pa="serverreachability",Yi(Eo,ta),_o.STAT_EVENT="statevent",Yi(To,ta),_o.Qa="timingevent",Yi(No,ta);var Ro={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Oo={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ao(){}function Do(e){return e.h||(e.h=e.i())}function Lo(){}Ao.prototype.h=null;var Mo,Fo={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function jo(){ta.call(this,"d")}function Uo(){ta.call(this,"c")}function Vo(){}function zo(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new mo(this),this.O=Bo,e=da?125:void 0,this.T=new co(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new qo}function qo(){this.i=null,this.g="",this.h=!1}Yi(jo,ta),Yi(Uo,ta),Yi(Vo,Ao),Vo.prototype.g=function(){return new XMLHttpRequest},Vo.prototype.i=function(){return{}},Mo=new Vo;var Bo=45e3,Ho={},Wo={};function Go(e,t,n){e.K=1,e.v=hs(os(t)),e.s=n,e.P=!0,Ko(e,null)}function Ko(e,t){e.F=Date.now(),Xo(e),e.A=os(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Ss(n.i,"t",r),e.C=0,n=e.l.H,e.h=new qo,e.g=Su(e.l,n?t:null,!e.s),0<e.N&&(e.L=new vo(Qi(e.La,e,e.g),e.N)),yo(e.S,e.g,"readystatechange",e.ib),t=e.H?Oa(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Co(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var l=s[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Qo(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function $o(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Yo(e,n))==Wo){4==t&&(e.o=4,Io(14),i=!1),wo(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ho){e.o=4,Io(15),wo(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}wo(e.j,e.m,r,null),ns(e,r)}Qo(e)&&r!=Wo&&r!=Ho&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Io(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),mu(t),t.K=!0,Io(11))):(wo(e.j,e.m,n,"[Invalid Chunked Response]"),ts(e),es(e))}function Yo(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Wo:(n=Number(t.substring(n,r)),isNaN(n)?Ho:(r+=1)+n>t.length?Wo:(t=t.substr(r,n),e.C=r+n,t))}function Xo(e){e.V=Date.now()+e.O,Jo(e,e.O)}function Jo(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Po(Qi(e.gb,e),t)}function Zo(e){e.B&&(Vi.clearTimeout(e.B),e.B=null)}function es(e){0==e.l.G||e.I||ku(e.l,e)}function ts(e){Zo(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,ho(e.T),ko(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ns(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Rs(n.h,e)))if(!e.J&&Rs(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;yu(n),uu(n)}vu(n),Io(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Po(Qi(n.cb,n),6e3));if(1>=Ps(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else wu(n,11)}else if((e.J||n.g==e)&&yu(n),!ra(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var s=a[4];null!=s&&(n.Ca=s,n.j.info("SVER="+n.Ca));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var l=e.g;if(l){var c=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=r.h;h.g||-1==c.indexOf("spdy")&&-1==c.indexOf("quic")&&-1==c.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(Os(h,h.h),h.h=null))}if(r.D){var f=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.za=f,cs(r.F,r.D,f))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=xu(r,r.H?r.ka:null,r.V),d.J){As(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(Zo(p),Xo(p)),r.g=d}else pu(r);0<n.i.length&&cu(n)}else"stop"!=a[0]&&"close"!=a[0]||wu(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?wu(n,7):su(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}Co()}catch(a){}}function rs(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(qi(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(qi(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(qi(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Mi=zo.prototype).setTimeout=function(e){this.O=e},Mi.ib=function(e){e=e.target;var t=this.L;t&&3==tu(e)?t.l():this.La(e)},Mi.La=function(e){try{if(e==this.g)e:{var t=tu(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||da||this.g&&(this.h.h||this.g.fa()||nu(this.g)))){this.I||4!=t||7==n||Co(),Zo(this);var r=this.g.aa();this.Y=r;t:if(Qo(this)){var i=nu(this.g);e="";var a=i.length,o=4==tu(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ts(this),es(this);var s="";break t}this.h.i=new Vi.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var u,l=this.g;if((u=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ra(u)){var c=u;break t}}c=null}if(!(r=c)){this.i=!1,this.o=3,Io(12),ts(this),es(this);break e}wo(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ns(this,r)}this.P?($o(this,t,s),da&&this.i&&3==t&&(yo(this.S,this.T,"tick",this.hb),this.T.start())):(wo(this.j,this.m,s,null),ns(this,s)),4==t&&ts(this),this.i&&!this.I&&(4==t?ku(this.l,this):(this.i=!1,Xo(this)))}else 400==r&&0<s.indexOf("Unknown SID")?(this.o=3,Io(12)):(this.o=0,Io(13)),ts(this),es(this)}}}catch(t){}},Mi.hb=function(){if(this.g){var e=tu(this.g),t=this.g.fa();this.C<t.length&&(Zo(this),$o(this,e,t),this.i&&4!=e&&Xo(this))}},Mi.cancel=function(){this.I=!0,ts(this)},Mi.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Co(),Io(17)),ts(this),this.o=2,es(this)):Jo(this,this.V-e)};var is=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function as(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof as){this.h=void 0!==t?t:e.h,ss(this,e.j),this.s=e.s,this.g=e.g,us(this,e.m),this.l=e.l,t=e.i;var n=new bs;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ls(this,n),this.o=e.o}else e&&(n=String(e).match(is))?(this.h=!!t,ss(this,n[1]||"",!0),this.s=fs(n[2]||""),this.g=fs(n[3]||"",!0),us(this,n[4]),this.l=fs(n[5]||"",!0),ls(this,n[6]||"",!0),this.o=fs(n[7]||"")):(this.h=!!t,this.i=new bs(null,this.h))}function os(e){return new as(e)}function ss(e,t,n){e.j=n?fs(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function us(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ls(e,t,n){t instanceof bs?(e.i=t,function(e,t){t&&!e.j&&(ws(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(_s(this,t),Ss(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ds(t,ys)),e.i=new bs(t,e.h))}function cs(e,t,n){e.i.set(t,n)}function hs(e){return cs(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function fs(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ds(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ps),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ps(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}as.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ds(t,vs,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ds(t,vs,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ds(n,"/"==n.charAt(0)?gs:ms,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ds(n,ks)),e.join("")};var vs=/[#\/\?@]/g,ms=/[#\?:]/g,gs=/[#\?]/g,ys=/[#\?@]/g,ks=/#/g;function bs(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ws(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function _s(e,t){ws(e),t=Es(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function xs(e,t){return ws(e),t=Es(e,t),e.g.has(t)}function Ss(e,t,n){_s(e,t),0<n.length&&(e.i=null,e.g.set(Es(e,t),Zi(n)),e.h+=n.length)}function Es(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Mi=bs.prototype).add=function(e,t){ws(this),this.i=null,e=Es(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Mi.forEach=function(e,t){ws(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Mi.oa=function(){ws(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Mi.W=function(e){ws(this);var t=[];if("string"===typeof e)xs(this,e)&&(t=t.concat(this.g.get(Es(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Mi.set=function(e,t){return ws(this),this.i=null,xs(this,e=Es(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Mi.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Mi.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Cs=p((function e(t,n){c(this,e),this.h=t,this.g=n}));function Ts(e){this.l=e||Is,Vi.PerformanceNavigationTiming?e=0<(e=Vi.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Vi.g&&Vi.g.Ga&&Vi.g.Ga()&&Vi.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Is=10;function Ns(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ps(e){return e.h?1:e.g?e.g.size:0}function Rs(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Os(e,t){e.g?e.g.add(t):e.h=t}function As(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ds(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Pn(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Zi(e.i)}function Ls(){}function Ms(){this.g=new Ls}function Fs(e,t,n){var r=n||"";try{rs(e,(function(e,n){var i=e;Bi(e)&&(i=Za(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function js(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Us(e){this.l=e.ac||null,this.j=e.jb||!1}function Vs(e,t){Ya.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=zs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ts.prototype.cancel=function(){if(this.i=Ds(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Pn(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Ls.prototype.stringify=function(e){return Vi.JSON.stringify(e,void 0)},Ls.prototype.parse=function(e){return Vi.JSON.parse(e,void 0)},Yi(Us,Ao),Us.prototype.g=function(){return new Vs(this.l,this.j)},Us.prototype.i=function(e){return function(){return e}}({}),Yi(Vs,Ya);var zs=0;function qs(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Bs(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Hs(e)}function Hs(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Mi=Vs.prototype).open=function(e,t){if(this.readyState!=zs)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Hs(this)},Mi.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Vi).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Mi.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bs(this)),this.readyState=zs},Mi.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Hs(this)),this.g&&(this.readyState=3,Hs(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof Vi.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;qs(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Mi.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Bs(this):Hs(this),3==this.readyState&&qs(this)}},Mi.Va=function(e){this.g&&(this.response=this.responseText=e,Bs(this))},Mi.Ua=function(e){this.g&&(this.response=e,Bs(this))},Mi.ga=function(){this.g&&Bs(this)},Mi.setRequestHeader=function(e,t){this.v.append(e,t)},Mi.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Mi.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Vs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ws=Vi.JSON.parse;function Gs(e){Ya.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ks,this.K=this.L=!1}Yi(Gs,Ya);var Ks="",Qs=/^https?$/i,$s=["POST","PUT"];function Ys(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Xs(e),Zs(e)}function Xs(e){e.D||(e.D=!0,Xa(e,"complete"),Xa(e,"error"))}function Js(e){if(e.h&&"undefined"!=typeof Ui&&(!e.C[1]||4!=tu(e)||2!=e.aa()))if(e.v&&4==tu(e))fo(e.Ha,0,e);else if(Xa(e,"readystatechange"),4==tu(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(is)[1]||null;if(!a&&Vi.self&&Vi.self.location){var o=Vi.self.location.protocol;a=o.substr(0,o.length-1)}i=!Qs.test(a?a.toLowerCase():"")}t=i}if(t)Xa(e,"complete"),Xa(e,"success");else{e.m=6;try{var s=2<tu(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.aa()+"]",Xs(e)}}finally{Zs(e)}}}function Zs(e,t){if(e.g){eu(e);var n=e.g,r=e.C[0]?zi:null;e.g=null,e.C=null,t||Xa(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function eu(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Vi.clearTimeout(e.A),e.A=null)}function tu(e){return e.g?e.g.readyState:0}function nu(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Ks:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Vu){return null}}function ru(e){var t="";return Ra(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function iu(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=ru(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):cs(e,t,n))}function au(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ou(e){this.Ca=0,this.i=[],this.j=new bo,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=au("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=au("baseRetryDelayMs",5e3,e),this.bb=au("retryDelaySeedMs",1e4,e),this.$a=au("forwardChannelMaxRetries",2,e),this.ta=au("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Ts(e&&e.concurrentRequestLimit),this.Fa=new Ms,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function su(e){if(lu(e),3==e.G){var t=e.U++,n=os(e.F);cs(n,"SID",e.I),cs(n,"RID",t),cs(n,"TYPE","terminate"),fu(e,n),(t=new zo(e,e.j,t,void 0)).K=2,t.v=hs(os(n)),n=!1,Vi.navigator&&Vi.navigator.sendBeacon&&(n=Vi.navigator.sendBeacon(t.v.toString(),"")),!n&&Vi.Image&&((new Image).src=t.v,n=!0),n||(t.g=Su(t.l,null),t.g.da(t.v)),t.F=Date.now(),Xo(t)}_u(e)}function uu(e){e.g&&(mu(e),e.g.cancel(),e.g=null)}function lu(e){uu(e),e.u&&(Vi.clearTimeout(e.u),e.u=null),yu(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Vi.clearTimeout(e.m),e.m=null)}function cu(e){Ns(e.h)||e.m||(e.m=!0,oo(e.Ja,e),e.C=0)}function hu(e,t){var n;n=t?t.m:e.U++;var r=os(e.F);cs(r,"SID",e.I),cs(r,"RID",n),cs(r,"AID",e.T),fu(e,r),e.o&&e.s&&iu(r,e.o,e.s),n=new zo(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=du(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Os(e.h,n),Go(n,r,t)}function fu(e,t){e.ia&&Ra(e.ia,(function(e,n){cs(t,n,e)})),e.l&&rs({},(function(e,n){cs(t,n,e)}))}function du(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Qi(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var l=i[u].h,c=i[u].g;if(0>(l-=a))a=Math.max(0,i[u].h-100),s=!1;else try{Fs(c,o,"req"+l+"_")}catch(h){r&&r(c)}}if(s){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function pu(e){e.g||e.u||(e.Z=1,oo(e.Ia,e),e.A=0)}function vu(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Po(Qi(e.Ia,e),bu(e,e.A)),e.A++,!0)}function mu(e){null!=e.B&&(Vi.clearTimeout(e.B),e.B=null)}function gu(e){e.g=new zo(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=os(e.sa);cs(t,"RID","rpc"),cs(t,"SID",e.I),cs(t,"CI",e.L?"0":"1"),cs(t,"AID",e.T),cs(t,"TYPE","xmlhttp"),fu(e,t),e.o&&e.s&&iu(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=hs(os(t)),n.s=null,n.P=!0,Ko(n,e)}function yu(e){null!=e.v&&(Vi.clearTimeout(e.v),e.v=null)}function ku(e,t){var n=null;if(e.g==t){yu(e),mu(e),e.g=null;var r=2}else{if(!Rs(e.h,t))return;n=t.D,As(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Xa(r=So(),new No(r,n)),cu(e)}else pu(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(Ps(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=Po(Qi(e.Ja,e,t),bu(e,e.C)),e.C++,!0))}(e,t)||2==r&&vu(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:wu(e,5);break;case 4:wu(e,10);break;case 3:wu(e,6);break;default:wu(e,2)}}function bu(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function wu(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Qi(e.kb,e);n||(n=new as("//www.google.com/images/cleardot.gif"),Vi.location&&"http"==Vi.location.protocol||ss(n,"https"),hs(n)),function(e,t){var n=new bo;if(Vi.Image){var r=new Image;r.onload=$i(js,n,r,"TestLoadImage: loaded",!0,t),r.onerror=$i(js,n,r,"TestLoadImage: error",!1,t),r.onabort=$i(js,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=$i(js,n,r,"TestLoadImage: timeout",!1,t),Vi.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Io(2);e.G=0,e.l&&e.l.va(t),_u(e),lu(e)}function _u(e){if(e.G=0,e.la=[],e.l){var t=Ds(e.h);0==t.length&&0==e.i.length||(ea(e.la,t),ea(e.la,e.i),e.h.i.length=0,Zi(e.i),e.i.length=0),e.l.ua()}}function xu(e,t,n){var r=n instanceof as?os(n):new as(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),us(r,r.m);else{var i=Vi.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new as(null,void 0);r&&ss(a,r),t&&(a.g=t),i&&us(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&cs(r,n,t),cs(r,"VER",e.ma),fu(e,r),r}function Su(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Gs(new Us({jb:!0})):new Gs(e.ra)).Ka(e.H),t}function Eu(){}function Cu(){if(ha&&!(10<=Number(Sa)))throw Error("Environmental error: no available transport.")}function Tu(e,t){Ya.call(this),this.g=new ou(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!ra(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ra(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Pu(this)}function Iu(e){jo.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Nu(){Uo.call(this),this.status=1}function Pu(e){this.g=e}(Mi=Gs.prototype).Ka=function(e){this.L=e},Mi.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Mo.g(),this.C=this.u?Do(this.u):Do(Mo),this.g.onreadystatechange=Qi(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void Ys(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=Pn(r.keys());try{for(o.s();!(a=o.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Vi.FormData&&e instanceof Vi.FormData,!(0<=Ji($s,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var l,c=Pn(n);try{for(c.s();!(l=c.n()).done;){var h=u(l.value,2),f=h[0],d=h[1];this.g.setRequestHeader(f,d)}}catch(p){c.e(p)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{eu(this),0<this.B&&((this.K=function(e){return ha&&_a()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qi(this.qa,this)):this.A=fo(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Ys(this,s)}},Mi.qa=function(){"undefined"!=typeof Ui&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xa(this,"timeout"),this.abort(8))},Mi.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Xa(this,"complete"),Xa(this,"abort"),Zs(this))},Mi.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zs(this,!0)),Gs.X.M.call(this)},Mi.Ha=function(){this.s||(this.F||this.v||this.l?Js(this):this.fb())},Mi.fb=function(){Js(this)},Mi.aa=function(){try{return 2<tu(this)?this.g.status:-1}catch(mg){return-1}},Mi.fa=function(){try{return this.g?this.g.responseText:""}catch(mg){return""}},Mi.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ws(t)}},Mi.Ea=function(){return this.m},Mi.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Mi=ou.prototype).ma=8,Mi.G=1,Mi.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new zo(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Da(n=Oa(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=du(this,t,r),cs(i=os(this.F),"RID",e),cs(i,"CVER",22),this.D&&cs(i,"X-HTTP-Session-Id",this.D),fu(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(ru(n)))+"&"+r:this.o&&iu(i,this.o,n)),Os(this.h,t),this.Ya&&cs(i,"TYPE","init"),this.O?(cs(i,"$req",r),cs(i,"SID","null"),t.Z=!0,Go(t,i,null)):Go(t,i,r),this.G=2}}else 3==this.G&&(e?hu(this,e):0==this.i.length||Ns(this.h)||hu(this))},Mi.Ia=function(){if(this.u=null,gu(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Po(Qi(this.eb,this),e)}},Mi.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Io(10),uu(this),gu(this))},Mi.cb=function(){null!=this.v&&(this.v=null,uu(this),vu(this),Io(19))},Mi.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Io(2)):(this.j.info("Failed to ping google.com"),Io(1))},(Mi=Eu.prototype).xa=function(){},Mi.wa=function(){},Mi.va=function(){},Mi.ua=function(){},Mi.Ra=function(){},Cu.prototype.g=function(e,t){return new Tu(e,t)},Yi(Tu,Ya),Tu.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Io(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=xu(e,null,e.V),cu(e)},Tu.prototype.close=function(){su(this.g)},Tu.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Za(e),e=n);t.i.push(new Cs(t.ab++,e)),3==t.G&&cu(t)},Tu.prototype.M=function(){this.g.l=null,delete this.j,su(this.g),delete this.g,Tu.X.M.call(this)},Yi(Iu,jo),Yi(Nu,Uo),Yi(Pu,Eu),Pu.prototype.xa=function(){Xa(this.g,"a")},Pu.prototype.wa=function(e){Xa(this.g,new Iu(e))},Pu.prototype.va=function(e){Xa(this.g,new Nu)},Pu.prototype.ua=function(){Xa(this.g,"b")},Cu.prototype.createWebChannel=Cu.prototype.g,Tu.prototype.send=Tu.prototype.u,Tu.prototype.open=Tu.prototype.m,Tu.prototype.close=Tu.prototype.close,Ro.NO_ERROR=0,Ro.TIMEOUT=8,Ro.HTTP_ERROR=6,Oo.COMPLETE="complete",Lo.EventType=Fo,Fo.OPEN="a",Fo.CLOSE="b",Fo.ERROR="c",Fo.MESSAGE="d",Ya.prototype.listen=Ya.prototype.N,Gs.prototype.listenOnce=Gs.prototype.O,Gs.prototype.getLastError=Gs.prototype.Oa,Gs.prototype.getLastErrorCode=Gs.prototype.Ea,Gs.prototype.getStatus=Gs.prototype.aa,Gs.prototype.getResponseJson=Gs.prototype.Sa,Gs.prototype.getResponseText=Gs.prototype.fa,Gs.prototype.send=Gs.prototype.da,Gs.prototype.setWithCredentials=Gs.prototype.Ka;var Ru=ji.createWebChannelTransport=function(){return new Cu},Ou=ji.getStatEventTarget=function(){return So()},Au=ji.ErrorCode=Ro,Du=ji.EventType=Oo,Lu=ji.Event=_o,Mu=ji.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Fu=ji.FetchXmlHttpFactory=Us,ju=ji.WebChannel=Lo,Uu=ji.XhrIo=Gs,Vu="@firebase/firestore",zu=function(){function e(t){c(this,e),this.uid=t}return p(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();zu.UNAUTHENTICATED=new zu(null),zu.GOOGLE_CREDENTIALS=new zu("google-credentials-uid"),zu.FIRST_PARTY=new zu("first-party-uid"),zu.MOCK_USER=new zu("mock-user");var qu="9.15.0",Bu=new jr("@firebase/firestore");function Hu(){return Bu.logLevel}function Wu(e){if(Bu.logLevel<=Rr.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Qu);Bu.debug.apply(Bu,["Firestore (".concat(qu,"): ").concat(e)].concat(l(i)))}}function Gu(e){if(Bu.logLevel<=Rr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Qu);Bu.error.apply(Bu,["Firestore (".concat(qu,"): ").concat(e)].concat(l(i)))}}function Ku(e){if(Bu.logLevel<=Rr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Qu);Bu.warn.apply(Bu,["Firestore (".concat(qu,"): ").concat(e)].concat(l(i)))}}function Qu(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function $u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(qu,") INTERNAL ASSERTION FAILED: ")+e;throw Gu(t),new Error(t)}function Yu(e,t){e||$u()}function Xu(e,t){return e}var Ju={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Zu=function(e){m(n,e);var t=w(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return p(n)}(ar),el=p((function e(){var t=this;c(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),tl=p((function e(t,n){c(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),nl=function(){function e(){c(this,e)}return p(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(zu.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),rl=function(){function e(t){c(this,e),this.token=t,this.changeListener=null}return p(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),il=function(){function e(t){c(this,e),this.t=t,this.currentUser=zu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return p(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new el;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new el,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(An(Rn().mark((function e(){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Wu("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Wu("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new el)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Wu("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Yu("string"==typeof n.accessToken),new tl(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Yu(null===e||"string"==typeof e),new zu(e)}}]),e}(),al=function(){function e(t,n,r,i){c(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=zu.FIRST_PARTY,this.p=new Map}return p(e,[{key:"I",value:function(){return this.g?this.g():(Yu(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),ol=function(){function e(t,n,r,i){c(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return p(e,[{key:"getToken",value:function(){return Promise.resolve(new al(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(zu.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),sl=p((function e(t){c(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),ul=function(){function e(t){c(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return p(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Wu("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,Wu("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Wu("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):Wu("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Yu("string"==typeof t.token),e.A=t.token,new sl(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function ll(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var cl=function(){function e(){c(this,e)}return p(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=ll(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function hl(e,t){return e<t?-1:e>t?1:0}function fl(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var dl=function(){function e(t,n){if(c(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Zu(Ju.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Zu(Ju.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Zu(Ju.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Zu(Ju.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return p(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?hl(this.nanoseconds,e.nanoseconds):hl(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),pl=function(){function e(t){c(this,e),this.timestamp=t}return p(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new dl(0,0))}},{key:"max",value:function(){return new e(new dl(253402300799,999999999))}}]),e}(),vl=function(){function e(t,n,r){c(this,e),void 0===n?n=0:n>t.length&&$u(),void 0===r?r=t.length-n:r>t.length-n&&$u(),this.segments=t,this.offset=n,this.len=r}return p(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),ml=function(e){m(n,e);var t=w(n);function n(){return c(this,n),t.apply(this,arguments)}return p(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new Zu(Ju.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,l(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(vl),gl=/^[_a-zA-Z][_a-zA-Z0-9]*$/,yl=function(e){m(n,e);var t=w(n);function n(){return c(this,n),t.apply(this,arguments)}return p(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return gl.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Zu(Ju.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Zu(Ju.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Zu(Ju.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Zu(Ju.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(vl),kl=function(){function e(t){c(this,e),this.path=t}return p(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===ml.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(ml.fromString(t))}},{key:"fromName",value:function(t){return new e(ml.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(ml.emptyPath())}},{key:"comparator",value:function(e,t){return ml.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new ml(t.slice()))}}]),e}(),bl=p((function e(t,n,r,i){c(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));bl.UNKNOWN_ID=-1;function wl(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=pl.fromTimestamp(1e9===r?new dl(n+1,0):new dl(n,r));return new xl(i,kl.empty(),t)}function _l(e){return new xl(e.readTime,e.key,-1)}var xl=function(){function e(t,n,r){c(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return p(e,null,[{key:"min",value:function(){return new e(pl.min(),kl.empty(),-1)}},{key:"max",value:function(){return new e(pl.max(),kl.empty(),-1)}}]),e}();function Sl(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=kl.comparator(e.documentKey,t.documentKey))?n:hl(e.largestBatchId,t.largestBatchId)}var El="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Cl=function(){function e(){c(this,e),this.onCommittedListeners=[]}return p(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Tl(e){return Il.apply(this,arguments)}function Il(){return Il=An(Rn().mark((function e(t){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Ju.FAILED_PRECONDITION&&t.message===El){e.next=2;break}throw t;case 2:Wu("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Il.apply(this,arguments)}var Nl=function(){function e(t){var n=this;c(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return p(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&$u(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Pn(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(s){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s(u)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}();function Pl(e){return"IndexedDbTransactionError"===e.name}var Rl=function(){function e(t,n){var r=this;c(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return p(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();Rl.at=-1;var Ol=p((function e(t,n,r,i,a,o,s,u){c(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),Al=function(){function e(t,n){c(this,e),this.projectId=t,this.database=n||"(default)"}return p(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Dl(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ll(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ml(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Fl(e){return null==e}function jl(e){return 0===e&&1/e==-1/0}function Ul(e){return"number"==typeof e&&Number.isInteger(e)&&!jl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Vl=function(e){function t(e){c(this,t),this.binaryString=e}return p(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return hl(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Vl.EMPTY_BYTE_STRING=new Vl("");var zl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ql(e){if(Yu(!!e),"string"==typeof e){var t=0,n=zl.exec(e);if(Yu(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Bl(e.seconds),nanos:Bl(e.nanos)}}function Bl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Hl(e){return"string"==typeof e?Vl.fromBase64String(e):Vl.fromUint8Array(e)}function Wl(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Gl(e){var t=e.mapValue.fields.__previous_value__;return Wl(t)?Gl(t):t}function Kl(e){var t=ql(e.mapValue.fields.__local_write_time__.timestampValue);return new dl(t.seconds,t.nanos)}var Ql={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function $l(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Wl(e)?4:lc(e)?9007199254740991:10:$u()}function Yl(e,t){if(e===t)return!0;var n=$l(e);if(n!==$l(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Kl(e).isEqual(Kl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=ql(e.timestampValue),r=ql(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Hl(e.bytesValue).isEqual(Hl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Bl(e.geoPointValue.latitude)===Bl(t.geoPointValue.latitude)&&Bl(e.geoPointValue.longitude)===Bl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Bl(e.integerValue)===Bl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Bl(e.doubleValue),r=Bl(t.doubleValue);return n===r?jl(n)===jl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return fl(e.arrayValue.values||[],t.arrayValue.values||[],Yl);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Dl(n)!==Dl(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Yl(n[i],r[i])))return!1;return!0}(e,t);default:return $u()}}function Xl(e,t){return void 0!==(e.values||[]).find((function(e){return Yl(e,t)}))}function Jl(e,t){if(e===t)return 0;var n=$l(e),r=$l(t);if(n!==r)return hl(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return hl(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Bl(e.integerValue||e.doubleValue),r=Bl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Zl(e.timestampValue,t.timestampValue);case 4:return Zl(Kl(e),Kl(t));case 5:return hl(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Hl(e),r=Hl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=hl(n[i],r[i]);if(0!==a)return a}return hl(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=hl(Bl(e.latitude),Bl(t.latitude));return 0!==n?n:hl(Bl(e.longitude),Bl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Jl(n[i],r[i]);if(a)return a}return hl(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Ql.mapValue&&t===Ql.mapValue)return 0;if(e===Ql.mapValue)return 1;if(t===Ql.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=hl(r[o],a[o]);if(0!==s)return s;var u=Jl(n[r[o]],i[a[o]]);if(0!==u)return u}return hl(r.length,a.length)}(e.mapValue,t.mapValue);default:throw $u()}}function Zl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return hl(e,t);var n=ql(e),r=ql(t),i=hl(n.seconds,r.seconds);return 0!==i?i:hl(n.nanos,r.nanos)}function ec(e){return tc(e)}function tc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=ql(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Hl(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,kl.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Pn(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=tc(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Pn(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(tc(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):$u();var t,n}function nc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function rc(e){return!!e&&"integerValue"in e}function ic(e){return!!e&&"arrayValue"in e}function ac(e){return!!e&&"nullValue"in e}function oc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function sc(e){return!!e&&"mapValue"in e}function uc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Ll(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=uc(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=uc(e.arrayValue.values[r]);return n}return Object.assign({},e)}function lc(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var cc=p((function e(t,n){c(this,e),this.position=t,this.inclusive=n}));function hc(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?kl.comparator(kl.fromName(o.referenceValue),n.key):Jl(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function fc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Yl(e.position[n],t.position[n]))return!1;return!0}var dc=p((function e(){c(this,e)})),pc=function(e){m(n,e);var t=w(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Jl(t,this.value)):null!==t&&$l(this.value)===$l(t)&&this.matchesComparison(Jl(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return $u()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new _c(e,t,r):"array-contains"===t?new Cc(e,r):"in"===t?new Tc(e,r):"not-in"===t?new Ic(e,r):"array-contains-any"===t?new Nc(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new xc(e,n):new Sc(e,n)}}]),n}(dc),vc=function(e){m(n,e);var t=w(n);function n(e,r){var i;return c(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return p(n,[{key:"matches",value:function(e){return mc(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=Pn(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(dc);function mc(e){return"and"===e.op}function gc(e){return yc(e)&&mc(e)}function yc(e){var t,n=Pn(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof vc)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function kc(e){if(e instanceof pc)return e.field.canonicalString()+e.op.toString()+ec(e.value);var t=e.filters.map((function(e){return kc(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function bc(e,t){return e instanceof pc?function(e,t){return t instanceof pc&&e.op===t.op&&e.field.isEqual(t.field)&&Yl(e.value,t.value)}(e,t):e instanceof vc?function(e,t){return t instanceof vc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&bc(n,t.filters[r])}),!0)}(e,t):void $u()}function wc(e){return e instanceof pc?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(ec(e.value))}(e):e instanceof vc?function(e){return e.op.toString()+" {"+e.getFilters().map(wc).join(" ,")+"}"}(e):"Filter"}var _c=function(e){m(n,e);var t=w(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this,e,r,i)).key=kl.fromName(i.referenceValue),a}return p(n,[{key:"matches",value:function(e){var t=kl.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(pc),xc=function(e){m(n,e);var t=w(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e,"in",r)).keys=Ec("in",r),i}return p(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(pc),Sc=function(e){m(n,e);var t=w(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e,"not-in",r)).keys=Ec("not-in",r),i}return p(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(pc);function Ec(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return kl.fromName(e.referenceValue)}))}var Cc=function(e){m(n,e);var t=w(n);function n(e,r){return c(this,n),t.call(this,e,"array-contains",r)}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return ic(t)&&Xl(t.arrayValue,this.value)}}]),n}(pc),Tc=function(e){m(n,e);var t=w(n);function n(e,r){return c(this,n),t.call(this,e,"in",r)}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Xl(this.value.arrayValue,t)}}]),n}(pc),Ic=function(e){m(n,e);var t=w(n);function n(e,r){return c(this,n),t.call(this,e,"not-in",r)}return p(n,[{key:"matches",value:function(e){if(Xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Xl(this.value.arrayValue,t)}}]),n}(pc),Nc=function(e){m(n,e);var t=w(n);function n(e,r){return c(this,n),t.call(this,e,"array-contains-any",r)}return p(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!ic(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Xl(t.value.arrayValue,e)}))}}]),n}(pc),Pc=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";c(this,e),this.field=t,this.dir=n}));function Rc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Oc=function(){function e(t,n){c(this,e),this.comparator=t,this.root=n||Dc.EMPTY}return p(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Dc.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Dc.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Ac(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Ac(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Ac(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Ac(this.root,e,this.comparator,!0)}}]),e}(),Ac=function(){function e(t,n,r,i){c(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return p(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Dc=function(){function e(t,n,r,i,a){c(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return p(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw $u();if(this.right.isRed())throw $u();var e=this.left.check();if(e!==this.right.check())throw $u();return e+(this.isRed()?0:1)}}]),e}();Dc.EMPTY=null,Dc.RED=!0,Dc.BLACK=!1,Dc.EMPTY=new(function(){function e(){c(this,e),this.size=0}return p(e,[{key:"key",get:function(){throw $u()}},{key:"value",get:function(){throw $u()}},{key:"color",get:function(){throw $u()}},{key:"left",get:function(){throw $u()}},{key:"right",get:function(){throw $u()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Dc(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Lc=function(){function e(t){c(this,e),this.comparator=t,this.data=new Oc(this.comparator)}return p(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Mc(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Mc(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Mc=function(){function e(t){c(this,e),this.iter=t}return p(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var Fc=function(){function e(t){c(this,e),this.fields=t,t.sort(yl.comparator)}return p(e,[{key:"unionWith",value:function(t){var n,r=new Lc(yl.comparator),i=Pn(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(l){i.e(l)}finally{i.f()}var o,s=Pn(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(l){s.e(l)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Pn(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return fl(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),jc=function(){function e(t){c(this,e),this.value=t}return p(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!sc(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uc(t)}},{key:"setAll",value:function(e){var t=this,n=yl.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=uc(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());sc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Yl(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];sc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Ll(t,(function(t,n){return e[t]=n}));var r,i=Pn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(uc(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Uc(e){var t=[];return Ll(e.fields,(function(e,n){var r=new yl([e]);if(sc(n)){var i=Uc(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Pn(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new Fc(t)}var Vc=function(){function e(t,n,r,i,a,o,s){c(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}return p(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(pl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=jc.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=jc.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=pl.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,pl.min(),pl.min(),pl.min(),jc.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,pl.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,pl.min(),pl.min(),jc.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,pl.min(),pl.min(),jc.empty(),2)}}]),e}(),zc=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;c(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.ft=null}));function qc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new zc(e,t,n,r,i,a,o)}function Bc(e){var t=Xu(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return kc(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Fl(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return ec(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return ec(e)})).join(",")),t.ft=n}return t.ft}function Hc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Rc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!bc(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!fc(e.startAt,t.startAt)&&fc(e.endAt,t.endAt)}function Wc(e){return kl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Gc=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;c(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.dt=null,this._t=null,this.startAt,this.endAt}));function Kc(e,t,n,r,i,a,o,s){return new Gc(e,t,n,r,i,a,o,s)}function Qc(e){return new Gc(e)}function $c(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Yc(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Xc(e){var t,n=Pn(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Jc(e){return null!==e.collectionGroup}function Zc(e){var t=Xu(e);if(null===t.dt){t.dt=[];var n=Xc(t),r=Yc(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new Pc(n)),t.dt.push(new Pc(yl.keyField(),"asc"));else{var i,a=!1,o=Pn(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.dt.push(s),s.field.isKeyField()&&(a=!0)}}catch(l){o.e(l)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new Pc(yl.keyField(),u))}}}return t.dt}function eh(e){var t=Xu(e);if(!t._t)if("F"===t.limitType)t._t=qc(t.path,t.collectionGroup,Zc(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Pn(Zc(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Pc(a.field,o))}}catch(l){i.e(l)}finally{i.f()}var s=t.endAt?new cc(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new cc(t.startAt.position,t.startAt.inclusive):null;t._t=qc(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t._t}function th(e,t){t.getFirstInequalityField(),Xc(e);var n=e.filters.concat([t]);return new Gc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function nh(e,t,n){return new Gc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function rh(e,t){return Hc(eh(e),eh(t))&&e.limitType===t.limitType}function ih(e){return"".concat(Bc(eh(e)),"|lt:").concat(e.limitType)}function ah(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return wc(e)})).join(", "),"]")),Fl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return ec(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return ec(e)})).join(",")),"Target(".concat(t,")")}(eh(e)),"; limitType=").concat(e.limitType,")")}function oh(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):kl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Pn(Zc(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Pn(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=hc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Zc(e),t))&&!(e.endAt&&!function(e,t,n){var r=hc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Zc(e),t))}(e,t)}function sh(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function uh(e){return function(t,n){var r,i=!1,a=Pn(Zc(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=lh(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function lh(e,t,n){var r=e.field.isKeyField()?kl.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Jl(r,i):$u()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return $u()}}function ch(e,t){if(e.wt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jl(t)?"-0":t}}function hh(e){return{integerValue:""+e}}function fh(e,t){return Ul(t)?hh(t):ch(e,t)}var dh=p((function e(){c(this,e),this._=void 0}));function ph(e,t,n){return e instanceof gh?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof yh?kh(e,t):e instanceof bh?wh(e,t):function(e,t){var n=mh(e,t),r=xh(n)+xh(e.gt);return rc(n)&&rc(e.gt)?hh(r):ch(e.yt,r)}(e,t)}function vh(e,t,n){return e instanceof yh?kh(e,t):e instanceof bh?wh(e,t):n}function mh(e,t){return e instanceof _h?rc(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var gh=function(e){m(n,e);var t=w(n);function n(){return c(this,n),t.apply(this,arguments)}return p(n)}(dh),yh=function(e){m(n,e);var t=w(n);function n(e){var r;return c(this,n),(r=t.call(this)).elements=e,r}return p(n)}(dh);function kh(e,t){var n,r=Sh(t),i=Pn(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Yl(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var bh=function(e){m(n,e);var t=w(n);function n(e){var r;return c(this,n),(r=t.call(this)).elements=e,r}return p(n)}(dh);function wh(e,t){var n,r=Sh(t),i=Pn(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Yl(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var _h=function(e){m(n,e);var t=w(n);function n(e,r){var i;return c(this,n),(i=t.call(this)).yt=e,i.gt=r,i}return p(n)}(dh);function xh(e){return Bl(e.integerValue||e.doubleValue)}function Sh(e){return ic(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Eh=p((function e(t,n){c(this,e),this.version=t,this.transformResults=n})),Ch=function(){function e(t,n){c(this,e),this.updateTime=t,this.exists=n}return p(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Th(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Ih=p((function e(){c(this,e)}));function Nh(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new zh(e.key,Ch.none()):new Dh(e.key,e.data,Ch.none());var n,r=e.data,i=jc.empty(),a=new Lc(yl.comparator),o=Pn(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(l){o.e(l)}finally{o.f()}return new Lh(e.key,i,new Fc(a.toArray()),Ch.none())}function Ph(e,t,n){e instanceof Dh?function(e,t,n){var r=e.value.clone(),i=Fh(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Lh?function(e,t,n){if(Th(e.precondition,t)){var r=Fh(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Mh(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Rh(e,t,n,r){return e instanceof Dh?function(e,t,n,r){if(!Th(e.precondition,t))return n;var i=e.value.clone(),a=jh(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Lh?function(e,t,n,r){if(!Th(e.precondition,t))return n;var i=jh(e.fieldTransforms,r,t),a=t.data;return a.setAll(Mh(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Th(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Oh(e,t){var n,r=null,i=Pn(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=mh(a.transform,o||null);null!=s&&(null===r&&(r=jc.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function Ah(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&fl(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof yh&&t instanceof yh||e instanceof bh&&t instanceof bh?fl(e.elements,t.elements,Yl):e instanceof _h&&t instanceof _h?Yl(e.gt,t.gt):e instanceof gh&&t instanceof gh}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Dh=function(e){m(n,e);var t=w(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return c(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return p(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Ih),Lh=function(e){m(n,e);var t=w(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return c(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return p(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Ih);function Mh(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Fh(e,t,n){var r=new Map;Yu(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,vh(o,s,n[i]))}return r}function jh(e,t,n){var r,i=new Map,a=Pn(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,ph(s,u,t))}}catch(l){a.e(l)}finally{a.f()}return i}var Uh,Vh,zh=function(e){m(n,e);var t=w(n);function n(e,r){var i;return c(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return p(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Ih),qh=function(e){m(n,e);var t=w(n);function n(e,r){var i;return c(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return p(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Ih),Bh=p((function e(t){c(this,e),this.count=t}));function Hh(e){switch(e){default:return $u();case Ju.CANCELLED:case Ju.UNKNOWN:case Ju.DEADLINE_EXCEEDED:case Ju.RESOURCE_EXHAUSTED:case Ju.INTERNAL:case Ju.UNAVAILABLE:case Ju.UNAUTHENTICATED:return!1;case Ju.INVALID_ARGUMENT:case Ju.NOT_FOUND:case Ju.ALREADY_EXISTS:case Ju.PERMISSION_DENIED:case Ju.FAILED_PRECONDITION:case Ju.ABORTED:case Ju.OUT_OF_RANGE:case Ju.UNIMPLEMENTED:case Ju.DATA_LOSS:return!0}}function Wh(e){if(void 0===e)return Gu("GRPC error has no .code"),Ju.UNKNOWN;switch(e){case Uh.OK:return Ju.OK;case Uh.CANCELLED:return Ju.CANCELLED;case Uh.UNKNOWN:return Ju.UNKNOWN;case Uh.DEADLINE_EXCEEDED:return Ju.DEADLINE_EXCEEDED;case Uh.RESOURCE_EXHAUSTED:return Ju.RESOURCE_EXHAUSTED;case Uh.INTERNAL:return Ju.INTERNAL;case Uh.UNAVAILABLE:return Ju.UNAVAILABLE;case Uh.UNAUTHENTICATED:return Ju.UNAUTHENTICATED;case Uh.INVALID_ARGUMENT:return Ju.INVALID_ARGUMENT;case Uh.NOT_FOUND:return Ju.NOT_FOUND;case Uh.ALREADY_EXISTS:return Ju.ALREADY_EXISTS;case Uh.PERMISSION_DENIED:return Ju.PERMISSION_DENIED;case Uh.FAILED_PRECONDITION:return Ju.FAILED_PRECONDITION;case Uh.ABORTED:return Ju.ABORTED;case Uh.OUT_OF_RANGE:return Ju.OUT_OF_RANGE;case Uh.UNIMPLEMENTED:return Ju.UNIMPLEMENTED;case Uh.DATA_LOSS:return Ju.DATA_LOSS;default:return $u()}}(Vh=Uh||(Uh={}))[Vh.OK=0]="OK",Vh[Vh.CANCELLED=1]="CANCELLED",Vh[Vh.UNKNOWN=2]="UNKNOWN",Vh[Vh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vh[Vh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vh[Vh.NOT_FOUND=5]="NOT_FOUND",Vh[Vh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vh[Vh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vh[Vh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vh[Vh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vh[Vh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vh[Vh.ABORTED=10]="ABORTED",Vh[Vh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vh[Vh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vh[Vh.INTERNAL=13]="INTERNAL",Vh[Vh.UNAVAILABLE=14]="UNAVAILABLE",Vh[Vh.DATA_LOSS=15]="DATA_LOSS";var Gh=function(){function e(t,n){c(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return p(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Pn(n);try{for(i.s();!(r=i.n()).done;){var a=u(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(l){i.e(l)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Ll(this.inner,(function(t,n){var r,i=Pn(n);try{for(i.s();!(r=i.n()).done;){var a=u(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(l){i.e(l)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Ml(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Kh=new Oc(kl.comparator);function Qh(){return Kh}var $h=new Oc(kl.comparator);function Yh(){for(var e=$h,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Xh(e){var t=$h;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Jh(){return ef()}function Zh(){return ef()}function ef(){return new Gh((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var tf=new Oc(kl.comparator),nf=new Lc(kl.comparator);function rf(){for(var e=nf,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var af=new Lc(hl);function of(){return af}var sf=function(){function e(t,n,r,i,a){c(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return p(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,uf.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(pl.min(),i,of(),Qh(),rf())}}]),e}(),uf=function(){function e(t,n,r,i,a){c(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return p(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,rf(),rf(),rf())}}]),e}(),lf=p((function e(t,n,r,i){c(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i})),cf=p((function e(t,n){c(this,e),this.targetId=t,this.Et=n})),hf=p((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vl.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;c(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),ff=function(){function e(){c(this,e),this.At=0,this.Rt=vf(),this.bt=Vl.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}return p(e,[{key:"current",get:function(){return this.Pt}},{key:"resumeToken",get:function(){return this.bt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.vt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}},{key:"Ct",value:function(){var e=rf(),t=rf(),n=rf();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:$u()}})),new uf(this.bt,this.Pt,e,t,n)}},{key:"xt",value:function(){this.vt=!1,this.Rt=vf()}},{key:"Nt",value:function(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.vt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"Mt",value:function(){this.At-=1}},{key:"Ft",value:function(){this.vt=!0,this.Pt=!0}}]),e}(),df=function(){function e(t){c(this,e),this.$t=t,this.Bt=new Map,this.Lt=Qh(),this.qt=pf(),this.Ut=new Lc(hl)}return p(e,[{key:"Kt",value:function(e){var t,n=Pn(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(s){n.e(s)}finally{n.f()}var i,a=Pn(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(s){a.e(s)}finally{a.f()}}},{key:"jt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Wt(n);switch(e.state){case 0:t.zt(n)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||t.removeTarget(n);break;case 3:t.zt(n)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:t.zt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:$u()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.zt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t=e.targetId,n=e.Et.count,r=this.Yt(t);if(r){var i=r.target;if(Wc(i))if(0===n){var a=new kl(i.path);this.Qt(t,a,Vc.newNoDocument(a,pl.min()))}else Yu(1===n);else this.Xt(t)!==n&&(this.Ht(t),this.Ut=this.Ut.add(t))}}},{key:"Zt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&Wc(a.target)){var o=new kl(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,Vc.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=rf();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new sf(e,n,this.Ut,this.Lt,r);return this.Lt=Qh(),this.qt=pf(),this.Ut=new Lc(hl),i}},{key:"Gt",value:function(e,t){if(this.zt(e)){var n=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.zt(e)){var r=this.Wt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Xt",value:function(e){var t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.Wt(e).Ot()}},{key:"Wt",value:function(e){var t=this.Bt.get(e);return t||(t=new ff,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new Lc(hl),this.qt=this.qt.insert(e,t)),t}},{key:"zt",value:function(e){var t=null!==this.Yt(e);return t||Wu("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new ff),this.$t.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}]),e}();function pf(){return new Oc(kl.comparator)}function vf(){return new Oc(kl.comparator)}var mf={asc:"ASCENDING",desc:"DESCENDING"},gf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yf={and:"AND",or:"OR"},kf=p((function e(t,n){c(this,e),this.databaseId=t,this.wt=n}));function bf(e,t){return e.wt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function wf(e,t){return e.wt?t.toBase64():t.toUint8Array()}function _f(e,t){return bf(e,t.toTimestamp())}function xf(e){return Yu(!!e),pl.fromTimestamp(function(e){var t=ql(e);return new dl(t.seconds,t.nanos)}(e))}function Sf(e,t){return function(e){return new ml(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Ef(e){var t=ml.fromString(e);return Yu(Wf(t)),t}function Cf(e,t){return Sf(e.databaseId,t.path)}function Tf(e,t){var n=Ef(t);if(n.get(1)!==e.databaseId.projectId)throw new Zu(Ju.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Zu(Ju.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new kl(Rf(n))}function If(e,t){return Sf(e.databaseId,t)}function Nf(e){var t=Ef(e);return 4===t.length?ml.emptyPath():Rf(t)}function Pf(e){return new ml(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Rf(e){return Yu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Of(e,t,n){return{name:Cf(e,t),fields:n.value.mapValue.fields}}function Af(e,t){var n;if(t instanceof Dh)n={update:Of(e,t.key,t.value)};else if(t instanceof zh)n={delete:Cf(e,t.key)};else if(t instanceof Lh)n={update:Of(e,t.key,t.data),updateMask:Hf(t.fieldMask)};else{if(!(t instanceof qh))return $u();n={verify:Cf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof gh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof yh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof bh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof _h)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw $u()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:_f(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:$u()}(e,t.precondition)),n}function Df(e,t){return{documents:[If(e,t.path)]}}function Lf(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=If(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=If(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Bf(vc.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:zf(e.field),direction:jf(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.wt||Fl(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Mf(e){var t=Nf(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Yu(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Ff(e);return t instanceof vc&&gc(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Pc(qf(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return Fl(t="object"==typeof e?e.value:e)?null:t}(n.limit));var l=null;n.startAt&&(l=function(e){var t=!!e.before,n=e.values||[];return new cc(n,t)}(n.startAt));var c=null;return n.endAt&&(c=function(e){var t=!e.before,n=e.values||[];return new cc(n,t)}(n.endAt)),Kc(t,i,s,o,u,"F",l,c)}function Ff(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=qf(e.unaryFilter.field);return pc.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=qf(e.unaryFilter.field);return pc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=qf(e.unaryFilter.field);return pc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=qf(e.unaryFilter.field);return pc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return $u()}}(e):void 0!==e.fieldFilter?function(e){return pc.create(qf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $u()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return vc.create(e.compositeFilter.filters.map((function(e){return Ff(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return $u()}}(e.compositeFilter.op))}(e):$u()}function jf(e){return mf[e]}function Uf(e){return gf[e]}function Vf(e){return yf[e]}function zf(e){return{fieldPath:e.canonicalString()}}function qf(e){return yl.fromServerFormat(e.fieldPath)}function Bf(e){return e instanceof pc?function(e){if("=="===e.op){if(oc(e.value))return{unaryFilter:{field:zf(e.field),op:"IS_NAN"}};if(ac(e.value))return{unaryFilter:{field:zf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(oc(e.value))return{unaryFilter:{field:zf(e.field),op:"IS_NOT_NAN"}};if(ac(e.value))return{unaryFilter:{field:zf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zf(e.field),op:Uf(e.op),value:e.value}}}(e):e instanceof vc?function(e){var t=e.getFilters().map((function(e){return Bf(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Vf(e.op),filters:t}}}(e):$u()}function Hf(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Wf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Gf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Kf=([].concat(l(Gf),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),Qf=Kf;[].concat(Qf,["indexConfiguration","indexState","indexEntries"]);var $f=function(){function e(t,n,r,i){c(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return p(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Ph(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Pn(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Rh(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=Pn(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=Rh(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Zh();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=Nh(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(pl.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),rf())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&fl(this.mutations,e.mutations,(function(e,t){return Ah(e,t)}))&&fl(this.baseMutations,e.baseMutations,(function(e,t){return Ah(e,t)}))}}]),e}(),Yf=function(){function e(t,n,r,i){c(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return p(e,null,[{key:"from",value:function(t,n,r){Yu(t.mutations.length===r.length);for(var i=tf,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Xf=function(){function e(t,n){c(this,e),this.largestBatchId=t,this.mutation=n}return p(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Jf=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:pl.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:pl.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Vl.EMPTY_BYTE_STRING;c(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return p(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Zf=p((function e(t){c(this,e),this.ie=t}));function ed(e){var t=Mf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?nh(t,t.limit,"L"):t}var td=function(){function e(){c(this,e)}return p(e,[{key:"ue",value:function(e,t){this.ce(e,t),t.ae()}},{key:"ce",value:function(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Bl(e.integerValue));else if("doubleValue"in e){var n=Bl(e.doubleValue);isNaN(n)?this.he(t,13):(this.he(t,15),jl(n)?t.le(0):t.le(n))}else if("timestampValue"in e){var r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe("".concat(r.seconds||"")),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Hl(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.he(t,45),t.le(i.latitude||0),t.le(i.longitude||0)}else"mapValue"in e?lc(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):$u()}},{key:"de",value:function(e,t){this.he(t,25),this.pe(e,t)}},{key:"pe",value:function(e,t){t.fe(e)}},{key:"ge",value:function(e,t){var n=e.fields||{};this.he(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.de(a,t),this.ce(n[a],t)}}},{key:"ye",value:function(e,t){var n=e.values||[];this.he(t,50);var r,i=Pn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ce(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"me",value:function(e,t){var n=this;this.he(t,37),kl.fromName(e).path.forEach((function(e){n.he(t,60),n.pe(e,t)}))}},{key:"he",value:function(e,t){e.le(t)}},{key:"_e",value:function(e){e.le(2)}}]),e}();td.Ie=new td;var nd=function(){function e(){c(this,e),this.Je=new rd}return p(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Je.add(t),Nl.resolve()}},{key:"getCollectionParents",value:function(e,t){return Nl.resolve(this.Je.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Nl.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Nl.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Nl.resolve(null)}},{key:"getIndexType",value:function(e,t){return Nl.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Nl.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Nl.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Nl.resolve(xl.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Nl.resolve(xl.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Nl.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Nl.resolve()}}]),e}(),rd=function(){function e(){c(this,e),this.index={}}return p(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Lc(ml.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Lc(ml.comparator)).toArray()}}]),e}();new Uint8Array(0);var id=function(){function e(t,n,r){c(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return p(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();id.DEFAULT_COLLECTION_PERCENTILE=10,id.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,id.DEFAULT=new id(41943040,id.DEFAULT_COLLECTION_PERCENTILE,id.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),id.DISABLED=new id(-1,0,0);var ad=function(){function e(t){c(this,e),this.bn=t}return p(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}();var od=function(){function e(){c(this,e),this.changes=new Gh((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return p(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Vc.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Nl.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var sd=p((function e(t,n){c(this,e),this.overlayedDocument=t,this.mutatedFields=n})),ud=function(){function e(t,n,r,i){c(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return p(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Rh(r.mutation,e,Fc.empty(),dl.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,rf()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rf(),i=Jh();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Yh();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Jh();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,rf())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Qh(),a=ef(),o=ef();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Lh)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),Rh(o.mutation,t,o.mutation.getFieldMask(),dl.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new sd(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=ef(),i=new Oc((function(e,t){return e-t})),a=rf();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Pn(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Fc.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||rf()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,l=i.value,c=Zh();l.forEach((function(e){if(!a.has(e)){var n=Nh(t.get(e),r.get(e));null!==n&&c.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,c))};s.hasNext();)u();return Nl.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return kl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Jc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Nl.resolve(Jh()),s=-1,u=a;return o.next((function(t){return Nl.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?Nl.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,rf())})).next((function(e){return{batchId:s,changes:Xh(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new kl(t)).next((function(e){var t=Yh();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Yh();return this.indexManager.getCollectionParents(e,i).next((function(o){return Nl.forEach(o,(function(o){var s=function(e,t){return new Gc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,Vc.newInvalidDocument(n)))}));var n=Yh();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&Rh(a.mutation,i,Fc.empty(),dl.now()),oh(t,i)&&(n=n.insert(r,i))})),n}))}}]),e}(),ld=function(){function e(t){c(this,e),this.yt=t,this.Zn=new Map,this.ts=new Map}return p(e,[{key:"getBundleMetadata",value:function(e,t){return Nl.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:xf(n.createTime)}),Nl.resolve()}},{key:"getNamedQuery",value:function(e,t){return Nl.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:ed(e.bundledQuery),readTime:xf(e.readTime)}}(t)),Nl.resolve()}}]),e}(),cd=function(){function e(){c(this,e),this.overlays=new Oc(kl.comparator),this.es=new Map}return p(e,[{key:"getOverlay",value:function(e,t){return Nl.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Jh();return Nl.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.oe(e,t,i)})),Nl.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),Nl.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Jh(),i=t.length+1,a=new kl(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return Nl.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Oc((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=Jh(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=Jh(),l=i.getIterator();l.hasNext()&&(l.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return Nl.resolve(u)}},{key:"oe",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Xf(t,n));var a=this.es.get(t);void 0===a&&(a=rf(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),hd=function(){function e(){c(this,e),this.ns=new Lc(fd.ss),this.rs=new Lc(fd.os)}return p(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new fd(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new fd(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new kl(new ml([])),r=new fd(n,e),i=new fd(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new kl(new ml([])),n=new fd(t,e),r=new fd(t,e+1),i=rf();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new fd(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),fd=function(){function e(t,n){c(this,e),this.key=t,this._s=n}return p(e,null,[{key:"ss",value:function(e,t){return kl.comparator(e.key,t.key)||hl(e._s,t._s)}},{key:"os",value:function(e,t){return hl(e._s,t._s)||kl.comparator(e.key,t.key)}}]),e}(),dd=function(){function e(t,n){c(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Lc(fd.ss)}return p(e,[{key:"checkEmpty",value:function(e){return Nl.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new $f(i,t,n,r);this.mutationQueue.push(a);var o,s=Pn(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.gs=this.gs.add(new fd(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(l){s.e(l)}finally{s.f()}return Nl.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Nl.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return Nl.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Nl.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return Nl.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new fd(t,0),i=new fd(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),Nl.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Lc(hl);return t.forEach((function(e){var t=new fd(e,0),i=new fd(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),Nl.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;kl.isDocumentKey(i)||(i=i.child(""));var a=new fd(new kl(i),0),o=new Lc(hl);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),Nl.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Yu(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return Nl.forEach(t.mutations,(function(i){var a=new fd(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new fd(t,0),r=this.gs.firstAfterOrEqual(n);return Nl.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Nl.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),pd=function(){function e(t){c(this,e),this.Es=t,this.docs=new Oc(kl.comparator),this.size=0}return p(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Nl.resolve(n?n.document.mutableCopy():Vc.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Qh();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Vc.newInvalidDocument(e))})),Nl.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Qh(),i=new kl(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||Sl(_l(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return Nl.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){$u()}},{key:"As",value:function(e,t){return Nl.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new vd(this)}},{key:"getSize",value:function(e){return Nl.resolve(this.size)}}]),e}(),vd=function(e){m(n,e);var t=w(n);function n(e){var r;return c(this,n),(r=t.call(this)).Yn=e,r}return p(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),Nl.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(od),md=function(){function e(t){c(this,e),this.persistence=t,this.Rs=new Gh((function(e){return Bc(e)}),Hc),this.lastRemoteSnapshotVersion=pl.min(),this.highestTargetId=0,this.bs=0,this.Ps=new hd,this.targetCount=0,this.vs=ad.Pn()}return p(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),Nl.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Nl.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Nl.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),Nl.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),Nl.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new ad(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,Nl.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),Nl.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Nl.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Nl.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Nl.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return Nl.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),Nl.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Nl.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),Nl.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return Nl.resolve(n)}},{key:"containsKey",value:function(e,t){return Nl.resolve(this.Ps.containsKey(t))}}]),e}(),gd=function(){function e(t,n){var r=this;c(this,e),this.Vs={},this.overlays={},this.Ss=new Rl(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new md(this),this.indexManager=new nd,this.remoteDocumentCache=new pd((function(e){return r.referenceDelegate.xs(e)})),this.yt=new Zf(n),this.Ns=new ld(this.yt)}return p(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new cd,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new dd(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Wu("MemoryPersistence","Starting transaction:",e);var i=new yd(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ms",value:function(e,t){return Nl.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),yd=function(e){m(n,e);var t=w(n);function n(e){var r;return c(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return p(n)}(Cl),kd=function(){function e(t){c(this,e),this.persistence=t,this.Fs=new hd,this.$s=null}return p(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw $u()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),Nl.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),Nl.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),Nl.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Nl.forEach(this.Ls,(function(r){var i=kl.fromPath(r);return t.qs(e,i).next((function(e){e||n.removeEntry(i,pl.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.qs(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"qs",value:function(e,t){var n=this;return Nl.or([function(){return Nl.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}();var bd=function(){function e(t,n,r,i){c(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return p(e,null,[{key:"Ci",value:function(t,n){var r,i=rf(),a=rf(),o=Pn(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),wd=function(){function e(){c(this,e),this.xi=!1}return p(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Mi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if($c(t))return Nl.resolve(null);var r=eh(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=nh(t,null,"F"),r=eh(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=rf.apply(void 0,l(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,nh(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return $c(t)||r.isEqual(pl.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(Hu()<=Rr.DEBUG&&Wu("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ah(t)),i.Bi(e,o,t,wl(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new Lc(uh(e));return t.forEach((function(t,r){oh(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return Hu()<=Rr.DEBUG&&Wu("QueryEngine","Using full collection scan to execute query:",ah(t)),this.Ni.getDocumentsMatchingQuery(e,t,xl.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),_d=function(){function e(t,n,r,i){c(this,e),this.persistence=t,this.Li=n,this.yt=i,this.qi=new Oc(hl),this.Ui=new Gh((function(e){return Bc(e)}),Hc),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return p(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ud(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qi)}))}}]),e}();function xd(e,t,n,r){return new _d(e,t,n,r)}function Sd(e,t){return Ed.apply(this,arguments)}function Ed(){return Ed=An(Rn().mark((function e(t,n){var r;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xu(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=rf(),u=Pn(t);try{for(u.s();!(i=u.n()).done;){var l=i.value;a.push(l.batchId);var c,h=Pn(l.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value;s=s.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=Pn(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,g=Pn(v.mutations);try{for(g.s();!(m=g.n()).done;){var y=m.value;s=s.add(y.key)}}catch(k){g.e(k)}finally{g.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Ed.apply(this,arguments)}function Cd(e,t){var n=Xu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Nl.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Yu(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=rf(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Td(e){var t=Xu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function Id(e,t){var n=Xu(e),r=t.snapshotVersion,i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,s)})));var l=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?l=l.withResumeToken(Vl.EMPTY_BYTE_STRING,pl.min()).withLastLimboFreeSnapshotVersion(pl.min()):a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)),i=i.insert(s,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,l,a)&&o.push(n.Cs.updateTargetData(e,l))}}));var s=Qh(),u=rf();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Nd(e,a,t.documentUpdates).next((function(e){s=e.Wi,u=e.zi}))),!r.isEqual(pl.min())){var l=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(l)}return Nl.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.qi=i,e}))}function Nd(e,t,n){var r=rf(),i=rf();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Qh();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(pl.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Wu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function Pd(e,t){var n=Xu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Rd(e,t){var n=Xu(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,Nl.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new Jf(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qi=n.qi.insert(e.targetId,e),n.Ui.set(t,e.targetId)),e}))}function Od(e,t,n){return Ad.apply(this,arguments)}function Ad(){return Ad=An(Rn().mark((function e(t,n,r){var i,a,o;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Xu(t),a=i.qi.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Pl(e.t1)){e.next=12;break}throw e.t1;case 12:Wu("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qi=i.qi.remove(n),i.Ui.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Ad.apply(this,arguments)}function Dd(e,t,n){var r=Xu(e),i=pl.min(),a=rf();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Xu(e),i=r.Ui.get(n);return void 0!==i?Nl.resolve(r.qi.get(i)):r.Cs.getTargetData(t,n)}(r,e,eh(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:pl.min(),n?a:rf())})).next((function(e){return Ld(r,sh(t),e),{documents:e,Hi:a}}))}))}function Ld(e,t,n){var r=e.Ki.get(t)||pl.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}var Md=function(){function e(){c(this,e),this.activeTargetIds=of()}return p(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Fd=function(){function e(){c(this,e),this.Lr=new Md,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return p(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new Md,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),jd=function(){function e(){c(this,e)}return p(e,[{key:"Ur",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Ud=function(){function e(){var t=this;c(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return p(e,[{key:"Ur",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){Wu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Pn(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){Wu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Pn(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Vd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},zd=function(){function e(t){c(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return p(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),qd=function(e){m(n,e);var t=w(n);function n(e){var r;return c(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return p(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Uu;o.setWithCredentials(!0),o.listenOnce(Du.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Au.NO_ERROR:var t=o.getResponseJson();Wu("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Au.TIMEOUT:Wu("Connection",'RPC "'+e+'" timed out'),a(new Zu(Ju.DEADLINE_EXCEEDED,"Request time out"));break;case Au.HTTP_ERROR:var n=o.getStatus();if(Wu("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ju).indexOf(t)>=0?t:Ju.UNKNOWN}(s.status);a(new Zu(u,s.message))}else a(new Zu(Ju.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Zu(Ju.UNAVAILABLE,"Connection failed."));break;default:$u()}}finally{Wu("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Ru(),a=Ou(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Fu({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var s=r.join("");Wu("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),l=!1,c=!1,h=new zd({Hr:function(e){c?Wu("Connection","Not sending because WebChannel is closed:",e):(l||(Wu("Connection","Opening WebChannel transport."),u.open(),l=!0),Wu("Connection","WebChannel sending:",e),u.send(e))},Jr:function(){return u.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,ju.EventType.OPEN,(function(){c||Wu("Connection","WebChannel transport opened.")})),f(u,ju.EventType.CLOSE,(function(){c||(c=!0,Wu("Connection","WebChannel transport closed"),h.io())})),f(u,ju.EventType.ERROR,(function(e){c||(c=!0,Ku("Connection","WebChannel transport errored:",e),h.io(new Zu(Ju.UNAVAILABLE,"The operation could not be completed")))})),f(u,ju.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];Yu(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Wu("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Uh[e];if(void 0!==t)return Wh(t)}(a),s=i.message;void 0===o&&(o=Ju.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),c=!0,h.io(new Zu(o,s)),u.close()}else Wu("Connection","WebChannel received:",n),h.ro(n)}})),f(a,Lu.STAT_EVENT,(function(e){e.stat===Mu.PROXY?Wu("Connection","Detected buffering proxy"):e.stat===Mu.NOPROXY&&Wu("Connection","Detected no buffering proxy")})),setTimeout((function(){h.so()}),0),h}}]),n}(function(){function e(t){c(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return p(e,[{key:"co",get:function(){return!1}},{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);Wu("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return Wu("RestConnection","Received: ",e),e}),(function(t){throw Ku("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+qu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=Vd[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function Bd(){return"undefined"!=typeof document?document:null}function Hd(e){return new kf(e,!0)}var Wd=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;c(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return p(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&Wu("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),Gd=function(){function e(t,n,r,i,a,o,s,u){c(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Wd(t,n)}return p(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=An(Rn().mark((function e(){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=An(Rn().mark((function e(){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"qo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=An(Rn().mark((function e(t,n){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.qo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===Ju.RESOURCE_EXHAUSTED?(Gu(n.toString()),Gu("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===Ju.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Uo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=u(t,2),i=r[0],a=r[1];e.So===n&&e.Go(i,a)}),(function(n){t((function(){var t=new Zu(Ju.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.xo.Ro(An(Rn().mark((function t(){return Rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return Wu("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(Wu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Kd=function(e){m(n,e);var t=w(n);function n(e,r,i,a,o,s){var u;return c(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).yt=o,u}return p(n,[{key:"jo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:$u()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.wt?(Yu(void 0===t||"string"==typeof t),Vl.fromBase64String(t||"")):(Yu(void 0===t||t instanceof Uint8Array),Vl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?Ju.UNKNOWN:Wh(e.code);return new Zu(t,e.message||"")}(o);n=new hf(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var l=Tf(e,u.document.name),c=xf(u.document.updateTime),h=u.document.createTime?xf(u.document.createTime):pl.min(),f=new jc({mapValue:{fields:u.document.fields}}),d=Vc.newFoundDocument(l,c,h,f),p=u.targetIds||[],v=u.removedTargetIds||[];n=new lf(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var g=Tf(e,m.document),y=m.readTime?xf(m.readTime):pl.min(),k=Vc.newNoDocument(g,y),b=m.removedTargetIds||[];n=new lf([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=Tf(e,w.document),x=w.removedTargetIds||[];n=new lf([],x,_,null)}else{if(!("filter"in t))return $u();t.filter;var S=t.filter;S.targetId;var E=S.count||0,C=new Bh(E),T=S.targetId;n=new cf(T,C)}return n}(this.yt,e),n=function(e){if(!("targetChange"in e))return pl.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?pl.min():t.readTime?xf(t.readTime):pl.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=Pf(this.yt),t.addTarget=function(e,t){var n,r=t.target;return(n=Wc(r)?{documents:Df(e,r)}:{query:Lf(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=wf(e,t.resumeToken):t.snapshotVersion.compareTo(pl.min())>0&&(n.readTime=bf(e,t.snapshotVersion.toTimestamp())),n}(this.yt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return $u()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.yt,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=Pf(this.yt),t.removeTarget=e,this.Bo(t)}}]),n}(Gd),Qd=function(e){m(n,e);var t=w(n);function n(e,r,i,a,o,s){var u;return c(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).yt=o,u.Jo=!1,u}return p(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,Nn(g(n.prototype),"start",this).call(this)}},{key:"Uo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Yu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(Yu(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?xf(e.updateTime):xf(t);return n.isEqual(pl.min())&&(n=xf(t)),new Eh(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=xf(e.commitTime);return this.listener.Zo(n,t)}return Yu(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=Pf(this.yt),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Af(t.yt,e)}))};this.Bo(n)}}]),n}(Gd),$d=function(e){m(n,e);var t=w(n);function n(e,r,i,a){var o;return c(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.yt=a,o.nu=!1,o}return p(n,[{key:"su",value:function(){if(this.nu)throw new Zu(Ju.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=u(i,2),o=a[0],s=a[1];return r.connection.ao(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ju.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Zu(Ju.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=u(a,2),s=o[0],l=o[1];return i.connection._o(e,t,n,s,l,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ju.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Zu(Ju.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return p((function e(){c(this,e)}))}());var Yd=function(){function e(t,n){c(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return p(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(Gu(t),this.ou=!1):Wu("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),Xd=p((function e(t,n,r,i,a){var o=this;c(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur((function(e){r.enqueueAndForget(An(Rn().mark((function e(){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=up(o),!e.t0){e.next=5;break}return Wu("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=An(Rn().mark((function e(t){var n;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Xu(t))._u.add(4),e.next=4,ep(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,Jd(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new Yd(r,i)}));function Jd(e){return Zd.apply(this,arguments)}function Zd(){return Zd=An(Rn().mark((function e(t){var n,r,i;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!up(t)){e.next=18;break}n=Pn(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Zd.apply(this,arguments)}function ep(e){return tp.apply(this,arguments)}function tp(){return tp=An(Rn().mark((function e(t){var n,r,i;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Pn(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),tp.apply(this,arguments)}function np(e,t){var n=Xu(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),sp(n)?op(n):Fp(n).ko()&&ip(n,t))}function rp(e,t){var n=Xu(e),r=Fp(n);n.du.delete(t),r.ko()&&ap(n,t),0===n.du.size&&(r.ko()?r.Fo():up(n)&&n.gu.set("Unknown"))}function ip(e,t){e.yu.Ot(t.targetId),Fp(e).zo(t)}function ap(e,t){e.yu.Ot(t),Fp(e).Ho(t)}function op(e){e.yu=new df({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.du.get(t)||null}}),Fp(e).start(),e.gu.uu()}function sp(e){return up(e)&&!Fp(e).No()&&e.du.size>0}function up(e){return 0===Xu(e)._u.size}function lp(e){e.yu=void 0}function cp(e){return hp.apply(this,arguments)}function hp(){return hp=An(Rn().mark((function e(t){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){ip(t,e)}));case 1:case"end":return e.stop()}}),e)}))),hp.apply(this,arguments)}function fp(e,t){return dp.apply(this,arguments)}function dp(){return dp=An(Rn().mark((function e(t,n){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:lp(t),sp(t)?(t.gu.hu(n),op(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),dp.apply(this,arguments)}function pp(e,t,n){return vp.apply(this,arguments)}function vp(){return vp=An(Rn().mark((function e(t,n,r){var i;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof hf&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=An(Rn().mark((function e(t,n){var r,i,a,o;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Pn(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Wu("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,mp(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof lf?t.yu.Kt(n):n instanceof cf?t.yu.Jt(n):t.yu.jt(n),r.isEqual(pl.min())){e.next=29;break}return e.prev=14,e.next=17,Td(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.Zt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(Vl.EMPTY_BYTE_STRING,n.snapshotVersion)),ap(e,t);var r=new Jf(n.target,t,1,n.sequenceNumber);ip(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Wu("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,mp(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),vp.apply(this,arguments)}function mp(e,t,n){return gp.apply(this,arguments)}function gp(){return gp=An(Rn().mark((function e(t,n,r){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pl(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,ep(t);case 5:t.gu.set("Offline"),r||(r=function(){return Td(t.localStore)}),t.asyncQueue.enqueueRetryable(An(Rn().mark((function e(){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wu("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,Jd(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),gp.apply(this,arguments)}function yp(e,t){return t().catch((function(n){return mp(e,n,t)}))}function kp(e){return bp.apply(this,arguments)}function bp(){return bp=An(Rn().mark((function e(t){var n,r,i,a;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Xu(t),r=jp(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!wp(n)){e.next=19;break}return e.prev=3,e.next=6,Pd(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,_p(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,mp(n,e.t0);case 17:e.next=2;break;case 19:xp(n)&&Sp(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),bp.apply(this,arguments)}function wp(e){return up(e)&&e.fu.length<10}function _p(e,t){e.fu.push(t);var n=jp(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function xp(e){return up(e)&&!jp(e).No()&&e.fu.length>0}function Sp(e){jp(e).start()}function Ep(e){return Cp.apply(this,arguments)}function Cp(){return Cp=An(Rn().mark((function e(t){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:jp(t).eu();case 1:case"end":return e.stop()}}),e)}))),Cp.apply(this,arguments)}function Tp(e){return Ip.apply(this,arguments)}function Ip(){return Ip=An(Rn().mark((function e(t){var n,r,i,a;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=jp(t),r=Pn(t.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Ip.apply(this,arguments)}function Np(e,t,n){return Pp.apply(this,arguments)}function Pp(){return Pp=An(Rn().mark((function e(t,n,r){var i,a;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=Yf.from(i,n,r),e.next=3,yp(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,kp(t);case 5:case"end":return e.stop()}}),e)}))),Pp.apply(this,arguments)}function Rp(e,t){return Op.apply(this,arguments)}function Op(){return Op=An(Rn().mark((function e(t,n){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&jp(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=An(Rn().mark((function e(t,n){var r,i;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Hh(i=n.code)||i===Ju.ABORTED){e.next=7;break}return r=t.fu.shift(),jp(t).Mo(),e.next=5,yp(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,kp(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:xp(t)&&Sp(t);case 5:case"end":return e.stop()}}),e)}))),Op.apply(this,arguments)}function Ap(e,t){return Dp.apply(this,arguments)}function Dp(){return Dp=An(Rn().mark((function e(t,n){var r,i;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Xu(t)).asyncQueue.verifyOperationInProgress(),Wu("RemoteStore","RemoteStore received new credentials"),i=up(r),r._u.add(3),e.next=6,ep(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,Jd(r);case 12:case"end":return e.stop()}}),e)}))),Dp.apply(this,arguments)}function Lp(e,t){return Mp.apply(this,arguments)}function Mp(){return Mp=An(Rn().mark((function e(t,n){var r;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Xu(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,Jd(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,ep(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Mp.apply(this,arguments)}function Fp(e){return e.pu||(e.pu=function(e,t,n){var r=Xu(e);return r.su(),new Kd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:cp.bind(null,e),Zr:fp.bind(null,e),Wo:pp.bind(null,e)}),e.wu.push(function(){var t=An(Rn().mark((function t(n){return Rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Mo(),sp(e)?op(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:lp(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function jp(e){return e.Iu||(e.Iu=function(e,t,n){var r=Xu(e);return r.su(),new Qd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:Ep.bind(null,e),Zr:Rp.bind(null,e),tu:Tp.bind(null,e),Zo:Np.bind(null,e)}),e.wu.push(function(){var t=An(Rn().mark((function t(n){return Rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Mo(),t.next=4,kp(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(Wu("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var Up=function(){function e(t,n,r,i,a){c(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new el,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return p(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Zu(Ju.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Vp(e,t){if(Gu("AsyncQueue","".concat(t,": ").concat(e)),Pl(e))return new Zu(Ju.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var zp=function(){function e(t){c(this,e),this.comparator=t?function(e,n){return t(e,n)||kl.comparator(e.key,n.key)}:function(e,t){return kl.comparator(e.key,t.key)},this.keyedMap=Yh(),this.sortedSet=new Oc(this.comparator)}return p(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),qp=function(){function e(){c(this,e),this.Tu=new Oc(kl.comparator)}return p(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):$u():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Bp=function(){function e(t,n,r,i,a,o,s,u,l){c(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=l}return p(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,zp.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Hp=p((function e(){c(this,e),this.Au=void 0,this.listeners=[]})),Wp=p((function e(){c(this,e),this.queries=new Gh((function(e){return ih(e)}),rh),this.onlineState="Unknown",this.Ru=new Set}));function Gp(e,t){return Kp.apply(this,arguments)}function Kp(){return Kp=An(Rn().mark((function e(t,n){var r,i,a,o,s;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Xu(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Hp),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=Vp(e.t0,"Initialization of query '".concat(ah(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&Jp(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Kp.apply(this,arguments)}function Qp(e,t){return $p.apply(this,arguments)}function $p(){return $p=An(Rn().mark((function e(t,n){var r,i,a,o,s;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Xu(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),$p.apply(this,arguments)}function Yp(e,t){var n,r=Xu(e),i=!1,a=Pn(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var l,c=Pn(u.listeners);try{for(c.s();!(l=c.n()).done;){l.value.Pu(o)&&(i=!0)}}catch(h){c.e(h)}finally{c.f()}u.Au=o}}}catch(h){a.e(h)}finally{a.f()}i&&Jp(r)}function Xp(e,t,n){var r=Xu(e),i=r.queries.get(t);if(i){var a,o=Pn(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function Jp(e){e.Ru.forEach((function(e){e.next()}))}var Zp=function(){function e(t,n,r){c(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return p(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Pn(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Bp(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=Bp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}]),e}();var ev=p((function e(t){c(this,e),this.key=t})),tv=p((function e(t){c(this,e),this.key=t})),nv=function(){function e(t,n){c(this,e),this.query=t,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=rf(),this.mutatedKeys=rf(),this.Gu=uh(t),this.Qu=new zp(this.Gu)}return p(e,[{key:"ju",get:function(){return this.qu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new qp,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var c=i.get(e),h=oh(n.query,t)?t:null,f=!!c&&n.mutatedKeys.has(c.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;c&&h?c.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Hu(c,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.Gu(h,u)>0||l&&n.Gu(h,l)<0)&&(s=!0)):!c&&h?(r.track({type:0,doc:h}),p=!0):c&&!h&&(r.track({type:1,doc:c}),p=!0,(u||l)&&(s=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var c="F"===this.query.limitType?o.last():o.first();o=o.delete(c.key),a=a.delete(c.key),r.track({type:1,doc:c})}return{Qu:o,zu:r,$i:s,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $u()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],s=0===this.Ku.size&&this.current?1:0,u=s!==this.Uu;return this.Uu=s,0!==a.length||u?{snapshot:new Bp(this.query,e.Qu,i,a,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new qp,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.qu=t.qu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.qu=t.qu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=rf(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new tv(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new ev(e))})),n}},{key:"tc",value:function(e){this.qu=e.Hi,this.Ku=rf();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return Bp.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}]),e}(),rv=p((function e(t,n,r){c(this,e),this.query=t,this.targetId=n,this.view=r})),iv=p((function e(t){c(this,e),this.key=t,this.nc=!1})),av=function(){function e(t,n,r,i,a,o){c(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new Gh((function(e){return ih(e)}),rh),this.rc=new Map,this.oc=new Set,this.uc=new Oc(kl.comparator),this.cc=new Map,this.ac=new hd,this.hc={},this.lc=new Map,this.fc=ad.vn(),this.onlineState="Unknown",this.dc=void 0}return p(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function ov(e,t){return sv.apply(this,arguments)}function sv(){return sv=An(Rn().mark((function e(t,n){var r,i,a,o,s,u;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Lv(t),!(o=r.ic.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),e.next=15;break;case 6:return e.next=8,Rd(r.localStore,eh(n));case 8:return s=e.sent,r.isPrimaryClient&&np(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,uv(r,n,i,"current"===u,s.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),sv.apply(this,arguments)}function uv(e,t,n,r,i){return lv.apply(this,arguments)}function lv(){return lv=An(Rn().mark((function e(t,n,r,i,a){var o,s,u,l,c,h;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=An(Rn().mark((function e(t,n,r,i){var a,o,s;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,Dd(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Tv(t,n.targetId,s.Xu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Dd(t.localStore,n,!0);case 3:return o=e.sent,s=new nv(n,o.Hi),u=s.Wu(o.documents),l=uf.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),c=s.applyChanges(u,t.isPrimaryClient,l),Tv(t,r,c.Xu),h=new rv(n,r,s),e.abrupt("return",(t.ic.set(n,h),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),lv.apply(this,arguments)}function cv(e,t){return hv.apply(this,arguments)}function hv(){return hv=An(Rn().mark((function e(t,n){var r,i,a;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Xu(t),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,a.filter((function(e){return!rh(e,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Od(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),rp(r.remoteStore,i.targetId),Ev(r,i.targetId)})).catch(Tl);case 9:e.next=14;break;case 11:return Ev(r,i.targetId),e.next=14,Od(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),hv.apply(this,arguments)}function fv(e,t,n){return dv.apply(this,arguments)}function dv(){return dv=An(Rn().mark((function e(t,n,r){var i,a,o;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Mv(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Xu(e),a=dl.now(),o=t.reduce((function(e,t){return e.add(t.key)}),rf());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=Qh(),u=rf();return i.Gi.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=Pn(t);try{for(u.s();!(o=u.n()).done;){var l=o.value,c=Oh(l,n.get(l.key).overlayedDocument);null!=c&&s.push(new Lh(l.key,c,Uc(c.value.mapValue),Ch.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Xh(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new Oc(hl)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Pv(i,a.changes);case 9:return e.next=11,kp(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Vp(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),dv.apply(this,arguments)}function pv(e,t){return vv.apply(this,arguments)}function vv(){return vv=An(Rn().mark((function e(t,n){var r,i;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xu(t),e.prev=1,e.next=4,Id(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.cc.get(t);n&&(Yu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?Yu(n.nc):e.removedDocuments.size>0&&(Yu(n.nc),n.nc=!1))})),e.next=8,Pv(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Tl(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),vv.apply(this,arguments)}function mv(e,t,n){var r=Xu(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Xu(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Pn(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Jp(n)}(r.eventManager,t),i.length&&r.sc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function gv(e,t,n){return yv.apply(this,arguments)}function yv(){return yv=An(Rn().mark((function e(t,n,r){var i,a,o,s,u,l;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Xu(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new Oc(kl.comparator)).insert(o,Vc.newNoDocument(o,pl.min())),u=rf().add(o),l=new sf(pl.min(),new Map,new Lc(hl),s,u),e.next=9,pv(i,l);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),Nv(i),e.next=16;break;case 14:return e.next=16,Od(i.localStore,n,!1).then((function(){return Ev(i,n,r)})).catch(Tl);case 16:case"end":return e.stop()}}),e)}))),yv.apply(this,arguments)}function kv(e,t){return bv.apply(this,arguments)}function bv(){return bv=An(Rn().mark((function e(t,n){var r,i,a;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xu(t),i=n.batch.batchId,e.prev=1,e.next=4,Cd(r.localStore,n);case 4:return a=e.sent,Sv(r,i,null),xv(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Pv(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Tl(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),bv.apply(this,arguments)}function wv(e,t,n){return _v.apply(this,arguments)}function _v(){return _v=An(Rn().mark((function e(t,n,r){var i,a;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Xu(t),e.prev=1,e.next=4,function(e,t){var n=Xu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Yu(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Sv(i,n,r),xv(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Pv(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Tl(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),_v.apply(this,arguments)}function xv(e,t){(e.lc.get(t)||[]).forEach((function(e){e.resolve()})),e.lc.delete(t)}function Sv(e,t,n){var r=Xu(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function Ev(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Pn(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((function(t){e.ac.containsKey(t)||Cv(e,t)}))}function Cv(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(rp(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),Nv(e))}function Tv(e,t,n){var r,i=Pn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof ev?(e.ac.addReference(a.key,t),Iv(e,a)):a instanceof tv?(Wu("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||Cv(e,a.key)):$u()}}catch(o){i.e(o)}finally{i.f()}}function Iv(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(Wu("SyncEngine","New document in limbo: "+n),e.oc.add(r),Nv(e))}function Nv(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new kl(ml.fromString(t)),r=e.fc.next();e.cc.set(r,new iv(n)),e.uc=e.uc.insert(n,r),np(e.remoteStore,new Jf(eh(Qc(n.path)),r,2,Rl.at))}}function Pv(e,t,n){return Rv.apply(this,arguments)}function Rv(){return Rv=An(Rn().mark((function e(t,n,r){var i,a,o,s;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Xu(t),a=[],o=[],s=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach((function(e,t){s.push(i._c(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=bd.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.sc.Wo(a),e.next=9,function(){var e=An(Rn().mark((function e(t,n){var r,i,a,o,s,u,l,c;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xu(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Nl.forEach(n,(function(t){return Nl.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Nl.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Pl(e.t0)){e.next=10;break}throw e.t0;case 10:Wu("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Pn(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.qi.get(s),l=u.snapshotVersion,c=u.withLastLimboFreeSnapshotVersion(l),r.qi=r.qi.insert(s,c))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Rv.apply(this,arguments)}function Ov(e,t){return Av.apply(this,arguments)}function Av(){return Av=An(Rn().mark((function e(t,n){var r,i;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Xu(t)).currentUser.isEqual(n)){e.next=11;break}return Wu("SyncEngine","User change. New user:",n.toKey()),e.next=5,Sd(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach((function(e){e.forEach((function(e){e.reject(new Zu(Ju.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Pv(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),Av.apply(this,arguments)}function Dv(e,t){var n=Xu(e),r=n.cc.get(t);if(r&&r.nc)return rf().add(r.key);var i=rf(),a=n.rc.get(t);if(!a)return i;var o,s=Pn(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=n.ic.get(u);i=i.unionWith(l.view.ju)}}catch(c){s.e(c)}finally{s.f()}return i}function Lv(e){var t=Xu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=pv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Dv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=gv.bind(null,t),t.sc.Wo=Yp.bind(null,t.eventManager),t.sc.wc=Xp.bind(null,t.eventManager),t}function Mv(e){var t=Xu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=kv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=wv.bind(null,t),t}var Fv=function(){function e(){c(this,e),this.synchronizeTabs=!1}return p(e,[{key:"initialize",value:function(){var e=An(Rn().mark((function e(t){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yt=Hd(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return xd(this.persistence,new wd,e.initialUser,this.yt)}},{key:"yc",value:function(e){return new gd(kd.Bs,this.yt)}},{key:"gc",value:function(e){return new Fd}},{key:"terminate",value:function(){var e=An(Rn().mark((function e(){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),jv=function(){function e(){c(this,e)}return p(e,[{key:"initialize",value:function(){var e=An(Rn().mark((function e(t,n){var r=this;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return mv(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Ov.bind(null,this.syncEngine),e.next=12,Lp(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Wp}},{key:"createDatastore",value:function(e){var t,n=Hd(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new qd(t));return function(e,t,n,r){return new $d(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return mv(o.syncEngine,e,0)},a=Ud.C()?new Ud:new jd,new Xd(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new av(e,t,n,r,i,a);return o&&(s.dc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=An(Rn().mark((function e(t){var n;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Xu(t),Wu("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,ep(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Uv(e,t,n){if(!n)throw new Zu(Ju.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Vv(e){if(!kl.isDocumentKey(e))throw new Zu(Ju.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function zv(e){if(kl.isDocumentKey(e))throw new Zu(Ju.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function qv(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":$u()}function Bv(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Zu(Ju.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=qv(e);throw new Zu(Ju.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}var Hv=new Map,Wv=function(){function e(t){var n;if(c(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Zu(Ju.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Zu(Ju.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new Zu(Ju.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return p(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Gv=function(){function e(t,n,r,i){c(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wv({}),this._settingsFrozen=!1}return p(e,[{key:"app",get:function(){if(!this._app)throw new Zu(Ju.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Zu(Ju.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wv(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new nl;switch(e.type){case"gapi":var t=e.client;return new ol(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Zu(Ju.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Hv.get(e);t&&(Wu("ComponentProvider","Removing Datastore"),Hv.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Kv(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Bv(e,Gv))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Ku("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=zu.MOCK_USER;else{o=ir(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new Zu(Ju.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new zu(u)}e._authCredentials=new rl(new tl(o,s))}}var Qv=function(){function e(t,n,r){c(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return p(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Yv(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),$v=function(){function e(t,n,r){c(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return p(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Yv=function(e){m(n,e);var t=w(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this,e,r,Qc(i)))._path=i,a.type="collection",a}return p(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Qv(this.firestore,null,new kl(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}($v);function Xv(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Cr(e),Uv("collection","path",t),e instanceof Gv){var a=ml.fromString.apply(ml,[t].concat(r));return zv(a),new Yv(e,null,a)}if(!(e instanceof Qv||e instanceof Yv))throw new Zu(Ju.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ml.fromString.apply(ml,[t].concat(r)));return zv(o),new Yv(e.firestore,null,o)}function Jv(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Cr(e),1===arguments.length&&(t=cl.R()),Uv("doc","path",t),e instanceof Gv){var a=ml.fromString.apply(ml,[t].concat(r));return Vv(a),new Qv(e,null,new kl(a))}if(!(e instanceof Qv||e instanceof Yv))throw new Zu(Ju.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ml.fromString.apply(ml,[t].concat(r)));return Vv(o),new Qv(e.firestore,e instanceof Yv?e.converter:null,new kl(o))}var Zv=function(){function e(t){c(this,e),this.observer=t,this.muted=!1}return p(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):Gu("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),em=function(){function e(t,n,r,i){var a=this;c(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=zu.UNAUTHENTICATED,this.clientId=cl.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=An(Rn().mark((function e(t){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wu("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Wu("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return p(e,[{key:"getConfiguration",value:function(){var e=An(Rn().mark((function e(){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Zu(Ju.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new el;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(An(Rn().mark((function n(){var r;return Rn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Vp(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function tm(e,t){return nm.apply(this,arguments)}function nm(){return nm=An(Rn().mark((function e(t,n){var r,i;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Wu("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=An(Rn().mark((function e(t){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Sd(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),nm.apply(this,arguments)}function rm(e,t){return im.apply(this,arguments)}function im(){return im=An(Rn().mark((function e(t,n){var r,i;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,am(t);case 3:return r=e.sent,Wu("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Ap(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Ap(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),im.apply(this,arguments)}function am(e){return om.apply(this,arguments)}function om(){return om=An(Rn().mark((function e(t){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Wu("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,tm(t,new Fv);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),om.apply(this,arguments)}function sm(e){return um.apply(this,arguments)}function um(){return um=An(Rn().mark((function e(t){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Wu("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,rm(t,new jv);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),um.apply(this,arguments)}function lm(e){return sm(e).then((function(e){return e.syncEngine}))}function cm(e){return hm.apply(this,arguments)}function hm(){return hm=An(Rn().mark((function e(t){var n,r;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sm(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=ov.bind(null,n.syncEngine),r.onUnlisten=cv.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),hm.apply(this,arguments)}function fm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new el;return e.asyncQueue.enqueueAndForget(An(Rn().mark((function i(){return Rn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Zv({next:function(a){t.enqueueAndForget((function(){return Qp(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new Zu(Ju.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new Zu(Ju.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Zp(Qc(n.path),a,{includeMetadataChanges:!0,Nu:!0});return Gp(e,o)},i.next=3,cm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function dm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new el;return e.asyncQueue.enqueueAndForget(An(Rn().mark((function i(){return Rn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Zv({next:function(n){t.enqueueAndForget((function(){return Qp(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Zu(Ju.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Zp(n,a,{includeMetadataChanges:!0,Nu:!0});return Gp(e,o)},i.next=3,cm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var pm=function(){function e(){var t=this;c(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Wd(this,"async_queue_retry"),this.Wc=function(){var e=Bd();e&&Wu("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.Po()};var n=Bd();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return p(e,[{key:"isShuttingDown",get:function(){return this.qc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;var t=Bd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.qc)return new Promise((function(){}));var n=new el;return this.Hc((function(){return t.qc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Lc.push(e),t.Jc()}))}},{key:"Jc",value:function(){var e=An(Rn().mark((function e(){var t=this;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Pl(e.t0)){e.next=12;break}throw e.t0;case 12:Wu("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.xo.Ro((function(){return t.Jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then((function(){return t.Gc=!0,e().catch((function(e){t.Kc=e,t.Gc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Gu("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Gc=!1,e}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=Up.createAndSchedule(this,e,t,n,(function(e){return r.Yc(e)}));return this.Uc.push(i),i}},{key:"zc",value:function(){this.Kc&&$u()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=An(Rn().mark((function e(){var t;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=Pn(this.Uc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then((function(){t.Uc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Pn(t.Uc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()}))}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}]),e}();function vm(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Pn(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var mm=function(e){m(n,e);var t=w(n);function n(e,r,i,a){var o;return c(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new pm,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return p(n,[{key:"_terminate",value:function(){return this._firestoreClient||ym(this),this._firestoreClient.terminate()}}]),n}(Gv);function gm(e){return e._firestoreClient||ym(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ym(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Ol(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new em(e._authCredentials,e._appCheckCredentials,e._queue,r)}var km=function(){function e(t){c(this,e),this._byteString=t}return p(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Vl.fromBase64String(t))}catch(t){throw new Zu(Ju.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Vl.fromUint8Array(t))}}]),e}(),bm=function(){function e(){c(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Zu(Ju.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yl(n)}return p(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var wm=p((function e(t){c(this,e),this._methodName=t})),_m=function(){function e(t,n){if(c(this,e),!isFinite(t)||t<-90||t>90)throw new Zu(Ju.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Zu(Ju.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return p(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return hl(this._lat,e._lat)||hl(this._long,e._long)}}]),e}(),xm=/^__.*__$/,Sm=function(){function e(t,n,r){c(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return p(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Lh(e,this.data,this.fieldMask,t,this.fieldTransforms):new Dh(e,this.data,t,this.fieldTransforms)}}]),e}();function Em(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $u()}}var Cm=function(){function e(t,n,r,i,a,o){c(this,e),this.settings=t,this.databaseId=n,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return p(e,[{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}},{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return jm(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Em(this.sa)&&xm.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}]),e}(),Tm=function(){function e(t,n,r){c(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.yt=r||Hd(t)}return p(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Cm({sa:e,methodName:t,fa:n,path:yl.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}]),e}();function Im(e){var t=e._freezeSettings(),n=Hd(e._databaseId);return new Tm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Nm(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);Dm("Data must be an object, but it was:",o,r);var s,u,l=Om(r,o);if(a.merge)s=new Fc(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var c,h=[],f=Pn(a.mergeFields);try{for(f.s();!(c=f.n()).done;){var d=c.value,p=Lm(t,d,n);if(!o.contains(p))throw new Zu(Ju.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));Um(h,p)||h.push(p)}}catch(v){f.e(v)}finally{f.f()}s=new Fc(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new Sm(new jc(l),s,u)}function Pm(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Rm(n,e.da(r?4:3,t))}function Rm(e,t){if(Am(e=Cr(e)))return Dm("Unsupported field value:",t,e),Om(e,t);if(e instanceof wm)return function(e,t){if(!Em(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Pn(e);try{for(a.s();!(n=a.n()).done;){var o=Rm(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Cr(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return fh(t.yt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=dl.fromDate(e);return{timestampValue:bf(t.yt,n)}}if(e instanceof dl){var r=new dl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:bf(t.yt,r)}}if(e instanceof _m)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof km)return{bytesValue:wf(t.yt,e._byteString)};if(e instanceof Qv){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Sf(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(qv(e)))}(e,t)}function Om(e,t){var n={};return Ml(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ll(e,(function(e,r){var i=Rm(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Am(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof dl||e instanceof _m||e instanceof km||e instanceof Qv||e instanceof wm)}function Dm(e,t,n){if(!Am(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=qv(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function Lm(e,t,n){if((t=Cr(t))instanceof bm)return t._internalPath;if("string"==typeof t)return Fm(e,t);throw jm("Field path arguments must be of type string or ",e,!1,void 0,n)}var Mm=new RegExp("[~\\*/\\[\\]]");function Fm(e,t,n){if(t.search(Mm)>=0)throw jm("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return _(bm,l(t.split(".")))._internalPath}catch(pg){throw jm("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function jm(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new Zu(Ju.INVALID_ARGUMENT,s+e+u)}function Um(e,t){return e.some((function(e){return e.isEqual(t)}))}var Vm=function(){function e(t,n,r,i,a){c(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return p(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Qv(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new zm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(qm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),zm=function(e){m(n,e);var t=w(n);function n(){return c(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(){return Nn(g(n.prototype),"data",this).call(this)}}]),n}(Vm);function qm(e,t){return"string"==typeof t?Fm(e,t):t instanceof bm?t._internalPath:t._delegate._internalPath}function Bm(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Zu(Ju.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Hm=p((function e(){c(this,e)})),Wm=function(e){m(n,e);var t=w(n);function n(){return c(this,n),t.apply(this,arguments)}return p(n)}(Hm);var Gm=function(e){m(n,e);var t=w(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return p(n,[{key:"_apply",value:function(e){var t=this._parse(e);return Ym(e._query,t),new $v(e.firestore,e.converter,th(e._query,t))}},{key:"_parse",value:function(e){var t=Im(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Zu(Ju.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){$m(o,a);var u,l=[],c=Pn(o);try{for(c.s();!(u=c.n()).done;){var h=u.value;l.push(Qm(r,e,h))}}catch(f){c.e(f)}finally{c.f()}s={arrayValue:{values:l}}}else s=Qm(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||$m(o,a),s=Pm(n,"where",o,"in"===a||"not-in"===a);return pc.create(i,a,s)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Wm);var Km=function(e){m(n,e);var t=w(n);function n(e,r){var i;return c(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return p(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:vc.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=Pn(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;Ym(r,a),r=th(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new $v(e.firestore,e.converter,th(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Hm);function Qm(e,t,n){if("string"==typeof(n=Cr(n))){if(""===n)throw new Zu(Ju.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jc(t)&&-1!==n.indexOf("/"))throw new Zu(Ju.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(ml.fromString(n));if(!kl.isDocumentKey(r))throw new Zu(Ju.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return nc(e,new kl(r))}if(n instanceof Qv)return nc(e,n._key);throw new Zu(Ju.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(qv(n),"."))}function $m(e,t){if(!Array.isArray(e)||0===e.length)throw new Zu(Ju.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Zu(Ju.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Ym(e,t){if(t.isInequality()){var n=Xc(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Zu(Ju.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Yc(e);null!==i&&Xm(e,r,i)}var a=function(e,t){var n,r=Pn(e);try{for(r.s();!(n=r.n()).done;){var i,a=Pn(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Zu(Ju.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Zu(Ju.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function Xm(e,t,n){if(!n.isEqual(t))throw new Zu(Ju.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Jm=function(){function e(){c(this,e)}return p(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch($l(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw $u()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Ll(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new _m(Bl(e.latitude),Bl(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Gl(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Kl(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=ql(e);return new dl(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=ml.fromString(e);Yu(Wf(n));var r=new Al(n.get(1),n.get(3)),i=new kl(n.popFirst(5));return r.isEqual(t)||Gu("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Zm(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var eg=function(){function e(t,n){c(this,e),this.hasPendingWrites=t,this.fromCache=n}return p(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),tg=function(e){m(n,e);var t=w(n);function n(e,r,i,a,o,s){var u;return c(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return p(n,[{key:"exists",value:function(){return Nn(g(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new ng(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(qm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Vm),ng=function(e){m(n,e);var t=w(n);function n(){return c(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Nn(g(n.prototype),"data",this).call(this,e)}}]),n}(tg),rg=function(){function e(t,n,r,i){c(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new eg(i.hasPendingWrites,i.fromCache),this.query=r}return p(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new ng(n._firestore,n._userDataWriter,r.key,r,new eg(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Zu(Ju.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new ng(e._firestore,e._userDataWriter,t.doc.key,t.doc,new eg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new ng(e._firestore,e._userDataWriter,t.doc.key,t.doc,new eg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:ig(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function ig(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $u()}}function ag(e){e=Bv(e,Qv);var t=Bv(e.firestore,mm);return fm(gm(t),e._key).then((function(n){return cg(t,e,n)}))}var og=function(e){m(n,e);var t=w(n);function n(e){var r;return c(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new km(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qv(this.firestore,null,t)}}]),n}(Jm);function sg(e){e=Bv(e,$v);var t=Bv(e.firestore,mm),n=gm(t),r=new og(t);return Bm(e._query),dm(n,e._query).then((function(n){return new rg(t,r,e,n)}))}function ug(e,t,n){e=Bv(e,Qv);var r=Bv(e.firestore,mm),i=Zm(e.converter,t,n);return lg(r,[Nm(Im(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ch.none())])}function lg(e,t){return function(e,t){var n=new el;return e.asyncQueue.enqueueAndForget(An(Rn().mark((function r(){return Rn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=fv,r.next=3,lm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(gm(e),t)}function cg(e,t,n){var r=n.docs.get(t._key),i=new og(e);return new tg(e,i,t._key,r,new eg(n.hasPendingWrites,n.fromCache),t.converter)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){qu=e}(yi),di(new Tr("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new mm(new il(e.getProvider("auth-internal")),new ul(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Zu(Ju.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Al(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),wi(Vu,"3.8.0",e),wi(Vu,"3.8.0","esm2017")}();var hg,fg=function(e,t){return(fg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},dg=(function(e){!function(){var t={}.hasOwnProperty;function n(){for(var e=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var a=typeof i;if("string"===a||"number"===a)e.push(i);else if(Array.isArray(i)&&i.length){var o=n.apply(null,i);o&&e.push(o)}else if("object"===a)for(var s in i)t.call(i,s)&&i[s]&&e.push(s)}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n}()}(hg={path:undefined,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&hg.path)}},hg.exports),hg.exports);function pg(e,t,n){var r,i,a,o,s;function u(){var l=Date.now()-o;l<t&&l>=0?r=setTimeout(u,t-l):(r=null,n||(s=e.apply(a,i),a=i=null))}null==t&&(t=100);var l=function(){a=this,i=arguments,o=Date.now();var l=n&&!r;return r||(r=setTimeout(u,t)),l&&(s=e.apply(a,i),a=i=null),s};return l.clear=function(){r&&(clearTimeout(r),r=null)},l.flush=function(){r&&(s=e.apply(a,i),a=i=null,clearTimeout(r),r=null)},l}pg.debounce=pg;var vg=pg;!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".indiana-scroll-container {\n  overflow: auto; }\n  .indiana-scroll-container--dragging {\n    scroll-behavior: auto !important; }\n    .indiana-scroll-container--dragging > * {\n      pointer-events: none;\n      cursor: -webkit-grab;\n      cursor: grab; }\n  .indiana-scroll-container--hide-scrollbars {\n    overflow: hidden;\n    overflow: -moz-scrollbars-none;\n    -ms-overflow-style: none;\n    scrollbar-width: none; }\n    .indiana-scroll-container--hide-scrollbars::-webkit-scrollbar {\n      display: none !important;\n      height: 0 !important;\n      width: 0 !important;\n      background: transparent !important;\n      -webkit-appearance: none !important; }\n  .indiana-scroll-container--native-scroll {\n    overflow: auto; }\n\n.indiana-dragging {\n  cursor: -webkit-grab;\n  cursor: grab; }\n");var mg,gg=(mg="indiana-scroll-container",function(e,t){if(!e)return mg;var n;"string"==typeof e?n=e:t=e;var r=mg;return n&&(r+="__"+n),r+(t?Object.keys(t).reduce((function(e,n){var i=t[n];return i&&(e+=" "+("boolean"==typeof i?r+"--"+n:r+"--"+n+"_"+i)),e}),""):"")}),yg=function(e){function n(n){var r=e.call(this,n)||this;return r.onEndScroll=function(){r.scrolling=!1,!r.pressed&&r.started&&r.processEnd()},r.onScroll=function(e){var t=r.container.current;t.scrollLeft===r.scrollLeft&&t.scrollTop===r.scrollTop||(r.scrolling=!0,r.processScroll(e),r.onEndScroll())},r.onTouchStart=function(e){var t=r.props.nativeMobileScroll;if(r.isDraggable(e.target))if(r.internal=!0,t&&r.scrolling)r.pressed=!0;else{var n=e.touches[0];r.processClick(e,n.clientX,n.clientY),!t&&r.props.stopPropagation&&e.stopPropagation()}},r.onTouchEnd=function(e){var t=r.props.nativeMobileScroll;r.pressed&&(!r.started||r.scrolling&&t?r.pressed=!1:r.processEnd(),r.forceUpdate())},r.onTouchMove=function(e){var t=r.props.nativeMobileScroll;if(r.pressed&&(!t||!r.isMobile)){var n=e.touches[0];n&&r.processMove(e,n.clientX,n.clientY),e.preventDefault(),r.props.stopPropagation&&e.stopPropagation()}},r.onMouseDown=function(e){r.isDraggable(e.target)&&r.isScrollable()&&(r.internal=!0,-1!==r.props.buttons.indexOf(e.button)&&(r.processClick(e,e.clientX,e.clientY),e.preventDefault(),r.props.stopPropagation&&e.stopPropagation()))},r.onMouseMove=function(e){r.pressed&&(r.processMove(e,e.clientX,e.clientY),e.preventDefault(),r.props.stopPropagation&&e.stopPropagation())},r.onMouseUp=function(e){r.pressed&&(r.started?r.processEnd():(r.internal=!1,r.pressed=!1,r.forceUpdate(),r.props.onClick&&r.props.onClick(e)),e.preventDefault(),r.props.stopPropagation&&e.stopPropagation())},r.container=t.createRef(),r.onEndScroll=vg(r.onEndScroll,300),r.scrolling=!1,r.started=!1,r.pressed=!1,r.internal=!1,r.getRef=r.getRef.bind(r),r}return function(e,t){function n(){this.constructor=e}fg(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(n,e),n.prototype.componentDidMount=function(){var e=this.props.nativeMobileScroll,t=this.container.current;window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd),t.addEventListener("touchstart",this.onTouchStart,{passive:!1}),t.addEventListener("mousedown",this.onMouseDown,{passive:!1}),e&&(this.isMobile=this.isMobileDevice(),this.isMobile&&this.forceUpdate())},n.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},n.prototype.getElement=function(){return this.container.current},n.prototype.isMobileDevice=function(){return void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")},n.prototype.isDraggable=function(e){var t=this.props.ignoreElements;if(t){var n=e.closest(t);return null===n||n.contains(this.getElement())}return!0},n.prototype.isScrollable=function(){var e=this.container.current;return e&&(e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight)},n.prototype.processClick=function(e,t,n){var r=this.container.current;this.scrollLeft=r.scrollLeft,this.scrollTop=r.scrollTop,this.clientX=t,this.clientY=n,this.pressed=!0},n.prototype.processStart=function(e){void 0===e&&(e=!0);var t=this.props.onStartScroll;this.started=!0,e&&document.body.classList.add("indiana-dragging"),t&&t({external:!this.internal}),this.forceUpdate()},n.prototype.processScroll=function(e){if(this.started){var t=this.props.onScroll;t&&t({external:!this.internal})}else this.processStart(!1)},n.prototype.processMove=function(e,t,n){var r=this.props,i=r.horizontal,a=r.vertical,o=r.activationDistance,s=r.onScroll,u=this.container.current;this.started?(i&&(u.scrollLeft-=t-this.clientX),a&&(u.scrollTop-=n-this.clientY),s&&s({external:!this.internal}),this.clientX=t,this.clientY=n,this.scrollLeft=u.scrollLeft,this.scrollTop=u.scrollTop):(i&&Math.abs(t-this.clientX)>o||a&&Math.abs(n-this.clientY)>o)&&(this.clientX=t,this.clientY=n,this.processStart())},n.prototype.processEnd=function(){var e=this.props.onEndScroll;this.container.current&&e&&e({external:!this.internal}),this.pressed=!1,this.started=!1,this.scrolling=!1,this.internal=!1,document.body.classList.remove("indiana-dragging"),this.forceUpdate()},n.prototype.getRef=function(e){[this.container,this.props.innerRef].forEach((function(t){t&&("function"==typeof t?t(e):t.current=e)}))},n.prototype.render=function(){var e=this.props,n=e.children,r=e.draggingClassName,i=e.className,a=e.style,o=e.hideScrollbars,s=e.component;return t.createElement(s,{className:dg(i,this.pressed&&r,gg({dragging:this.pressed,"hide-scrollbars":o,"native-scroll":this.isMobile})),style:a,ref:this.getRef,onScroll:this.onScroll},n)},n.defaultProps={nativeMobileScroll:!0,hideScrollbars:!0,activationDistance:10,vertical:!0,horizontal:!0,stopPropagation:!1,style:{},component:"div",buttons:[0]},n}(t.PureComponent),kg=yg,bg=function(){var e=u((0,t.useState)([]),2),n=e[0],r=e[1],i=u((0,t.useState)("https://firebasestorage.googleapis.com/v0/b/crispies-3dcb9.appspot.com/o/allLocations.jpg?alt=media&token=50acf22b-4505-48a9-abf5-c763b9dd354a"),2),a=i[0],o=i[1],s=u((0,t.useState)(0),2),l=s[0],c=s[1],h=function(e){c(window.innerWidth)};return(0,t.useEffect)((function(){var e=[];sg(Xv($T,"restaurants")).then((function(t){t.forEach((function(t){return e.push(Cn({id:t.id},t.data()))})),r(e)})),window.addEventListener("resize",h),h()}),[]),(0,_n.jsxs)("div",{className:"FindUs",children:[(0,_n.jsx)("h1",{className:" border-b-2 border-offblack text-4xl text-center bg-beige titleLocations py-3",children:"Our locations"}),(0,_n.jsx)("div",{className:"flex justify-evenly flex-wrap",children:n.map((function(e){return(0,_n.jsx)(Tn,{name:e.name,address:e.address,imgUrl:e.imgUrl,showOnMap:function(e){o(e)}},e.id)}))}),(0,_n.jsx)(kg,{style:{overflow:"scroll",maxHeight:l<=867?"calc(100vh - 148px - 66px - 144px - 1px)":"calc(100vh - 124px - 66px - 144px - 1px)"},id:"map",children:(0,_n.jsx)("img",{src:a,alt:"map"})})]})},wg=function(e){var n=e.validate,r=e.volatile,i=e.displayText,a=e.state,o=e.setState,s=(0,t.useContext)(xg);return(0,t.useEffect)((function(){r&&s&&o({data:"",valid:!1})}),[s]),(0,_n.jsxs)("div",{className:"flex flex-row justify-between align-center mt-1",children:[(0,_n.jsx)("p",{className:"shrink-0 w-36 self-center",children:i}),(0,_n.jsx)("input",{style:{color:a.valid?"black":"red"},className:"pl-2 pt-1 mx-1 bg-white min-w-0 shrink basis-52",disabled:!s,onChange:function(e){o({data:e.target.value,valid:n.test(e.target.value)})},value:a.data})]})};wg.defaultProps={validate:new RegExp(""),volatile:!1};var _g=wg,xg=t.createContext(!1),Sg=function(e){var n=e.validPaymentInfo,r=e.setValidPaymentInfo,i=(0,t.useContext)(HT),a=u((0,t.useState)(""),2),o=a[0],s=a[1],l=u((0,t.useState)(""),2),c=l[0],h=l[1],f=u((0,t.useState)(""),2),d=f[0],p=f[1],v=u((0,t.useState)(""),2),m=v[0],g=v[1],y=u((0,t.useState)(""),2),k=y[0],b=y[1],w=u((0,t.useState)(""),2),_=w[0],x=w[1],S=[o,c,d,m,k,_];(0,t.useEffect)((function(){var e=S.reduce((function(e,t){return e&&t.valid}),!0),t=S.reduce((function(e,t){return e&&""!==t.data}),!0);r(e&&t)}),[].concat(S));var E=u((0,t.useState)(!1),2),C=E[0],T=E[1];(0,t.useEffect)((function(){i.uid&&function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Cr(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||vm(n[u])||(s=n[u],u++);var l,c,h,f={includeMetadataChanges:s.includeMetadataChanges};if(vm(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Qv)c=Bv(e.firestore,mm),h=Qc(e._key.path),l={next:function(t){n[u]&&n[u](cg(c,e,t))},error:n[u+1],complete:n[u+2]};else{var p=Bv(e,$v);c=Bv(p.firestore,mm),h=p._query;var v=new og(c);l={next:function(e){n[u]&&n[u](new rg(c,v,p,e))},error:n[u+1],complete:n[u+2]},Bm(e._query)}(function(e,t,n,r){var i=new Zv(r),a=new Zp(t,i,n);e.asyncQueue.enqueueAndForget(An(Rn().mark((function t(){return Rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Gp,t.next=3,cm(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))})(gm(c),h,f,l)}(Jv($T,"users",i.uid),(function(e){var t=e.data();s({data:t.fullName,valid:!0}),h({data:t.deliveryAddress,valid:!0}),p({data:t.cardNo,valid:!0}),g({data:t.expiryDate,valid:!0}),b({data:t.cvv,valid:!0}),x({data:t.billingAddress,valid:!0})}))}),[i]);var I=u((0,t.useState)(!1),2),N=I[0],P=I[1];return(0,_n.jsx)("div",{className:"PaymentInfo mx-0 sm:mx-5 shrink max-w-full",children:i&&(0,_n.jsxs)("div",{className:"purchaseInformation shrink flex flex-col max-w-full mx-auto border-x-2 border-offblack bg-beige mt-8 textSignin",children:[(0,_n.jsx)("p",{className:"p-2 textSignup text-center mb-2 bg-offblack w-full text-beige",children:"Please confirm/complete your details below:"}),(0,_n.jsx)(xg.Provider,{value:N,children:(0,_n.jsxs)("div",{className:"mx-4 sm:mx-10",children:[(0,_n.jsx)(_g,{displayText:"Full name",state:o,setState:s,validate:new RegExp(/[a-zA-Z]+\s[a-zA-Z]+/)}),(0,_n.jsx)(_g,{displayText:"Delivery address",state:c,setState:h}),(0,_n.jsx)(_g,{displayText:"Card no.",state:d,setState:p,validate:new RegExp(/^[0-9]{15,16}$/),volatile:!0}),(0,_n.jsx)(_g,{displayText:"Expiry date",state:m,setState:g,validate:new RegExp(/^[0-9]{2}\/[0-9]{2}$/),volatile:!0}),(0,_n.jsx)(_g,{displayText:"CVV",state:k,setState:b,validate:new RegExp(/^[0-9]{3}$/),volatile:!0}),(0,_n.jsx)(_g,{displayText:"Billing address",state:_,setState:x})]})}),(0,_n.jsxs)("div",{className:"flex justify-center flex-col",children:[N?(0,_n.jsx)("button",{className:"w-full text-2xl border-y-2 border-offblack text-offblack mt-4 btnHover textSignup bg-sea",onClick:function(){n?(P(!1),T(!1),ug(Jv($T,"users",i.uid),{fullName:o.data,deliveryAddress:c.data,cardNo:"*******-"+d.data.substring(d.data.length-4),expiryDate:m.data,cvv:k.data,billingAddress:_.data})):T(!0)},children:"Submit"}):(0,_n.jsx)("button",{className:"w-full text-2xl border-y-2 border-offblack text-beige mt-4 editBtnHover textSignup bg-sea",onClick:function(){P(!0)},children:"Edit"}),C&&(0,_n.jsx)("div",{className:"bg-offblack textSignin text-terra text-center w-full",children:"Invalid data entered"})]})]})})},Eg="@firebase/database",Cg="0.14.0",Tg="";var Ig=function(){function e(t){c(this,e),this.domStorage_=t,this.prefix_="firebase:"}return p(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),cr(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:lr(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),Ng=function(){function e(){c(this,e),this.cache_={},this.isInMemoryStorage=!0}return p(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return fr(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),Pg=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Ig(t)}}catch(n){}return new Ng},Rg=Pg("localStorage"),Og=Pg("sessionStorage"),Ag=new jr("@firebase/database"),Dg=function(){var e=1;return function(){return e++}}(),Lg=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,Fn(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new wr;n.update(t);var r=n.digest();return Vn.encodeByteArray(r)},Mg=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?cr(r):r,t+=" "}return t},Fg=null,jg=!0,Ug=function(e,t){Fn(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Ag.logLevel=Rr.VERBOSE,Fg=Ag.log.bind(Ag),t&&Og.set("logging_enabled",!0)):"function"===typeof e?Fg=e:(Fg=null,Og.remove("logging_enabled"))},Vg=function(){if(!0===jg&&(jg=!1,null===Fg&&!0===Og.get("logging_enabled")&&Ug(!0)),Fg){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Mg.apply(null,t);Fg(r)}},zg=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Vg.apply(void 0,[e].concat(n))}},qg=function(){var e="FIREBASE INTERNAL ERROR: "+Mg.apply(void 0,arguments);Ag.error(e)},Bg=function(){var e="FIREBASE FATAL ERROR: ".concat(Mg.apply(void 0,arguments));throw Ag.error(e),new Error(e)},Hg=function(){var e="FIREBASE WARNING: "+Mg.apply(void 0,arguments);Ag.warn(e)},Wg=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Gg="[MIN_NAME]",Kg="[MAX_NAME]",Qg=function(e,t){if(e===t)return 0;if(e===Gg||t===Kg)return-1;if(t===Gg||e===Kg)return 1;var n=ny(e),r=ny(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},$g=function(e,t){return e===t?0:e<t?-1:1},Yg=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+cr(t))},Xg=function e(t){if("object"!==typeof t||null===t)return cr(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=cr(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},Jg=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Zg(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var ey=function(e){Fn(!Wg(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),l="";for(a=0;a<64;a+=8){var c=parseInt(u.substr(a,8),2).toString(16);1===c.length&&(c="0"+c),l+=c}return l.toLowerCase()};var ty=new RegExp("^-?(0*)\\d{1,10}$"),ny=function(e){if(ty.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},ry=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw Hg("Exception was thrown by user callback.",e),t}),Math.floor(0))}},iy=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},ay=function(){function e(t,n){var r=this;c(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return p(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){Hg('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),oy=function(){function e(t,n,r){var i=this;c(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return p(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Vg("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Hg(e)}}]),e}(),sy=function(){function e(t){c(this,e),this.accessToken=t}return p(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();sy.OWNER="owner";var uy="5",ly=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,cy="ac",hy="websocket",fy="long_polling",dy=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];c(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Rg.get("host:"+t)||this._host}return p(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Rg.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function py(e,t,n){var r;if(Fn("string"===typeof t,"typeof type must == string"),Fn("object"===typeof n,"typeof params must == object"),t===hy)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==fy)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return Zg(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var vy=function(){function e(){c(this,e),this.counters_={}}return p(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;fr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Hn(this.counters_)}}]),e}(),my={},gy={};function yy(e){var t=e.toString();return my[t]||(my[t]=new vy),my[t]}var ky=function(){function e(t){c(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return p(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&ry((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),by="start",wy="close",_y=function(){function e(t,n,r,i,a,o,s){var u=this;c(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zg(t),this.stats_=yy(n),this.urlFn=function(e){return u.appCheckToken&&(e[cy]=u.appCheckToken),py(n,fy,e)}}return p(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ky(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if($n()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new xy((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===by)n.id=a,n.password=o;else{if(i!==wy)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[by]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=uy,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[cy]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&ly.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=cr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=zn(t),r=Jg(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!$n()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=cr(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!$n()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),xy=function(){function e(t,n,r,i){if(c(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,$n())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Dg(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){Vg("frame writing exception"),s.stack&&Vg(s.stack),Vg(s)}}}return p(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;$n()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Vg("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Vg("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),Sy=null;"undefined"!==typeof MozWebSocket?Sy=MozWebSocket:"undefined"!==typeof WebSocket&&(Sy=WebSocket);var Ey=function(){function e(t,n,r,i,a,o,s){c(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zg(this.connId),this.stats_=yy(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return p(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Rg.set("previous_websocket_failure",!0);try{var r;if($n()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(uy,"/").concat(Tg,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/Crispies-React-Foodchain-site-DIGIT-2022",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new Sy(this.connURL,[],r)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){Rg.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=lr(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Fn(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=cr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Jg(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=uy,!$n()&&"undefined"!==typeof location&&location.hostname&&ly.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[cy]=r),i&&(a.p=i),py(e,hy,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Sy&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return Rg.isInMemoryStorage||!0===Rg.get("previous_websocket_failure")}}]),e}();Ey.responsesRequiredToBeHealthy=2,Ey.healthyTimeout=3e4;var Cy=function(){function e(t){c(this,e),this.initTransports_(t)}return p(e,[{key:"initTransports_",value:function(t){var n=Ey&&Ey.isAvailable(),r=n&&!Ey.previouslyFailed();if(t.webSocketOnly&&(n||Hg("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ey];else{var i,a=this.transports_=[],o=Pn(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[_y,Ey]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();Cy.globalTransportInitialized_=!1;var Ty=function(){function e(t,n,r,i,a,o,s,u,l,h){c(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=l,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zg("c:"+this.id+":"),this.transportManager_=new Cy(n),this.log_("Connection created"),this.start_()}return p(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=iy((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=Yg("t",e),n=Yg("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=Yg("t",e),n=Yg("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=Yg("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?qg("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qg("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),uy!==n&&Hg("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),iy((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):iy((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Rg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),Iy=function(){function e(){c(this,e)}return p(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),Ny=function(){function e(t){c(this,e),this.allowedEvents_=t,this.listeners_={},Fn(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return p(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=l(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Fn(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Py=function(e){m(n,e);var t=w(n);function n(){var e;return c(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Kn()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return p(n,[{key:"getInitialEvent",value:function(e){return Fn("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(Ny),Ry=function(){function e(t,n){if(c(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return p(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Oy(){return new Ry("")}function Ay(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Dy(e){return e.pieces_.length-e.pieceNum_}function Ly(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Ry(e.pieces_,t)}function My(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Fy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function jy(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Ry(t,0)}function Uy(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Ry)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new Ry(n,0)}function Vy(e){return e.pieceNum_>=e.pieces_.length}function zy(e,t){var n=Ay(e),r=Ay(t);if(null===n)return t;if(n===r)return zy(Ly(e),Ly(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function qy(e,t){if(Dy(e)!==Dy(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function By(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Dy(e)>Dy(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Hy=p((function e(t,n){c(this,e),this.errorPrefix_=n,this.parts_=Fy(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Er(this.parts_[r]);Wy(this)}));function Wy(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Gy(e))}function Gy(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Ky=function(e){m(n,e);var t=w(n);function n(){var e,r,i;return c(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return p(n,[{key:"getInitialEvent",value:function(e){return Fn("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(Ny),Qy=1e3,$y=function(e){m(n,e);var t=w(n);function n(e,r,i,a,o,s,u,l){var h;if(c(this,n),(h=t.call(this)).repoInfo_=e,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=a,h.onServerInfoUpdate_=o,h.authTokenProvider_=s,h.appCheckTokenProvider_=u,h.authOverride_=l,h.id=n.nextPersistentConnectionId_++,h.log_=zg("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=Qy,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!$n())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Ky.getInstance().on("visible",h.onVisible_,k(h)),-1===e.host.indexOf("fblocal")&&Py.getInstance().on("online",h.onOnline_,k(h)),h}return p(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(cr(i)),Fn(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new rr,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Fn(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Fn(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=hr(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=hr(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Fn(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+cr(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):qg("Unrecognized action received from server: "+cr(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Fn(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qy,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Qy,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Qy),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=An(Rn().mark((function e(){var t,r,i,a,o,s,l,c,h,f,d,p,v,m,g=this;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,l=null,c=function(){l?l.close():(s=!0,i())},h=function(e){Fn(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(e)},this.realtime_={close:c,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,p=u(d,2),v=p[0],m=p[1],s?Vg("getToken() completed but was canceled"):(Vg("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=m&&m.token,l=new Ty(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){Hg(e+" ("+g.repoInfo_.toString()+")"),g.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&Hg(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Vg("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Vg("Resuming connection for reason: "+e),delete this.interruptReasons_[e],pr(this.interruptReasons_)&&(this.reconnectDelay_=Qy,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return Xg(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Ry(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Vg("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Vg("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=Pn(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=Pn(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";$n()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Tg.replace(/\./g,"-")]=1,Kn()?e["framework.cordova"]=1:Qn()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Py.getInstance().currentlyOnline();return pr(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&fr(e,"w")){var n=dr(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();Hg("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(Iy);$y.nextPersistentConnectionId_=0,$y.nextConnectionId_=0;var Yy,Xy=function(){function e(t,n){c(this,e),this.name=t,this.node=n}return p(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),Jy=function(){function e(){c(this,e)}return p(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Xy(Gg,e),r=new Xy(Gg,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Xy.MIN}}]),e}(),Zy=function(e){m(n,e);var t=w(n);function n(){return c(this,n),t.apply(this,arguments)}return p(n,[{key:"compare",value:function(e,t){return Qg(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw jn("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Xy.MIN}},{key:"maxPost",value:function(){return new Xy(Kg,Yy)}},{key:"makePost",value:function(e,t){return Fn("string"===typeof e,"KeyIndex indexValue must always be a string."),new Xy(e,Yy)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return Yy},set:function(e){Yy=e}}]),n}(Jy),ek=new Zy,tk=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;c(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return p(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),nk=function(){function e(t,n,r,i,a){c(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:ak.EMPTY_NODE,this.right=null!=a?a:ak.EMPTY_NODE}return p(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return ak.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return ak.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();nk.RED=!0,nk.BLACK=!1;var rk,ik=function(){function e(){c(this,e)}return p(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new nk(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),ak=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;c(this,e),this.comparator_=t,this.root_=n}return p(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,nk.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,nk.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new tk(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new tk(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new tk(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new tk(this.root_,null,this.comparator_,!0,e)}}]),e}();function ok(e,t){return Qg(e.name,t.name)}function sk(e,t){return Qg(e,t)}ak.EMPTY_NODE=new ik;var uk,lk,ck,hk=function(e){return"number"===typeof e?"number:"+ey(e):"string:"+e},fk=function(e){if(e.isLeafNode()){var t=e.val();Fn("string"===typeof t||"number"===typeof t||"object"===typeof t&&fr(t,".sv"),"Priority must be a string or number.")}else Fn(e===rk||e.isEmpty(),"priority of unexpected type.");Fn(e===rk||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},dk=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;c(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Fn(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),fk(this.priorityNode_)}return p(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Vy(t)?this:".priority"===Ay(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Ay(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Fn(".priority"!==r||1===Dy(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ly(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+hk(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?ey(this.value_):this.value_,this.lazyHash_=Lg(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Fn(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Fn(i>=0,"Unknown leaf type: "+n),Fn(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return uk},set:function(e){uk=e}}]),e}();dk.VALUE_TYPE_ORDER=["object","boolean","number","string"];var pk,vk,mk=function(e){m(n,e);var t=w(n);function n(){return c(this,n),t.apply(this,arguments)}return p(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Qg(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Xy.MIN}},{key:"maxPost",value:function(){return new Xy(Kg,new dk("[PRIORITY-POST]",ck))}},{key:"makePost",value:function(e,t){var n=lk(e);return new Xy(t,new dk("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(Jy),gk=new mk,yk=Math.log(2),kk=function(){function e(t){c(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/yk,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return p(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),bk=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new nk(o,a.node,nk.BLACK,null,null);var u=parseInt(s/2,10)+r,l=t(r,u),c=t(u+1,i);return a=e[u],o=n?n(a):a,new nk(o,a.node,nk.BLACK,l,c)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var l=i(a+1,s),c=e[a],h=n?n(c):c;u(new nk(h,c.node,r,null,l))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},l=0;l<t.count;++l){var c=t.nextBitIsOne(),h=Math.pow(2,t.count-(l+1));c?s(h,nk.BLACK):(s(h,nk.BLACK),s(h,nk.RED))}return a}(new kk(e.length));return new ak(r||t,a)},wk={},_k=function(){function e(t,n){c(this,e),this.indexes_=t,this.indexSet_=n}return p(e,[{key:"get",value:function(e){var t=dr(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ak?t:null}},{key:"hasIndex",value:function(e){return fr(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Fn(t!==ek,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(Xy.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?bk(i,t.getCompare()):wk;var u=t.toString(),l=Object.assign({},this.indexSet_);l[u]=t;var c=Object.assign({},this.indexes_);return c[u]=r,new e(c,l)}},{key:"addToIndexes",value:function(t,n){var r=this,i=vr(this.indexes_,(function(e,i){var a=dr(r.indexSet_,i);if(Fn(a,"Missing index implementation for "+i),e===wk){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(Xy.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),bk(o,a.getCompare())}return wk}var l=n.get(t.name),c=e;return l&&(c=c.remove(new Xy(t.name,l))),c.insert(t,t.node)}));return new e(i,this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(vr(this.indexes_,(function(e){if(e===wk)return e;var r=n.get(t.name);return r?e.remove(new Xy(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Fn(wk&&gk,"ChildrenNode.ts has not been loaded"),pk=pk||new e({".priority":wk},{".priority":gk})}}]),e}(),xk=function(){function e(t,n,r){c(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&fk(this.priorityNode_),this.children_.isEmpty()&&Fn(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return p(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||vk}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?vk:t}},{key:"getChild",value:function(e){var t=Ay(e);return null===t?this:this.getImmediateChild(t).getChild(Ly(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Fn(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new Xy(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?vk:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=Ay(e);if(null===n)return t;Fn(".priority"!==Ay(e)||1===Dy(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Ly(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(gk,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+hk(this.getPriority().val())+":"),this.forEachChild(gk,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Lg(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Xy(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Xy(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Xy(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Xy.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Xy.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Sk?-1:0}},{key:"withIndex",value:function(t){if(t===ek||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===ek||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(gk),r=t.getIterator(gk),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===ek?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return vk||(vk=new e(new ak(sk),null,_k.Default))}}]),e}();xk.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var Sk=new(function(e){m(n,e);var t=w(n);function n(){return c(this,n),t.call(this,new ak(sk),xk.EMPTY_NODE,_k.Default)}return p(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return xk.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(xk));Object.defineProperties(Xy,{MIN:{value:new Xy(Gg,xk.EMPTY_NODE)},MAX:{value:new Xy(Kg,Sk)}}),Zy.__EMPTY_NODE=xk.EMPTY_NODE,dk.__childrenNodeConstructor=xk,function(e){rk=e}(Sk),function(e){ck=e}(Sk);function Ek(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return xk.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Fn(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new dk(n,Ek(t))}if(e instanceof Array){var r=xk.EMPTY_NODE;return Zg(e,(function(t,n){if(fr(e,t)&&"."!==t.substring(0,1)){var i=Ek(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(Ek(t))}var i=[],a=!1,o=e;if(Zg(o,(function(e,t){if("."!==e.substring(0,1)){var n=Ek(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new Xy(e,n)))}})),0===i.length)return xk.EMPTY_NODE;var s=bk(i,ok,(function(e){return e.name}),sk);if(a){var u=bk(i,gk.getCompare());return new xk(s,Ek(t),new _k({".priority":u},{".priority":gk}))}return new xk(s,Ek(t),_k.Default)}!function(e){lk=e}(Ek);var Ck=function(e){m(n,e);var t=w(n);function n(e){var r;return c(this,n),(r=t.call(this)).indexPath_=e,Fn(!Vy(e)&&".priority"!==Ay(e),"Can't create PathIndex with empty path or .priority key"),r}return p(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Qg(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=Ek(e),r=xk.EMPTY_NODE.updateChild(this.indexPath_,n);return new Xy(t,r)}},{key:"maxPost",value:function(){var e=xk.EMPTY_NODE.updateChild(this.indexPath_,Sk);return new Xy(Kg,e)}},{key:"toString",value:function(){return Fy(this.indexPath_,0).join("/")}}]),n}(Jy),Tk=function(e){m(n,e);var t=w(n);function n(){return c(this,n),t.apply(this,arguments)}return p(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?Qg(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Xy.MIN}},{key:"maxPost",value:function(){return Xy.MAX}},{key:"makePost",value:function(e,t){var n=Ek(e);return new Xy(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(Jy),Ik=new Tk;function Nk(e){return{type:"value",snapshotNode:e}}function Pk(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Rk(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Ok(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var Ak=function(){function e(t){c(this,e),this.index_=t}return p(e,[{key:"updateChild",value:function(e,t,n,r,i,a){Fn(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(Rk(t,o)):Fn(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(Pk(t,n)):a.trackChildChange(Ok(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(gk,(function(e,r){t.hasChild(e)||n.trackChildChange(Rk(e,r))})),t.isLeafNode()||t.forEachChild(gk,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Ok(t,r,i))}else n.trackChildChange(Pk(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?xk.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),Dk=function(){function e(t){c(this,e),this.indexedFilter_=new Ak(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return p(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new Xy(t,n))||(n=xk.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=xk.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(xk.EMPTY_NODE);var i=this;return t.forEachChild(gk,(function(e,t){i.matches(new Xy(e,t))||(r=r.updateImmediateChild(e,xk.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),Lk=function(){function e(t){var n=this;c(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Dk(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return p(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new Xy(t,n))||(n=xk.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=xk.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=xk.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(this.withinDirectionalStart(o)){if(!this.withinDirectionalEnd(o))break;r=r.updateImmediateChild(o.name,o.node),a++}}}else{var s;r=(r=t.withIndex(this.index_)).updatePriority(xk.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);for(var u=0;s.hasNext();){var l=s.getNext();u<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?u++:r=r.updateImmediateChild(l.name,xk.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var s=e;Fn(s.numChildren()===this.limit_,"");var u=new Xy(t,n),l=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),c=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,u);if(c&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(Ok(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(Rk(t,h));var p=s.updateImmediateChild(t,xk.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Pk(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:c&&a(l,u)>=0?(null!=i&&(i.trackChildChange(Rk(l.name,l.node)),i.trackChildChange(Pk(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(l.name,xk.EMPTY_NODE)):e}}]),e}(),Mk=function(){function e(){c(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=gk}return p(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Fn(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Fn(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Gg}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Fn(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Fn(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Kg}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Fn(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===gk}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Fk(e){var t,n={};if(e.isDefault())return n;if(e.index_===gk?t="$priority":e.index_===Ik?t="$value":e.index_===ek?t="$key":(Fn(e.index_ instanceof Ck,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=cr(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=cr(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+cr(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=cr(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+cr(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function jk(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==gk&&(t.i=e.index_.toString()),t}var Uk=function(e){m(n,e);var t=w(n);function n(e,r,i,a){var o;return c(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=zg("p:rest:"),o.listens_={},o}return p(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var l=Fk(e._queryParams);this.restRequest_(o+".json",l,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),dr(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=Fk(e._queryParams),r=e._path.toString(),i=new rr;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=u(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var l=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+yr(n);t.log_("Sending REST request for "+l);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=lr(c.responseText)}catch(n){Hg("Failed to parse JSON response for "+l+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&Hg("Got unsuccessful REST response for "+l+" Status: "+c.status),r(c.status);r=null}},c.open("GET",l,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Fn(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(Iy),Vk=function(){function e(){c(this,e),this.rootNode_=xk.EMPTY_NODE}return p(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function zk(){return{value:null,children:new Map}}function qk(e,t,n){if(Vy(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Ay(t);e.children.has(r)||e.children.set(r,zk()),qk(e.children.get(r),t=Ly(t),n)}}function Bk(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Bk(r,new Ry(t.toString()+"/"+e),n)}))}var Hk,Wk=function(){function e(t){c(this,e),this.collection_=t,this.last_=null}return p(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Zg(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Gk=function(){function e(t,n){c(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Wk(t);var r=1e4+2e4*Math.random();iy(this.reportStats_.bind(this),Math.floor(r))}return p(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Zg(t,(function(t,i){i>0&&fr(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),iy(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Kk(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Hk||(Hk={}));var Qk,$k=function(){function e(t,n,r){c(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Hk.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return p(e,[{key:"operationForChild",value:function(t){if(Vy(this.path)){if(null!=this.affectedTree.value)return Fn(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Ry(t));return new e(Oy(),n,this.revert)}return Fn(Ay(this.path)===t,"operationForChild called for unrelated child."),new e(Ly(this.path),this.affectedTree,this.revert)}}]),e}(),Yk=function(){function e(t,n){c(this,e),this.source=t,this.path=n,this.type=Hk.LISTEN_COMPLETE}return p(e,[{key:"operationForChild",value:function(t){return Vy(this.path)?new e(this.source,Oy()):new e(this.source,Ly(this.path))}}]),e}(),Xk=function(){function e(t,n,r){c(this,e),this.source=t,this.path=n,this.snap=r,this.type=Hk.OVERWRITE}return p(e,[{key:"operationForChild",value:function(t){return Vy(this.path)?new e(this.source,Oy(),this.snap.getImmediateChild(t)):new e(this.source,Ly(this.path),this.snap)}}]),e}(),Jk=function(){function e(t,n,r){c(this,e),this.source=t,this.path=n,this.children=r,this.type=Hk.MERGE}return p(e,[{key:"operationForChild",value:function(t){if(Vy(this.path)){var n=this.children.subtree(new Ry(t));return n.isEmpty()?null:n.value?new Xk(this.source,Oy(),n.value):new e(this.source,Oy(),n)}return Fn(Ay(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Ly(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),Zk=function(){function e(t,n,r){c(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return p(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Vy(e))return this.isFullyInitialized()&&!this.filtered_;var t=Ay(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),eb=p((function e(t){c(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function tb(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw jn("Should only compare child_ events.");var r=new Xy(t.childName,t.snapshotNode),i=new Xy(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function nb(e,t){return{eventCache:e,serverCache:t}}function rb(e,t,n,r){return nb(new Zk(t,n,r),e.serverCache)}function ib(e,t,n,r){return nb(e.eventCache,new Zk(t,n,r))}function ab(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ob(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var sb=function(){return Qk||(Qk=new ak($g)),Qk},ub=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sb();c(this,e),this.value=t,this.children=n}return p(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Oy(),value:this.value};if(Vy(e))return null;var n=Ay(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Ly(e),t);return null!=i?{path:Uy(new Ry(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Vy(t))return this;var n=Ay(t),r=this.children.get(n);return null!==r?r.subtree(Ly(t)):new e(null)}},{key:"set",value:function(t,n){if(Vy(t))return new e(n,this.children);var r=Ay(t),i=(this.children.get(r)||new e(null)).set(Ly(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(Vy(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Ay(t),r=this.children.get(n);if(r){var i,a=r.remove(Ly(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Vy(e))return this.value;var t=Ay(e),n=this.children.get(t);return n?n.get(Ly(e)):null}},{key:"setTree",value:function(t,n){if(Vy(t))return n;var r,i=Ay(t),a=(this.children.get(i)||new e(null)).setTree(Ly(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Oy(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Uy(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Oy(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Vy(e))return null;var i=Ay(e),a=this.children.get(i);return a?a.findOnPath_(Ly(e),Uy(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Oy(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Vy(t))return this;this.value&&r(n,this.value);var i=Ay(t),a=this.children.get(i);return a?a.foreachOnPath_(Ly(t),Uy(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Oy(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Uy(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return Zg(t,(function(e,t){n=n.set(new Ry(e),t)})),n}}]),e}(),lb=function(){function e(t){c(this,e),this.writeTree_=t}return p(e,null,[{key:"empty",value:function(){return new e(new ub(null))}}]),e}();function cb(e,t,n){if(Vy(t))return new lb(new ub(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=zy(i,t);return a=a.updateChild(o,n),new lb(e.writeTree_.set(i,a))}var s=new ub(n),u=e.writeTree_.setTree(t,s);return new lb(u)}function hb(e,t,n){var r=e;return Zg(n,(function(e,n){r=cb(r,Uy(t,e),n)})),r}function fb(e,t){if(Vy(t))return lb.empty();var n=e.writeTree_.setTree(t,new ub(null));return new lb(n)}function db(e,t){return null!=pb(e,t)}function pb(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(zy(n.path,t)):null}function vb(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(gk,(function(e,n){t.push(new Xy(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Xy(e,n.value))})),t}function mb(e,t){if(Vy(t))return e;var n=pb(e,t);return new lb(null!=n?new ub(n):e.writeTree_.subtree(t))}function gb(e){return e.writeTree_.isEmpty()}function yb(e,t){return kb(Oy(),e.writeTree_,t)}function kb(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Fn(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=kb(Uy(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Uy(e,".priority"),r)),n}function bb(e,t){return Db(t,e)}function wb(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function _b(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Fn(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&xb(s,r.path)?i=!1:By(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=Eb(e.allWrites,Sb,Oy()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=fb(e.visibleWrites,r.path):Zg(r.children,(function(t){e.visibleWrites=fb(e.visibleWrites,Uy(r.path,t))}));return!0}return!1}function xb(e,t){if(e.snap)return By(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&By(Uy(e.path,n),t))return!0;return!1}function Sb(e){return e.visible}function Eb(e,t,n){for(var r=lb.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)By(n,o)?r=cb(r,s=zy(n,o),a.snap):By(o,n)&&(s=zy(o,n),r=cb(r,Oy(),a.snap.getChild(s)));else{if(!a.children)throw jn("WriteRecord should have .snap or .children");if(By(n,o))r=hb(r,s=zy(n,o),a.children);else if(By(o,n))if(Vy(s=zy(o,n)))r=hb(r,Oy(),a.children);else{var u=dr(a.children,Ay(s));if(u){var l=u.getChild(Ly(s));r=cb(r,Oy(),l)}}}}}return r}function Cb(e,t,n,r,i){if(r||i){var a=mb(e.visibleWrites,t);if(!i&&gb(a))return n;if(i||null!=n||db(a,Oy())){return yb(Eb(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(By(e.path,t)||By(t,e.path))}),t),n||xk.EMPTY_NODE)}return null}var o=pb(e.visibleWrites,t);if(null!=o)return o;var s=mb(e.visibleWrites,t);return gb(s)?n:null!=n||db(s,Oy())?yb(s,n||xk.EMPTY_NODE):null}function Tb(e,t,n,r){return Cb(e.writeTree,e.treePath,t,n,r)}function Ib(e,t){return function(e,t,n){var r=xk.EMPTY_NODE,i=pb(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(gk,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=mb(e.visibleWrites,t);return n.forEachChild(gk,(function(e,t){var n=yb(mb(a,new Ry(e)),t);r=r.updateImmediateChild(e,n)})),vb(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return vb(mb(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Nb(e,t,n,r){return function(e,t,n,r,i){Fn(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Uy(t,n);if(db(e.visibleWrites,a))return null;var o=mb(e.visibleWrites,a);return gb(o)?i.getChild(n):yb(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Pb(e,t){return function(e,t){return pb(e.visibleWrites,t)}(e.writeTree,Uy(e.treePath,t))}function Rb(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=mb(e.visibleWrites,t),l=pb(u,Oy());if(null!=l)s=l;else{if(null==n)return[];s=yb(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=o.getCompare(),f=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=f.getNext();d&&c.length<i;)0!==h(d,r)&&c.push(d),d=f.getNext();return c}(e.writeTree,e.treePath,t,n,r,i,a)}function Ob(e,t,n){return function(e,t,n,r){var i=Uy(t,n),a=pb(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?yb(mb(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Ab(e,t){return Db(Uy(e.treePath,t),e.writeTree)}function Db(e,t){return{treePath:e,writeTree:t}}var Lb=function(){function e(){c(this,e),this.changeMap=new Map}return p(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Fn("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Fn(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Ok(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Rk(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Pk(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw jn("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Ok(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),Mb=new(function(){function e(){c(this,e)}return p(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),Fb=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;c(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return p(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Zk(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ob(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ob(this.viewCache_),i=Rb(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function jb(e,t,n,r,i){var a,o,s=new Lb;if(n.type===Hk.OVERWRITE){var u=n;u.source.fromUser?a=zb(e,t,u.path,u.snap,r,i,s):(Fn(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!Vy(u.path),a=Vb(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===Hk.MERGE){var l=n;l.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var l=Uy(n,r);qb(t,Ay(l))&&(s=zb(e,s,l,u,i,a,o))})),r.foreach((function(r,u){var l=Uy(n,r);qb(t,Ay(l))||(s=zb(e,s,l,u,i,a,o))})),s}(e,t,l.path,l.children,r,i,s):(Fn(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered(),a=Hb(e,t,l.path,l.children,r,i,o,s))}else if(n.type===Hk.ACK_USER_WRITE){var c=n;a=c.revert?function(e,t,n,r,i,a){var o;if(null!=Pb(r,n))return t;var s,u=new Fb(r,t,i),l=t.eventCache.getNode();if(Vy(n)||".priority"===Ay(n)){var c;if(t.serverCache.isFullyInitialized())c=Tb(r,ob(t));else{var h=t.serverCache.getNode();Fn(h instanceof xk,"serverChildren would be complete if leaf node"),c=Ib(r,h)}s=e.filter.updateFullNode(l,c,a)}else{var f=Ay(n),d=Ob(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=l.getImmediateChild(f)),(s=null!=d?e.filter.updateChild(l,f,d,Ly(n),u,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(l,f,xk.EMPTY_NODE,Ly(n),u,a):l).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Tb(r,ob(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=Pb(r,Oy()),rb(t,s,o,e.filter.filtersNodes())}(e,t,c.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=Pb(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(Vy(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Vb(e,t,n,u.getNode().getChild(n),i,a,s,o);if(Vy(n)){var l=new ub(null);return u.getNode().forEachChild(ek,(function(e,t){l=l.set(new Ry(e),t)})),Hb(e,t,n,l,i,a,s,o)}return t}var c=new ub(null);return r.foreach((function(e,t){var r=Uy(n,e);u.isCompleteForPath(r)&&(c=c.set(e,u.getNode().getChild(r)))})),Hb(e,t,n,c,i,a,s,o)}(e,t,c.path,c.affectedTree,r,i,s)}else{if(n.type!==Hk.LISTEN_COMPLETE)throw jn("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=ib(t,a.getNode(),a.isFullyInitialized()||Vy(n),a.isFiltered());return Ub(e,o,n,r,Mb,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=ab(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Nk(ab(t)))}}(t,a,h),{viewCache:a,changes:h}}function Ub(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=Pb(r,n))return t;if(Vy(n))if(Fn(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var l=ob(t),c=Ib(r,l instanceof xk?l:xk.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),c,a)}else{var h=Tb(r,ob(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=Ay(n);if(".priority"===f){Fn(1===Dy(n),"Can't have a priority with additional path components");var d=u.getNode(),p=Nb(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,m=Ly(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var g=Nb(r,n,u.getNode(),s);v=null!=g?u.getNode().getImmediateChild(f).updateChild(m,g):u.getNode().getImmediateChild(f)}else v=Ob(r,f,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),f,v,m,i,a):u.getNode()}}return rb(t,o,u.isFullyInitialized()||Vy(n),e.filter.filtersNodes())}function Vb(e,t,n,r,i,a,o,s){var u,l=t.serverCache,c=o?e.filter:e.filter.getIndexedFilter();if(Vy(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){var h=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),h,null)}else{var f=Ay(n);if(!l.isCompleteForPath(n)&&Dy(n)>1)return t;var d=Ly(n),p=l.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?c.updatePriority(l.getNode(),p):c.updateChild(l.getNode(),f,p,d,Mb,null)}var v=ib(t,u,l.isFullyInitialized()||Vy(n),c.filtersNodes());return Ub(e,v,n,i,new Fb(i,v,a),s)}function zb(e,t,n,r,i,a,o){var s,u,l=t.eventCache,c=new Fb(i,t,a);if(Vy(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=rb(t,u,!0,e.filter.filtersNodes());else{var h=Ay(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=rb(t,u,l.isFullyInitialized(),l.isFiltered());else{var f,d=Ly(n),p=l.getNode().getImmediateChild(h);if(Vy(d))f=r;else{var v=c.getCompleteChild(h);f=null!=v?".priority"===My(d)&&v.getChild(jy(d)).isEmpty()?v:v.updateChild(d,r):xk.EMPTY_NODE}if(p.equals(f))s=t;else s=rb(t,e.filter.updateChild(l.getNode(),h,f,d,c,o),l.isFullyInitialized(),e.filter.filtersNodes())}}return s}function qb(e,t){return e.eventCache.isCompleteForChild(t)}function Bb(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Hb(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,l=t;u=Vy(n)?r:new ub(null).setTree(n,r);var c=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(c.hasChild(n)){var u=Bb(0,t.serverCache.getNode().getImmediateChild(n),r);l=Vb(e,l,new Ry(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!c.hasChild(n)&&!u){var h=Bb(0,t.serverCache.getNode().getImmediateChild(n),r);l=Vb(e,l,new Ry(n),h,i,a,o,s)}})),l}var Wb,Gb=function(){function e(t,n){c(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new Ak(i.getIndex()),o=(r=i).loadsAllData()?new Ak(r.getIndex()):r.hasLimit()?new Lk(r):new Dk(r);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,u=n.eventCache,l=a.updateFullNode(xk.EMPTY_NODE,s.getNode(),null),h=o.updateFullNode(xk.EMPTY_NODE,u.getNode(),null),f=new Zk(l,s.isFullyInitialized(),a.filtersNodes()),d=new Zk(h,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=nb(d,f),this.eventGenerator_=new eb(this.query_)}return p(e,[{key:"query",get:function(){return this.query_}}]),e}();function Kb(e,t){var n=ob(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Vy(t)&&!n.getImmediateChild(Ay(t)).isEmpty())?n.getChild(t):null}function Qb(e){return 0===e.eventRegistrations_.length}function $b(e,t,n){var r=[];if(n){Fn(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(s)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function Yb(e,t,n,r){t.type===Hk.MERGE&&null!==t.source.queryId&&(Fn(ob(e.viewCache_),"We should always have a full cache before handling merges"),Fn(ab(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=jb(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,Fn(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Fn(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Fn(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Xb(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Xb(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),tb(e,i,"child_removed",t,r,n),tb(e,i,"child_added",t,r,n),tb(e,i,"child_moved",a,r,n),tb(e,i,"child_changed",t,r,n),tb(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var Jb,Zb=p((function e(){c(this,e),this.views=new Map}));function ew(e){return 0===e.views.size}function tw(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return Fn(null!=a,"SyncTree gave us an op for an invalid query."),Yb(a,t,n,r)}var o,s=[],u=Pn(e.views.values());try{for(u.s();!(o=u.n()).done;){var l=o.value;s=s.concat(Yb(l,t,n,r))}}catch(c){u.e(c)}finally{u.f()}return s}function nw(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var s=Tb(n,i?r:null),u=!1;s?u=!0:r instanceof xk?(s=Ib(n,r),u=!1):(s=xk.EMPTY_NODE,u=!1);var l=nb(new Zk(s,u,!1),new Zk(r,i,!1));return new Gb(t,l)}return o}function rw(e,t,n,r,i,a){var o=nw(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(gk,(function(e,t){r.push(Pk(e,t))})),n.isFullyInitialized()&&r.push(Nk(n.getNode())),Xb(e,r,n.getNode(),t)}(o,n)}function iw(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],s=lw(e);if("default"===i){var l,c=Pn(e.views.entries());try{for(c.s();!(l=c.n()).done;){var h=u(l.value,2),f=h[0],d=h[1];o=o.concat($b(d,n,r)),Qb(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){c.e(v)}finally{c.f()}}else{var p=e.views.get(i);p&&(o=o.concat($b(p,n,r)),Qb(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return s&&!lw(e)&&a.push(new(Fn(Wb,"Reference.ts has not been loaded"),Wb)(t._repo,t._path)),{removed:a,events:o}}function aw(e){var t,n=[],r=Pn(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function ow(e,t){var n,r=null,i=Pn(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||Kb(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function sw(e,t){if(t._queryParams.loadsAllData())return cw(e);var n=t._queryIdentifier;return e.views.get(n)}function uw(e,t){return null!=sw(e,t)}function lw(e){return null!=cw(e)}function cw(e){var t,n=Pn(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var hw=1,fw=p((function e(t){c(this,e),this.listenProvider_=t,this.syncPointTree_=new ub(null),this.pendingWriteTree_={visibleWrites:lb.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function dw(e,t,n,r,i){return function(e,t,n,r,i){Fn(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=cb(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?ww(e,new Xk({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function pw(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=wb(e.pendingWriteTree_,t),i=_b(e.pendingWriteTree_,t);if(i){var a=new ub(null);return null!=r.snap?a=a.set(Oy(),!0):Zg(r.children,(function(e){a=a.set(new Ry(e),!0)})),ww(e,new $k(r.path,a,n))}return[]}function vw(e,t,n){return ww(e,new Xk({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function mw(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),s=[];if(o&&("default"===t._queryIdentifier||uw(o,t))){var u=iw(o,t,n,r);ew(o)&&(e.syncPointTree_=e.syncPointTree_.remove(a));var l=u.removed;if(s=u.events,!i){var c=-1!==l.findIndex((function(e){return e._queryParams.loadsAllData()})),h=e.syncPointTree_.findOnPath(a,(function(e,t){return lw(t)}));if(c&&!h){var f=e.syncPointTree_.subtree(a);if(!f.isEmpty())for(var d=Pw(f),p=0;p<d.length;++p){var v=d[p],m=v.query,g=Sw(e,v);e.listenProvider_.startListening(Rw(m),Ew(e,m),g.hashFn,g.onComplete)}}if(!h&&l.length>0&&!r)if(c){var y=null;e.listenProvider_.stopListening(Rw(t),y)}else l.forEach((function(t){var n=e.queryToTagMap.get(Cw(t));e.listenProvider_.stopListening(Rw(t),n)}))}Ow(e,l)}return s}function gw(e,t,n,r){var i=Tw(e,r);if(null!=i){var a=Iw(i),o=a.path,s=a.queryId,u=zy(o,t);return Nw(e,o,new Xk(Kk(s),u,n))}return[]}function yw(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=zy(e,i);a=a||ow(t,n),o=o||lw(t)}));var s,u=e.syncPointTree_.get(i);if(u?(o=o||lw(u),a=a||ow(u,Oy())):(u=new Zb,e.syncPointTree_=e.syncPointTree_.set(i,u)),null!=a)s=!0;else{s=!1,a=xk.EMPTY_NODE;var l=e.syncPointTree_.subtree(i);l.foreachChild((function(e,t){var n=ow(t,Oy());n&&(a=a.updateImmediateChild(e,n))}))}var c=uw(u,t);if(!c&&!t._queryParams.loadsAllData()){var h=Cw(t);Fn(!e.queryToTagMap.has(h),"View does not exist, but we have a tag");var f=Aw();e.queryToTagMap.set(h,f),e.tagToQueryMap.set(f,h)}var d=bb(e.pendingWriteTree_,i),p=rw(u,t,n,d,a,s);if(!c&&!o&&!r){var v=sw(u,t);p=p.concat(Dw(e,t,v))}return p}function kw(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=ow(n,zy(e,t));if(r)return r}));return Cb(r,t,i,n,!0)}function bw(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=zy(e,n);r=r||ow(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||ow(i,Oy()):(i=new Zb,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new Zk(r,!0,!1):null;return function(e){return ab(e.viewCache_)}(nw(i,t,bb(e.pendingWriteTree_,t._path),a?o.getNode():xk.EMPTY_NODE,a))}function ww(e,t){return _w(t,e.syncPointTree_,null,bb(e.pendingWriteTree_,Oy()))}function _w(e,t,n,r){if(Vy(e.path))return xw(e,t,n,r);var i=t.get(Oy());null==n&&null!=i&&(n=ow(i,Oy()));var a=[],o=Ay(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var l=n?n.getImmediateChild(o):null,c=Ab(r,o);a=a.concat(_w(s,u,l,c))}return i&&(a=a.concat(tw(i,e,r,n))),a}function xw(e,t,n,r){var i=t.get(Oy());null==n&&null!=i&&(n=ow(i,Oy()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=Ab(r,t),u=e.operationForChild(t);u&&(a=a.concat(xw(u,i,o,s)))})),i&&(a=a.concat(tw(i,e,r,n))),a}function Sw(e,t){var n=t.query,r=Ew(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||xk.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=Tw(e,n);if(r){var i=Iw(r),a=i.path,o=i.queryId,s=zy(a,t);return Nw(e,a,new Yk(Kk(o),s))}return[]}(e,n._path,r):function(e,t){return ww(e,new Yk({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return mw(e,n,null,i)}}}function Ew(e,t){var n=Cw(t);return e.queryToTagMap.get(n)}function Cw(e){return e._path.toString()+"$"+e._queryIdentifier}function Tw(e,t){return e.tagToQueryMap.get(t)}function Iw(e){var t=e.indexOf("$");return Fn(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Ry(e.substr(0,t))}}function Nw(e,t,n){var r=e.syncPointTree_.get(t);return Fn(r,"Missing sync point for query tag that we're tracking"),tw(r,n,bb(e.pendingWriteTree_,t),null)}function Pw(e){return e.fold((function(e,t,n){if(t&&lw(t))return[cw(t)];var r=[];return t&&(r=aw(t)),Zg(n,(function(e,t){r=r.concat(t)})),r}))}function Rw(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Fn(Jb,"Reference.ts has not been loaded"),Jb)(e._repo,e._path):e}function Ow(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=Cw(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}function Aw(){return hw++}function Dw(e,t,n){var r=t._path,i=Ew(e,t),a=Sw(e,n),o=e.listenProvider_.startListening(Rw(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)Fn(!lw(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!Vy(e)&&t&&lw(t))return[cw(t).query];var r=[];return t&&(r=r.concat(aw(t).map((function(e){return e.query})))),Zg(n,(function(e,t){r=r.concat(t)})),r})),l=0;l<u.length;++l){var c=u[l];e.listenProvider_.stopListening(Rw(c),Ew(e,c))}return o}var Lw=function(){function e(t){c(this,e),this.node_=t}return p(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),Mw=function(){function e(t,n){c(this,e),this.syncTree_=t,this.path_=n}return p(e,[{key:"getImmediateChild",value:function(t){var n=Uy(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return kw(this.syncTree_,this.path_)}}]),e}(),Fw=function(e,t,n){return e&&"object"===typeof e?(Fn(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?jw(e[".sv"],t,n):"object"===typeof e[".sv"]?Uw(e[".sv"],t):void Fn(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},jw=function(e,t,n){if("timestamp"===e)return n.timestamp;Fn(!1,"Unexpected server value: "+e)},Uw=function(e,t,n){e.hasOwnProperty("increment")||Fn(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Fn(!1,"Unexpected increment value: "+r);var i=t.node();if(Fn(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},Vw=function(e,t,n,r){return qw(t,new Mw(n,e),r)},zw=function(e,t,n){return qw(e,new Lw(t),n)};function qw(e,t,n){var r,i=e.getPriority().val(),a=Fw(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=Fw(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new dk(s,Ek(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new dk(a))),u.forEachChild(gk,(function(e,i){var a=qw(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var Bw=p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};c(this,e),this.name=t,this.parent=n,this.node=r}));function Hw(e,t){for(var n=t instanceof Ry?t:new Ry(t),r=e,i=Ay(n);null!==i;){var a=dr(r.node.children,i)||{children:{},childCount:0};r=new Bw(i,r,a),i=Ay(n=Ly(n))}return r}function Ww(e){return e.node.value}function Gw(e,t){e.node.value=t,Xw(e)}function Kw(e){return e.node.childCount>0}function Qw(e,t){Zg(e.node.children,(function(n,r){t(new Bw(n,e,r))}))}function $w(e,t,n,r){n&&!r&&t(e),Qw(e,(function(e){$w(e,t,!0,r)})),n&&r&&t(e)}function Yw(e){return new Ry(null===e.parent?e.name:Yw(e.parent)+"/"+e.name)}function Xw(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Ww(e)&&!Kw(e)}(n),i=fr(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Xw(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Xw(e))}(e.parent,e.name,e)}var Jw=/[\[\].#$\/\u0000-\u001F\u007F]/,Zw=/[\[\].#$\u0000-\u001F\u007F]/,e_=10485760,t_=function(e){return"string"===typeof e&&0!==e.length&&!Jw.test(e)},n_=function(e){return"string"===typeof e&&0!==e.length&&!Zw.test(e)},r_=function(e,t,n,r){r&&void 0===t||i_(Sr(e,"value"),t,n)},i_=function e(t,n,r){var i=r instanceof Ry?new Hy(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Gy(i));if("function"===typeof n)throw new Error(t+"contains a function "+Gy(i)+" with contents = "+n.toString());if(Wg(n))throw new Error(t+"contains "+n.toString()+" "+Gy(i));if("string"===typeof n&&n.length>e_/3&&Er(n)>e_)throw new Error(t+"contains a string greater than "+e_+" utf8 bytes "+Gy(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(Zg(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!t_(n)))throw new Error(t+" contains an invalid key ("+n+") "+Gy(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,u;u=n,(s=i).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(u),s.byteLength_+=Er(u),Wy(s),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Er(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Gy(i)+" in addition to actual children.")}},a_=function(e,t,n,r){if((!r||void 0!==n)&&!n_(n))throw new Error(Sr(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},o_=function(e,t){if(".info"===Ay(t))throw new Error(e+" failed = Can't modify data under /.info/")},s_=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!t_(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),n_(e)}(n))throw new Error(Sr(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},u_=p((function e(){c(this,e),this.eventLists_=[],this.recursionDepth_=0}));function l_(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||qy(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function c_(e,t,n){l_(e,n),f_(e,(function(e){return qy(e,t)}))}function h_(e,t,n){l_(e,n),f_(e,(function(e){return By(e,t)||By(t,e)}))}function f_(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(d_(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function d_(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();Fg&&Vg("event: "+n.toString()),ry(r)}}}var p_="repo_interrupt",v_=function(){function e(t,n,r,i){c(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new u_,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zk(),this.transactionQueueTree_=new Bw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return p(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function m_(e,t,n){if(e.stats_=yy(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Uk(e.repoInfo_,(function(t,n,r,i){k_(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return b_(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{cr(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new $y(e.repoInfo_,t,(function(t,n,r,i){k_(e,t,n,r,i)}),(function(t){b_(e,t)}),(function(t){!function(e,t){Zg(t,(function(t,n){w_(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return gy[n]||(gy[n]=t()),gy[n]}(e.repoInfo_,(function(){return new Gk(e.stats_,e.server_)})),e.infoData_=new Vk,e.infoSyncTree_=new fw({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=vw(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),w_(e,"connected",!1),e.serverSyncTree_=new fw({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);h_(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function g_(e){var t=e.infoData_.getNode(new Ry(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function y_(e){return(t=(t={timestamp:g_(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function k_(e,t,n,r,i){e.dataUpdateCount++;var a=new Ry(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=vr(n,(function(e){return Ek(e)}));o=function(e,t,n,r){var i=Tw(e,r);if(i){var a=Iw(i),o=a.path,s=a.queryId,u=zy(o,t),l=ub.fromObject(n);return Nw(e,o,new Jk(Kk(s),u,l))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=Ek(n);o=gw(e.serverSyncTree_,a,u,i)}else if(r){var l=vr(n,(function(e){return Ek(e)}));o=function(e,t,n){var r=ub.fromObject(n);return ww(e,new Jk({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,l)}else{var c=Ek(n);o=vw(e.serverSyncTree_,a,c)}var h=a;o.length>0&&(h=R_(e,a)),h_(e.eventQueue_,h,o)}function b_(e,t){w_(e,"connected",t),!1===t&&function(e){C_(e,"onDisconnectEvents");var t=y_(e),n=zk();Bk(e.onDisconnect_,Oy(),(function(r,i){var a=Vw(r,i,e.serverSyncTree_,t);qk(n,r,a)}));var r=[];Bk(n,Oy(),(function(t,n){r=r.concat(vw(e.serverSyncTree_,t,n));var i=M_(e,t);R_(e,i)})),e.onDisconnect_=zk(),h_(e.eventQueue_,Oy(),r)}(e)}function w_(e,t,n){var r=new Ry("/.info/"+t),i=Ek(n);e.infoData_.updateSnapshot(r,i);var a=vw(e.infoSyncTree_,r,i);h_(e.eventQueue_,r,a)}function __(e){return e.nextWriteId_++}function x_(e,t,n,r,i){C_(e,"set",{path:t.toString(),value:n,priority:r});var a=y_(e),o=Ek(n,r),s=kw(e.serverSyncTree_,t),u=zw(o,s,a),l=__(e),c=dw(e.serverSyncTree_,t,u,l,!0);l_(e.eventQueue_,c),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||Hg("set at "+t+" failed: "+n);var o=pw(e.serverSyncTree_,l,!a);h_(e.eventQueue_,t,o),T_(e,i,n,r)}));var h=M_(e,t);R_(e,h),h_(e.eventQueue_,h,[])}function S_(e,t,n){var r;r=".info"===Ay(t._path)?mw(e.infoSyncTree_,t,n):mw(e.serverSyncTree_,t,n),c_(e.eventQueue_,t._path,r)}function E_(e){e.persistentConnection_&&e.persistentConnection_.interrupt(p_)}function C_(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Vg.apply(void 0,[t].concat(r))}function T_(e,t,n,r){t&&ry((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function I_(e,t,n){return kw(e.serverSyncTree_,t,n)||xk.EMPTY_NODE}function N_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||L_(e,t),Ww(t)){var n=A_(e,t);Fn(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&P_(e,Yw(t),n)}else Kw(t)&&Qw(t,(function(t){N_(e,t)}))}function P_(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=I_(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];Fn(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var l=zy(t,u.path);a=a.updateChild(l,u.currentOutputSnapshotRaw)}var c=a.val(!0),h=t;e.server_.put(h.toString(),c,(function(r){C_(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(pw(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);L_(e,Hw(e.transactionQueueTree_,t)),N_(e,e.transactionQueueTree_),h_(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)ry(a[u])}else{if("datastale"===r)for(var l=0;l<n.length;l++)3===n[l].status?n[l].status=4:n[l].status=0;else{Hg("transaction at "+h.toString()+" failed: "+r);for(var c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=r}R_(e,t)}}),o)}function R_(e,t){var n=O_(e,t),r=Yw(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u=t[a],l=zy(n,u.path),c=!1,h=void 0;if(Fn(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)c=!0,h=u.abortReason,i=i.concat(pw(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)c=!0,h="maxretry",i=i.concat(pw(e.serverSyncTree_,u.currentWriteId,!0));else{var f=I_(e,u.path,o);u.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){i_("transaction failed: Data returned ",d,u.path);var p=Ek(d);"object"===typeof d&&null!=d&&fr(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=u.currentWriteId,m=y_(e),g=zw(p,f,m);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=g,u.currentWriteId=__(e),o.splice(o.indexOf(v),1),i=(i=i.concat(dw(e.serverSyncTree_,u.path,g,u.currentWriteId,u.applyLocally))).concat(pw(e.serverSyncTree_,v,!0))}else c=!0,h="nodata",i=i.concat(pw(e.serverSyncTree_,u.currentWriteId,!0))}h_(e.eventQueue_,n,i),i=[],c&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},u=0;u<t.length;u++)s(u);L_(e,e.transactionQueueTree_);for(var l=0;l<r.length;l++)ry(r[l]);N_(e,e.transactionQueueTree_)}(e,A_(e,n),r),r}function O_(e,t){var n,r=e.transactionQueueTree_;for(n=Ay(t);null!==n&&void 0===Ww(r);)r=Hw(r,n),n=Ay(t=Ly(t));return r}function A_(e,t){var n=[];return D_(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function D_(e,t,n){var r=Ww(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Qw(t,(function(t){D_(e,t,n)}))}function L_(e,t){var n=Ww(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Gw(t,n.length>0?n:void 0)}Qw(t,(function(t){L_(e,t)}))}function M_(e,t){var n=Yw(O_(e,t)),r=Hw(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){F_(e,t)})),F_(e,r),$w(r,(function(t){F_(e,t)})),n}function F_(e,t){var n=Ww(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Fn(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Fn(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(pw(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Gw(t,void 0):n.length=a+1,h_(e.eventQueue_,Yw(t),i);for(var s=0;s<r.length;s++)ry(r[s])}}var j_=function(e,t){var n=U_(e),r=n.namespace;"firebase.com"===n.domain&&Bg(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Bg("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Hg("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new dy(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Ry(n.pathString)}},U_=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var l=e.indexOf("//");l>=0&&(s=e.substring(0,l-1),e=e.substring(l+2));var c=e.indexOf("/");-1===c&&(c=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(c,h)),c<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(c,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=Pn(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Hg("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(l=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(l+1),10)):l=t.length;var d=t.slice(0,l);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},V_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",z_=(function(){var e=0,t=[]}(),function(){function e(t,n,r,i){c(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return p(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+cr(this.snapshot.exportVal())}}]),e}()),q_=function(){function e(t,n,r){c(this,e),this.eventRegistration=t,this.error=n,this.path=r}return p(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),B_=function(){function e(t,n){c(this,e),this.snapshotCallback=t,this.cancelCallback=n}return p(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return Fn(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),H_=function(){function e(t,n,r,i){c(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return p(e,[{key:"key",get:function(){return Vy(this._path)?null:My(this._path)}},{key:"ref",get:function(){return new W_(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=jk(this._queryParams),t=Xg(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return jk(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=Cr(t))instanceof e))return!1;var n=this._repo===t._repo,r=qy(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var W_=function(e){m(n,e);var t=w(n);function n(e,r){return c(this,n),t.call(this,e,r,new Mk,!1)}return p(n,[{key:"parent",get:function(){var e=jy(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(H_),G_=function(){function e(t,n,r){c(this,e),this._node=t,this.ref=n,this._index=r}return p(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new Ry(t),r=Q_(this.ref,t);return new e(this._node.getChild(n),r,gk)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,Q_(n.ref,r),gk))}))}},{key:"hasChild",value:function(e){var t=new Ry(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function K_(e,t){return(e=Cr(e))._checkNotDeleted("ref"),void 0!==t?Q_(e._root,t):e._root}function Q_(e,t){var n,r,i,a;return null===Ay((e=Cr(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),a_(n,r,i,a)):a_("child","path",t,!1),new W_(e._repo,Uy(e._path,t))}function $_(e,t){e=Cr(e),o_("set",e._path),r_("set",t,e._path,!1);var n=new rr;return x_(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function Y_(e){e=Cr(e);var t=new B_((function(){})),n=new X_(t);return function(e,t,n){var r=bw(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=Ek(r).withIndex(t._queryParams.getIndex());if(yw(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=vw(e.serverSyncTree_,t._path,a);else{var o=Ew(e.serverSyncTree_,t);i=gw(e.serverSyncTree_,t._path,a,o)}return h_(e.eventQueue_,t._path,i),mw(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return C_(e,"get for query "+cr(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new G_(t,new W_(e._repo,e._path),e._queryParams.getIndex())}))}var X_=function(){function e(t){c(this,e),this.callbackContext=t}return p(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new z_("value",this,new G_(e.snapshotNode,new W_(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new q_(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),J_=function(){function e(t,n){c(this,e),this.eventType=t,this.callbackContext=n}return p(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new q_(this,e,t):null}},{key:"createEvent",value:function(e,t){Fn(null!=e.childName,"Child events should have a childName.");var n=Q_(new W_(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new z_(e.type,this,new G_(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function Z_(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,s=function(t,n){S_(e._repo,e,l),o(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new B_(n,a||void 0),l="value"===t?new X_(u):new J_(t,u);return function(e,t,n){var r;r=".info"===Ay(t._path)?yw(e.infoSyncTree_,t,n):yw(e.serverSyncTree_,t,n),c_(e.eventQueue_,t._path,r)}(e._repo,e,l),function(){return S_(e._repo,e,l)}}function ex(e,t,n,r){return Z_(e,"value",t,n,r)}!function(e){Fn(!Wb,"__referenceConstructor has already been defined"),Wb=e}(W_),function(e){Fn(!Jb,"__referenceConstructor has already been defined"),Jb=e}(W_);var tx={},nx=!1;function rx(e,t,n,r){e.repoInfo_=new dy("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function ix(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Bg("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Vg("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=j_(a,i),u=s.repoInfo,l=void 0;"undefined"!==typeof process&&(l={NODE_ENV:"production",PUBLIC_URL:"/Crispies-React-Foodchain-site-DIGIT-2022",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),l?(o=!0,a="http://".concat(l,"?ns=").concat(u.namespace),u=(s=j_(a,i)).repoInfo):o=!s.repoInfo.secure;var c=i&&o?new sy(sy.OWNER):new oy(e.name,e.options,t);s_("Invalid Firebase Database URL",s),Vy(s.path)||Bg("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=tx[t.name];i||(i={},tx[t.name]=i);var a=i[e.toURLString()];a&&Bg("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new v_(e,nx,n,r),i[e.toURLString()]=a,a}(u,e,c,new ay(e.name,n));return new ax(h,e)}var ax=function(){function e(t,n){c(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return p(e,[{key:"_repo",get:function(){return this._instanceStarted||(m_(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new W_(this._repo,Oy())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=tx[t];n&&n[e.key]===e||Bg("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),E_(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Bg("Cannot call "+e+" on a deleted database.")}}]),e}();function ox(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bi(),t=arguments.length>1?arguments[1]:void 0,n=pi(e,"database").getImmediate({identifier:t}),r=er("database");return r&&sx.apply(void 0,[n].concat(l(r))),n}function sx(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=Cr(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Bg("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Bg('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new sy(sy.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:ir(r.mockUserToken,e.app.options.projectId);a=new sy(o)}rx(i,t,n,a)}$y.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},$y.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){Tg=e}(yi),di(new Tr("database",(function(e,t){var n=t.instanceIdentifier;return ix(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),wi(Eg,Cg,e),wi(Eg,Cg,"esm2017")}();var ux=function(e,t){t({text:e,timestamp:Date.now()})},lx=function(e){var n=t.createRef();return(0,t.useEffect)((function(){var e=n.current;e&&(setTimeout((function(){e.className="Notification transitioning"}),250),e.className="Notification")}),[e.input]),e.input.text&&(0,_n.jsx)("div",{class:"Notification",ref:n,children:e.input.text})};lx.defaultProps={input:{text:"",timestamp:0}};var cx=lx,hx=function(e){var n=e.validPaymentInfo,r=(0,t.useContext)(HT),i=(0,t.useContext)(WT),a=function(e){!function(e){o_("remove",e._path),$_(e,null)}(K_(YT,"users/".concat(r.uid,"/").concat(e)))},o=function(){return Object.keys(i).reduce((function(e,t){return e+i[t].quantity*i[t].priceEach}),0)},s=u((0,t.useState)({text:"",timestamp:0}),2),l=s[0],c=s[1];return(0,_n.jsxs)("div",{children:[(0,_n.jsx)(cx,{input:l}),0!==Object.keys(i).length&&(0,_n.jsxs)("div",{className:"Cart bg-beige textSignin mt-8",children:[Object.keys(i).map((function(e){return(0,_n.jsxs)("div",{className:"CartItem flex flex-row justify-start w-full align-center",children:[(0,_n.jsx)("img",{src:i[e].picture}),(0,_n.jsxs)("div",{className:"flex flex-col justify-center text-xs sm:text-base",children:[(0,_n.jsx)("p",{className:"font-bold",children:i[e].name}),(0,_n.jsxs)("p",{children:["Quantity: ",(0,_n.jsx)("span",{className:"font-bold",children:parseInt(i[e].quantity)})]})]}),(0,_n.jsxs)("p",{className:"flex flex-col justify-center ml-auto mr-1 text-xs sm:text-base p-0",children:[parseInt(i[e].quantity)>1&&i[e].quantity+" x "+i[e].priceEach+" = ",parseInt(i[e].quantity)*parseInt(i[e].priceEach)]}),(0,_n.jsx)("button",{className:"bg-terra button btnHoverRed font-bold",onClick:function(){return a(e)},children:"Remove"})]},e)})),(0,_n.jsxs)("div",{className:"flex flex-col items-center bg-beigeLight",children:[(0,_n.jsxs)("p",{className:"text-center mt-3 mb-3",children:["Total: ",(0,_n.jsxs)("span",{className:"font-bold text-2xl",children:[o()," MKD"]})]}),(0,_n.jsx)("button",{className:"bg-sea border-t-2 border-offblack p-1 w-full font-bold btnHover",onClick:function(){n?(ux("Purchase for ".concat(o()," has gone through"),c),$_(K_(YT,"users/".concat(r.uid)),{})):ux("Complete your purchase information before proceeding.",c)},children:"Checkout"})]})]})]})},fx=function(e){var n=e.setCartItemsNum,r=u((0,t.useState)(!1),2),i=r[0],a=r[1];return(0,_n.jsxs)(_n.Fragment,{children:[(0,_n.jsx)("h1",{className:" border-b-2 border-offblack text-4xl text-center bg-beige titleLocations py-3",children:"Ready to Order?"}),(0,_n.jsxs)("div",{className:"paymentContainer flex flex-row justify-center flex-wrap",children:[(0,_n.jsx)(Sg,{validPaymentInfo:i,setValidPaymentInfo:a}),(0,_n.jsx)(hx,{setCartItemsNum:n,validPaymentInfo:i})]})]})},dx=function(e){var n=u((0,t.useState)(1),2),r=n[0],i=n[1];return(0,_n.jsxs)("div",{className:"flex flex-col border-2 border-offblack m-1 bg-beige w-80 my-2",children:[(0,_n.jsx)("img",{src:e.item.picture,className:"flex border-b-2 border-offblack shrink-1",alt:"item picture"}),(0,_n.jsx)("p",{className:"text-center textSignin text-2xl mt-4",children:e.item.name}),(0,_n.jsxs)("p",{className:"text-center textSignin text-1xl mb-4",children:["Price: ",e.item.price]}),(0,_n.jsxs)("div",{className:"flex flex-row self-stretch"+(e.authot?"":" disabled"),children:[(0,_n.jsx)("button",{onClick:function(){r>1&&i(r-1)},className:"cartButton border-t-2 border-black bg-terra grow-0 px-8 btnHoverRed",children:"-"}),(0,_n.jsxs)("button",{className:"border-2 border-black border-b-0 w-full bg-offblack text-beige textSignin text-1xl btnHoverCart"+(e.authot?"":" disabled"),onClick:function(){return function(t){e.addCart(t,r),ux("Added ".concat(r," of ").concat(e.item.name," to cart."),e.setNotifObj)}(e.item.id)},children:["Add ",r>1&&r," to cart"]}),(0,_n.jsx)("button",{className:"cartButton border-t-2 border-offblack bg-sea grow-0 px-8 btnHover",onClick:function(){return i(r+1)},children:"+"})]}),!e.authot&&(0,_n.jsx)("button",{className:"border-t-2 border-offblack flex-1 textSignin text-terra bg-offblack py-1",onClick:function(t){return function(e,t){e.nativeEvent.stopImmediatePropagation(),t(!0)}(t,e.changeClick)},children:"Log In to add to cart"})]})};var px=n.p+"static/media/Burger2.6454f108d45955a12c0a155a960a583d.svg";var vx=n.p+"static/media/Combos2.010c931e2c2a1db5ec5c907a3c7ab189.svg";var mx=n.p+"static/media/Snacks2.8fe76fe1a578abe3d08341f61738277a.svg";var gx=n.p+"static/media/Drinks2.efbc1bcbdf0403584b358b4a1df31a08.svg";var yx=n.p+"static/media/Fries2.9575ecf1fe00086c26ade722d1acb2c2.svg";var kx=n.p+"static/media/sauces2.b8e3e1807b267f8e29311a878aaf527e.svg",bx=function(e){var t;switch(e.type){case"Burgers":t=px;break;case"Combos":t=vx;break;case"Snacks":t=mx;break;case"Drinks":t=gx;break;case"Sauces":t=kx;break;case"Fries":t=yx;break;default:t="https://cdn-icons-png.flaticon.com/512/1161/1161695.png"}return(0,_n.jsx)("a",{href:"#"+e.type,className:"border-l-2 border-y-2 border-offblack pt-2 px-2 border-black max-w-[90px] w-[16vw]  mt-2 bg-sea mb-2 categoryIcons btnHover shrink-1",title:e.type,children:(0,_n.jsx)("img",{src:t})})};function wx(){return wx=An(Rn().mark((function e(t,n,r,i){var a;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,sg(t);case 3:e.sent.forEach((function(e){a.push(Cn(Cn({},e.data()),{},{id:e.id}))})),n(a),r(a),i(!0);case 8:case"end":return e.stop()}}),e)}))),wx.apply(this,arguments)}var _x=function(e){var n=u((0,t.useState)(),2),r=n[0],i=n[1],a=u((0,t.useState)(!1),2),o=a[0],s=a[1],l=u((0,t.useState)(),2),c=l[0],h=l[1],f=u((0,t.useState)({text:"",timestamp:0}),2),d=f[0],p=f[1];(0,t.useEffect)((function(){var e=function(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof Hm&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof Km})).length,n=e.filter((function(e){return e instanceof Gm})).length;if(t>1||t>0&&n>0)throw new Zu(Ju.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,s=Pn(n);try{for(s.s();!(o=s.n()).done;){e=o.value._apply(e)}}catch(u){s.e(u)}finally{s.f()}return e}(Xv($T,"menuItems"));!function(e,t,n,r){wx.apply(this,arguments)}(e,i,h,s)}),[]);var v=function(t,n){Y_(Q_(K_(ox()),"users/".concat(e.authot.uid,"/").concat(t))).then((function(r){$_(K_(YT,"users/"+e.authot.uid+"/"+t),r.val()+n)}))},m=function(t){var n=[];return t.itemCards&&(n=t.itemCards.filter((function(e){return e.type===t.title}))),n.length>0&&(0,_n.jsxs)("div",{id:t.id,children:[(0,_n.jsx)("h1",{className:"text-center textSignin text-3xl mb-8 font-bold",children:t.title}),(0,_n.jsx)("div",{className:"flex justify-center flex-wrap mx-auto last-of-type:mb-8",children:n.map((function(t){return(0,_n.jsx)(dx,{item:t,authot:e.authot,addCart:v,changeClick:e.changeClick,setNotifObj:p})}))})]})};return(0,_n.jsxs)("div",{children:[(0,_n.jsx)(cx,{input:d}),(0,_n.jsx)("h1",{className:" border-b-2 border-offblack text-4xl text-center bg-beige titleLocations py-3",children:"Menu"}),(0,_n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,_n.jsxs)("div",{className:"mt-4 flex justify-center",children:[(0,_n.jsx)(bx,{type:"Combos"}),(0,_n.jsx)(bx,{type:"Burgers"}),(0,_n.jsx)(bx,{type:"Snacks"}),(0,_n.jsx)(bx,{type:"Fries"}),(0,_n.jsx)(bx,{type:"Drinks"}),(0,_n.jsx)(bx,{type:"Sauces"})]}),(0,_n.jsxs)("div",{className:"mt-4 mb-4 mx-auto flex flex-col w-full items-center flex-wrap max-w-[1150px] bg-beigeLight border-2 border-offblack",children:[(0,_n.jsx)("input",{className:"text-center text-offblack bg-sea border-0 border-b-2 border-offblack w-full textSignin py-3 text-2xl mb-8 placeholder-beigeLight",type:"text",placeholder:"Search...",onChange:function(e){i(c.filter((function(t){return t.name.toUpperCase().includes(e.target.value.toUpperCase())})))}}),!o&&(0,_n.jsxs)("div",{className:"mx-auto flex flex-col border-2 border-offblack max-w-[500px] mt-16 mb-10",children:[(0,_n.jsxs)("div",{className:"flex justify-between bg-beige",children:[(0,_n.jsx)("h1",{className:"textSignin text-offblack text-3xl ml-3",children:"Loading"}),(0,_n.jsx)("button",{className:"textSignin bg-terra text-offblack p-2 px-4 border-l-2 border-offblack",children:"..."})]}),(0,_n.jsx)("div",{className:"flex flex-col bg-beigeLight border-t-2 border-offblack text-center border-b-8 py-16",children:(0,_n.jsx)("h1",{className:"textSignin text-6xl px-4",children:"Wrapping up..."})})]}),(0,_n.jsx)(m,{title:"Combos",itemCards:r,id:"Combos"}),(0,_n.jsx)(m,{title:"Burgers",itemCards:r,id:"Burgers"}),(0,_n.jsx)(m,{title:"Snacks",itemCards:r,id:"Snacks"}),(0,_n.jsx)(m,{title:"Fries",itemCards:r,id:"Fries"}),(0,_n.jsx)(m,{title:"Drinks",itemCards:r,id:"Drinks"}),(0,_n.jsx)(m,{title:"Sauces",itemCards:r,id:"Sauces"})]})]})]})},xx=function(){return(0,_n.jsxs)("div",{className:"mx-auto flex flex-col border-2 border-offblack max-w-[500px] mt-16",children:[(0,_n.jsxs)("div",{className:"flex justify-between bg-beige",children:[(0,_n.jsx)("h1",{className:"textSignin text-offblack text-4xl ml-3",children:"Error..."}),(0,_n.jsx)(Ue,{to:"/",children:(0,_n.jsx)("button",{className:"textSignin bg-terra text-offblack p-2 px-4 border-l-2 border-offblack",children:"X"})})]}),(0,_n.jsxs)("div",{className:"flex flex-col bg-beigeLight border-t-2 border-offblack text-center border-b-8 py-16",children:[(0,_n.jsx)("h1",{className:"textSignin text-8xl",children:"404"}),(0,_n.jsx)("h1",{className:"textSignin text-2xl",children:"Crispy Chicken not found..."})]})]})};var Sx=n.p+"static/media/accJSX.e407f0df56eeb15d3a932c90fbd11deb.svg";var Ex=n.p+"static/media/cart.232bfecf512459d269560f7908e458d7.svg";function Cx(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Tx;Object.create;function Ix(){return ot({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Nx=Ix,Px=new or("auth","Firebase",Ix()),Rx=new jr("@firebase/auth");function Ox(e){if(Rx.logLevel<=Rr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Rx.error.apply(Rx,["Auth (".concat(yi,"): ").concat(e)].concat(n))}}function Ax(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Mx.apply(void 0,[e].concat(n))}function Dx(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Mx.apply(void 0,[e].concat(n))}function Lx(e,t,n){var r=Object.assign(Object.assign({},Nx()),ot({},t,n));return new or("auth","Firebase",r).create(t,{appName:e.name})}function Mx(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=l(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(l(o)))}return Px.create.apply(Px,[e].concat(n))}function Fx(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Mx.apply(void 0,[t].concat(r))}}function jx(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Ox(t),new Error(t)}function Ux(e,t){e||jx(t)}var Vx=new Map;function zx(e){Ux(e instanceof Function,"Expected a class definition");var t=Vx.get(e);return t?(Ux(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Vx.set(e,t),t)}function qx(e,t){var n=pi(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(mr(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;Ax(r,"already-initialized")}return n.initialize({options:t})}function Bx(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Hx(){return"http:"===Wx()||"https:"===Wx()}function Wx(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Gx(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Hx()||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}var Kx=function(){function e(t,n){c(this,e),this.shortDelay=t,this.longDelay=n,Ux(n>t,"Short delay should be less than long delay!"),this.isMobile=Kn()||Qn()}return p(e,[{key:"get",value:function(){return Gx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}]),e}();function Qx(e,t){Ux(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var $x=function(){function e(){c(this,e)}return p(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void jx("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void jx("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void jx("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Yx=(ot(Tx={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),ot(Tx,"MISSING_CUSTOM_TOKEN","internal-error"),ot(Tx,"INVALID_IDENTIFIER","invalid-email"),ot(Tx,"MISSING_CONTINUE_URI","internal-error"),ot(Tx,"INVALID_PASSWORD","wrong-password"),ot(Tx,"MISSING_PASSWORD","internal-error"),ot(Tx,"EMAIL_EXISTS","email-already-in-use"),ot(Tx,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),ot(Tx,"INVALID_IDP_RESPONSE","invalid-credential"),ot(Tx,"INVALID_PENDING_TOKEN","invalid-credential"),ot(Tx,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),ot(Tx,"MISSING_REQ_TYPE","internal-error"),ot(Tx,"EMAIL_NOT_FOUND","user-not-found"),ot(Tx,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),ot(Tx,"EXPIRED_OOB_CODE","expired-action-code"),ot(Tx,"INVALID_OOB_CODE","invalid-action-code"),ot(Tx,"MISSING_OOB_CODE","internal-error"),ot(Tx,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),ot(Tx,"INVALID_ID_TOKEN","invalid-user-token"),ot(Tx,"TOKEN_EXPIRED","user-token-expired"),ot(Tx,"USER_NOT_FOUND","user-token-expired"),ot(Tx,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),ot(Tx,"INVALID_CODE","invalid-verification-code"),ot(Tx,"INVALID_SESSION_INFO","invalid-verification-id"),ot(Tx,"INVALID_TEMPORARY_PROOF","invalid-credential"),ot(Tx,"MISSING_SESSION_INFO","missing-verification-id"),ot(Tx,"SESSION_EXPIRED","code-expired"),ot(Tx,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),ot(Tx,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),ot(Tx,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),ot(Tx,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),ot(Tx,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),ot(Tx,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),ot(Tx,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),ot(Tx,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),ot(Tx,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),ot(Tx,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),ot(Tx,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Tx),Xx=new Kx(3e4,6e4);function Jx(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Zx(e,t,n,r){return eS.apply(this,arguments)}function eS(){return eS=An(Rn().mark((function e(t,n,r,i){var a,o=arguments;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",tS(t,a,An(Rn().mark((function e(){var a,o,s,u;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=yr(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",$x.fetch()(aS(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),eS.apply(this,arguments)}function tS(e,t,n){return nS.apply(this,arguments)}function nS(){return nS=An(Rn().mark((function e(t,n,r){var i,a,o,s,l,c,h,f,d,p;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Yx),n),e.prev=2,a=new oS(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw sS(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(l=o.ok?s.errorMessage:s.error.message,c=l.split(" : "),h=u(c,2),f=h[0],d=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw sS(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw sS(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw sS(t,"user-disabled",s);case 29:if(p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Lx(t,p,d);case 34:Ax(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof ar)){e.next=41;break}throw e.t0;case 41:Ax(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),nS.apply(this,arguments)}function rS(e,t,n,r){return iS.apply(this,arguments)}function iS(){return iS=An(Rn().mark((function e(t,n,r,i){var a,o,s=arguments;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,Zx(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Ax(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),iS.apply(this,arguments)}function aS(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Qx(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var oS=function(){function e(t){var n=this;c(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Dx(n.auth,"network-request-failed"))}),Xx.get())}))}return p(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function sS(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Dx(e,t,r);return i.customData._tokenResponse=n,i}function uS(e,t){return lS.apply(this,arguments)}function lS(){return lS=An(Rn().mark((function e(t,n){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zx(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),lS.apply(this,arguments)}function cS(e,t){return hS.apply(this,arguments)}function hS(){return hS=An(Rn().mark((function e(t,n){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zx(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),hS.apply(this,arguments)}function fS(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function dS(){return dS=An(Rn().mark((function e(t){var n,r,i,a,o,s,u=arguments;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=Cr(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Fx((a=vS(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:fS(pS(a.auth_time)),issuedAtTime:fS(pS(a.iat)),expirationTime:fS(pS(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),dS.apply(this,arguments)}function pS(e){return 1e3*Number(e)}function vS(e){var t=u(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Ox("JWT malformed, contained fewer than 3 sections"),null;try{var a=Bn(r);return a?JSON.parse(a):(Ox("Failed to decode base64 JWT payload"),null)}catch(o){return Ox("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function mS(e,t){return gS.apply(this,arguments)}function gS(){return gS=An(Rn().mark((function e(t,n){var r=arguments;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof ar&&yS(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),gS.apply(this,arguments)}function yS(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var kS=function(){function e(t){c(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return p(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(An(Rn().mark((function t(){return Rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=An(Rn().mark((function e(){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),bS=function(){function e(t,n){c(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return p(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=fS(this.lastLoginAt),this.creationTime=fS(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function wS(e){return _S.apply(this,arguments)}function _S(){return _S=An(Rn().mark((function e(t){var n,r,i,a,o,s,u,l,c,h,f;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,mS(t,cS(r,{idToken:i}));case 6:Fx(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?ES(o.providerUserInfo):[],u=SS(t.providerData,s),l=t.isAnonymous,c=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!l&&c,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new bS(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),_S.apply(this,arguments)}function xS(){return(xS=An(Rn().mark((function e(t){var n;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Cr(t),e.next=3,wS(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function SS(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(l(n),l(t))}function ES(e){return e.map((function(e){var t=e.providerId,n=Cx(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function CS(e,t){return TS.apply(this,arguments)}function TS(){return TS=An(Rn().mark((function e(t,n){var r;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tS(t,{},An(Rn().mark((function e(){var r,i,a,o,s,u;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yr({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=aS(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",$x.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),TS.apply(this,arguments)}var IS=function(){function e(){c(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return p(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Fx(e.idToken,"internal-error"),Fx("undefined"!==typeof e.idToken,"internal-error"),Fx("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=vS(e);return Fx(t,"internal-error"),Fx("undefined"!==typeof t.exp,"internal-error"),Fx("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=An(Rn().mark((function e(t){var n,r=arguments;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Fx(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=An(Rn().mark((function e(t,n){var r,i,a,o;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,CS(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return jx("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Fx("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Fx("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Fx("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function NS(e,t){Fx("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var PS=function(){function e(t){c(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Cx(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?l(a.providerData):[],this.metadata=new bS(a.createdAt||void 0,a.lastLoginAt||void 0)}return p(e,[{key:"getIdToken",value:function(){var e=An(Rn().mark((function e(t){var n;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mS(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Fx(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return dS.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return xS.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Fx(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Fx(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=An(Rn().mark((function e(t){var n,r,i=arguments;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,wS(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=An(Rn().mark((function e(){var t;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,mS(this,uS(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,l,c,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,g=null!==(l=n.createdAt)&&void 0!==l?l:void 0,y=null!==(c=n.lastLoginAt)&&void 0!==c?c:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;Fx(k&&x,t,"internal-error");var S=IS.fromJSON(this.name,x);Fx("string"===typeof k,t,"internal-error"),NS(h,t.name),NS(f,t.name),Fx("boolean"===typeof b,t,"internal-error"),Fx("boolean"===typeof w,t,"internal-error"),NS(d,t.name),NS(p,t.name),NS(v,t.name),NS(m,t.name),NS(g,t.name),NS(y,t.name);var E=new e({uid:k,auth:t,email:f,emailVerified:b,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:S,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=An(Rn().mark((function t(n,r){var i,a,o,s=arguments;return Rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new IS).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,wS(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),RS=function(){function e(){c(this,e),this.type="NONE",this.storage={}}return p(e,[{key:"_isAvailable",value:function(){var e=An(Rn().mark((function e(){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=An(Rn().mark((function e(t,n){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=An(Rn().mark((function e(t){var n;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=An(Rn().mark((function e(t){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();RS.type="NONE";var OS=RS;function AS(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var DS=function(){function e(t,n,r){c(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=AS(this.userKey,a.apiKey,o),this.fullPersistenceKey=AS("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return p(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=An(Rn().mark((function e(){var t;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?PS._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=An(Rn().mark((function e(t){var n;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=An(Rn().mark((function t(n,r){var i,a,o,s,u,l,c,h,f,d,p,v=arguments;return Rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(zx(OS),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=An(Rn().mark((function e(t){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||zx(OS),s=AS(i,n.config.apiKey,n.name),u=null,l=Pn(r),t.prev=10,l.s();case 12:if((c=l.n()).done){t.next=29;break}return h=c.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(f=t.sent)){t.next=23;break}return d=PS._fromJSON(n,f),h!==o&&(u=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),l.e(t.t1);case 34:return t.prev=34,l.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=An(Rn().mark((function e(t){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function LS(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(US(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(MS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(zS(t))return"Blackberry";if(qS(t))return"Webos";if(FS(t))return"Safari";if((t.includes("chrome/")||jS(t))&&!t.includes("edge/"))return"Chrome";if(VS(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function MS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn();return/firefox\//i.test(e)}function FS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function jS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn();return/crios\//i.test(e)}function US(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn();return/iemobile/i.test(e)}function VS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn();return/android/i.test(e)}function zS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn();return/blackberry/i.test(e)}function qS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn();return/webos/i.test(e)}function BS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function HS(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn();return BS(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function WS(){return function(){var e=Gn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function GS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn();return BS(e)||VS(e)||qS(e)||zS(e)||/windows phone/i.test(e)||US(e)}function KS(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=LS(Gn());break;case"Worker":t="".concat(LS(Gn()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(yi,"/").concat(r)}var QS=function(){function e(t){c(this,e),this.auth=t,this.queue=[]}return p(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=An(Rn().mark((function e(t){var n,r,i,a,o,s,u;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=Pn(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=Pn(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(l){}}}catch(c){o.e(c)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),$S=function(){function e(t,n,r){c(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new XS(this),this.idTokenSubscription=new XS(this),this.beforeStateQueue=new QS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Px,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return p(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=zx(t)),this._initializationPromise=this.queue(An(Rn().mark((function r(){var i,a;return Rn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,DS.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=An(Rn().mark((function e(){var t;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=An(Rn().mark((function e(t){var n,r,i,a,o,s,u;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Fx(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=An(Rn().mark((function e(t){var n;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=An(Rn().mark((function e(t){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wS(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=An(Rn().mark((function e(){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=An(Rn().mark((function e(t){var n;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Cr(t):null)&&Fx(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=An(Rn().mark((function e(t){var n,r=this,i=arguments;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Fx(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(An(Rn().mark((function e(){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=An(Rn().mark((function e(){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(An(Rn().mark((function n(){return Rn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(zx(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new or("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=An(Rn().mark((function e(t,n){var r;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=An(Rn().mark((function e(t){var n;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Fx(n=t&&zx(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,DS.create(this,[zx(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=An(Rn().mark((function e(t){var n,r;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(An(Rn().mark((function e(){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=An(Rn().mark((function e(t){var n=this;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(An(Rn().mark((function e(){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Fx(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=An(Rn().mark((function e(t){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Fx(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KS(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=An(Rn().mark((function e(){var t,n,r;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ot({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function YS(e){return Cr(e)}var XS=function(){function e(t){var n=this;c(this,e),this.auth=t,this.observer=null,this.addObserver=function(e,t){var n=new _r(e,t);return n.subscribe.bind(n)}((function(e){return n.observer=e}))}return p(e,[{key:"next",get:function(){return Fx(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function JS(e,t,n){var r=YS(e);Fx(r._canInitEmulator,r,"emulator-config-failed"),Fx(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=ZS(t),o=function(e){var t=ZS(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:eE(r.substr(a.length+1))}}var o=u(r.split(":"),2);return{host:o[0],port:eE(o[1])}}(t),s=o.host,l=o.port,c=null===l?"":":".concat(l);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ZS(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function eE(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var tE=function(){function e(t,n){c(this,e),this.providerId=t,this.signInMethod=n}return p(e,[{key:"toJSON",value:function(){return jx("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return jx("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return jx("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return jx("not implemented")}}]),e}();function nE(e,t){return rE.apply(this,arguments)}function rE(){return rE=An(Rn().mark((function e(t,n){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zx(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),rE.apply(this,arguments)}function iE(e,t){return aE.apply(this,arguments)}function aE(){return aE=An(Rn().mark((function e(t,n){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rS(t,"POST","/v1/accounts:signInWithPassword",Jx(t,n)));case 1:case"end":return e.stop()}}),e)}))),aE.apply(this,arguments)}function oE(e,t){return sE.apply(this,arguments)}function sE(){return sE=An(Rn().mark((function e(t,n){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rS(t,"POST","/v1/accounts:signInWithEmailLink",Jx(t,n)));case 1:case"end":return e.stop()}}),e)}))),sE.apply(this,arguments)}function uE(e,t){return lE.apply(this,arguments)}function lE(){return lE=An(Rn().mark((function e(t,n){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rS(t,"POST","/v1/accounts:signInWithEmailLink",Jx(t,n)));case 1:case"end":return e.stop()}}),e)}))),lE.apply(this,arguments)}var cE=function(e){m(n,e);var t=w(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return c(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return p(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=An(Rn().mark((function e(t){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",iE(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",oE(t,{email:this._email,oobCode:this._password}));case 5:Ax(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=An(Rn().mark((function e(t,n){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",nE(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",uE(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Ax(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(tE);function hE(e,t){return fE.apply(this,arguments)}function fE(){return fE=An(Rn().mark((function e(t,n){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rS(t,"POST","/v1/accounts:signInWithIdp",Jx(t,n)));case 1:case"end":return e.stop()}}),e)}))),fE.apply(this,arguments)}var dE=function(e){m(n,e);var t=w(n);function n(){var e;return c(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return p(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return hE(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,hE(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,hE(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=yr(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ax("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Cx(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(tE);function pE(e,t){return vE.apply(this,arguments)}function vE(){return vE=An(Rn().mark((function e(t,n){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zx(t,"POST","/v1/accounts:sendVerificationCode",Jx(t,n)));case 1:case"end":return e.stop()}}),e)}))),vE.apply(this,arguments)}function mE(){return mE=An(Rn().mark((function e(t,n){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rS(t,"POST","/v1/accounts:signInWithPhoneNumber",Jx(t,n)));case 1:case"end":return e.stop()}}),e)}))),mE.apply(this,arguments)}function gE(){return gE=An(Rn().mark((function e(t,n){var r;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rS(t,"POST","/v1/accounts:signInWithPhoneNumber",Jx(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw sS(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),gE.apply(this,arguments)}var yE=ot({},"USER_NOT_FOUND","user-not-found");function kE(){return kE=An(Rn().mark((function e(t,n){var r;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",rS(t,"POST","/v1/accounts:signInWithPhoneNumber",Jx(t,r),yE));case 2:case"end":return e.stop()}}),e)}))),kE.apply(this,arguments)}var bE=function(e){m(n,e);var t=w(n);function n(e){var r;return c(this,n),(r=t.call(this,"phone","phone")).params=e,r}return p(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return mE.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return gE.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return kE.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(tE);var wE=function(){function e(t){var n,r,i,a,o,s;c(this,e);var u=kr(br(t)),l=null!==(n=u.apiKey)&&void 0!==n?n:null,h=null!==(r=u.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);Fx(l&&h&&f,"argument-error"),this.apiKey=l,this.operation=f,this.code=h,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return p(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=kr(br(e)).link,n=t?kr(br(t)).deep_link_id:null,r=kr(br(e)).deep_link_id;return(r?kr(br(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(Hv){return null}}}]),e}();var _E=function(){function e(){c(this,e),this.providerId=e.PROVIDER_ID}return p(e,null,[{key:"credential",value:function(e,t){return cE._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=wE.parseLink(t);return Fx(n,"argument-error"),cE._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();_E.PROVIDER_ID="password",_E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_E.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var xE=function(){function e(t){c(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return p(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),SE=function(e){m(n,e);var t=w(n);function n(){var e;return c(this,n),(e=t.apply(this,arguments)).scopes=[],e}return p(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return l(this.scopes)}}]),n}(xE),EE=function(e){m(n,e);var t=w(n);function n(){return c(this,n),t.call(this,"facebook.com")}return p(n,null,[{key:"credential",value:function(e){return dE._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Hv){return null}}}]),n}(SE);EE.FACEBOOK_SIGN_IN_METHOD="facebook.com",EE.PROVIDER_ID="facebook.com";var CE=function(e){m(n,e);var t=w(n);function n(){var e;return c(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return p(n,null,[{key:"credential",value:function(e,t){return dE._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(Hv){return null}}}]),n}(SE);CE.GOOGLE_SIGN_IN_METHOD="google.com",CE.PROVIDER_ID="google.com";var TE=function(e){m(n,e);var t=w(n);function n(){return c(this,n),t.call(this,"github.com")}return p(n,null,[{key:"credential",value:function(e){return dE._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Hv){return null}}}]),n}(SE);TE.GITHUB_SIGN_IN_METHOD="github.com",TE.PROVIDER_ID="github.com";var IE=function(e){m(n,e);var t=w(n);function n(){return c(this,n),t.call(this,"twitter.com")}return p(n,null,[{key:"credential",value:function(e,t){return dE._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(Hv){return null}}}]),n}(SE);function NE(e,t){return PE.apply(this,arguments)}function PE(){return PE=An(Rn().mark((function e(t,n){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rS(t,"POST","/v1/accounts:signUp",Jx(t,n)));case 1:case"end":return e.stop()}}),e)}))),PE.apply(this,arguments)}IE.TWITTER_SIGN_IN_METHOD="twitter.com",IE.PROVIDER_ID="twitter.com";var RE=function(){function e(t){c(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return p(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=An(Rn().mark((function t(n,r,i){var a,o,s,u,l=arguments;return Rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>3&&void 0!==l[3]&&l[3],t.next=3,PS._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=OE(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=An(Rn().mark((function t(n,r,i){var a;return Rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=OE(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function OE(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var AE=function(e){m(n,e);var t=w(n);function n(e,r,i,a){var o,s;return c(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(k(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return p(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(ar);function DE(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw AE._fromErrorAndOperation(e,n,t,r);throw n}))}function LE(e,t){return ME.apply(this,arguments)}function ME(){return ME=An(Rn().mark((function e(t,n){var r,i,a=arguments;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=mS,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",RE._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),ME.apply(this,arguments)}function FE(e,t){return jE.apply(this,arguments)}function jE(){return jE=An(Rn().mark((function e(t,n){var r,i,a,o,s,u,l=arguments;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,mS(t,DE(i,a,n,t),r);case 6:return Fx((o=e.sent).idToken,i,"internal-error"),Fx(s=vS(o.idToken),i,"internal-error"),u=s.sub,Fx(t.uid===u,i,"user-mismatch"),e.abrupt("return",RE._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Ax(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),jE.apply(this,arguments)}function UE(e,t){return VE.apply(this,arguments)}function VE(){return VE=An(Rn().mark((function e(t,n){var r,i,a,o,s=arguments;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,DE(t,i,n);case 4:return a=e.sent,e.next=7,RE._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),VE.apply(this,arguments)}function zE(e,t){return qE.apply(this,arguments)}function qE(){return qE=An(Rn().mark((function e(t,n){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",UE(YS(t),n));case 1:case"end":return e.stop()}}),e)}))),qE.apply(this,arguments)}function BE(e,t,n){return HE.apply(this,arguments)}function HE(){return HE=An(Rn().mark((function e(t,n,r){var i,a,o;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=YS(t),e.next=3,NE(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,RE._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),HE.apply(this,arguments)}function WE(e,t,n){return zE(Cr(e),_E.credential(t,n))}function GE(e,t){return KE.apply(this,arguments)}function KE(){return KE=An(Rn().mark((function e(t,n){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zx(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),KE.apply(this,arguments)}function QE(e,t){return $E.apply(this,arguments)}function $E(){return($E=An(Rn().mark((function e(t,n){var r,i,a,o,s,u,l;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Cr(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,mS(a,GE(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(l=a.providerData.find((function(e){return"password"===e.providerId})))&&(l.displayName=a.displayName,l.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YE(e,t,n,r){return Cr(e).onIdTokenChanged(t,n,r)}function XE(e,t,n){return Cr(e).beforeAuthStateChanged(t,n)}function JE(e,t){return Zx(e,"POST","/v2/accounts/mfaEnrollment:start",Jx(e,t))}new WeakMap;var ZE="__sak",eC=function(){function e(t,n){c(this,e),this.storageRetriever=t,this.type=n}return p(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(ZE,"1"),this.storage.removeItem(ZE),Promise.resolve(!0)):Promise.resolve(!1)}catch(Hv){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var tC=function(e){m(n,e);var t=w(n);function n(){var e;return c(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Gn();return FS(e)||BS(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=GS(),e._shouldAllowMigration=!0,e}return p(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);WS()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=An(Rn().mark((function e(t,r){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn(g(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=An(Rn().mark((function e(t){var r;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn(g(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=An(Rn().mark((function e(t){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn(g(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(eC);tC.type="LOCAL";var nC=tC,rC=function(e){m(n,e);var t=w(n);function n(){return c(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return p(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(eC);rC.type="SESSION";var iC=rC;function aC(e){return Promise.all(e.map(function(){var e=An(Rn().mark((function e(t){var n;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var oC=function(){function e(t){c(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return p(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=An(Rn().mark((function e(t){var n,r,i,a,o,s,u,l;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=An(Rn().mark((function e(t){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,aC(u);case 9:l=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:l});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function sC(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}oC.receivers=[];var uC=function(){function e(t){c(this,e),this.target=t,this.handlers=new Set}return p(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=An(Rn().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var l=sC("",20);i.port1.start();var c=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===l)switch(n.data.status){case"ack":clearTimeout(c),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(c),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function lC(){return window}function cC(){return"undefined"!==typeof lC().WorkerGlobalScope&&"function"===typeof lC().importScripts}function hC(){return fC.apply(this,arguments)}function fC(){return(fC=An(Rn().mark((function e(){var t;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function dC(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var pC="firebaseLocalStorageDb",vC="firebaseLocalStorage",mC="fbase_key",gC=function(){function e(t){c(this,e),this.request=t}return p(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function yC(e,t){return e.transaction([vC],t?"readwrite":"readonly").objectStore(vC)}function kC(){var e=indexedDB.deleteDatabase(pC);return new gC(e).toPromise()}function bC(){var e=indexedDB.open(pC,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(vC,{keyPath:mC})}catch(r){n(r)}})),e.addEventListener("success",An(Rn().mark((function n(){var r;return Rn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(vC)){n.next=12;break}return r.close(),n.next=5,kC();case 5:return n.t0=t,n.next=8,bC();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function wC(e,t,n){return _C.apply(this,arguments)}function _C(){return _C=An(Rn().mark((function e(t,n,r){var i,a;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=yC(t,!0).put((ot(i={},mC,n),ot(i,"value",r),i)),e.abrupt("return",new gC(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),_C.apply(this,arguments)}function xC(e,t){return SC.apply(this,arguments)}function SC(){return SC=An(Rn().mark((function e(t,n){var r,i;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yC(t,!1).get(n),e.next=3,new gC(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),SC.apply(this,arguments)}function EC(e,t){var n=yC(e,!0).delete(t);return new gC(n).toPromise()}var CC=function(){function e(){c(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return p(e,[{key:"_openDb",value:function(){var e=An(Rn().mark((function e(){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,bC();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=An(Rn().mark((function e(t){var n,r;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=An(Rn().mark((function e(){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cC()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=An(Rn().mark((function e(){var t=this;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=oC._getInstance(cC()?self:null),this.receiver._subscribe("keyChanged",function(){var e=An(Rn().mark((function e(n,r){var i;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=An(Rn().mark((function e(t,n){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=An(Rn().mark((function e(){var t,n,r;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hC();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new uC(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=An(Rn().mark((function e(t){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&dC()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=An(Rn().mark((function e(){var t;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,bC();case 5:return t=e.sent,e.next=8,wC(t,ZE,"1");case 8:return e.next=10,EC(t,ZE);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=An(Rn().mark((function e(t){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=An(Rn().mark((function e(t,n){var r=this;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(An(Rn().mark((function e(){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return wC(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=An(Rn().mark((function e(t){var n;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return xC(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=An(Rn().mark((function e(t){var n=this;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(An(Rn().mark((function e(){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return EC(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=An(Rn().mark((function e(){var t,n,r,i,a,o,s,u,l,c,h;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=yC(e,!1).getAll();return new gC(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Pn(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){i.e(f)}finally{i.f()}for(l=0,c=Object.keys(this.localCache);l<c.length;l++)h=c[l],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(An(Rn().mark((function t(){return Rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();CC.type="LOCAL";var TC=CC;function IC(e,t){return Zx(e,"POST","/v2/accounts/mfaSignIn:start",Jx(e,t))}function NC(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Dx("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function PC(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}PC("rcb"),new Kx(3e4,6e4);var RC="recaptcha";function OC(e,t,n){return AC.apply(this,arguments)}function AC(){return AC=An(Rn().mark((function e(t,n,r){var i,a,o,s,u,l,c,h,f;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Fx("string"===typeof a,t,"argument-error"),Fx(r.type===RC,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return Fx("enroll"===s.type,t,"internal-error"),e.next=13,JE(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return Fx("signin"===s.type,t,"internal-error"),Fx(l=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,IC(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:a}});case 22:return c=e.sent,e.abrupt("return",c.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,pE(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),AC.apply(this,arguments)}var DC=function(){function e(t){c(this,e),this.providerId=e.PROVIDER_ID,this.auth=YS(t)}return p(e,[{key:"verifyPhoneNumber",value:function(e,t){return OC(this.auth,e,Cr(t))}}],[{key:"credential",value:function(e,t){return bE._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?bE._fromTokenResponse(n,r):null}}]),e}();function LC(e,t){return t?zx(t):(Fx(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}DC.PROVIDER_ID="phone",DC.PHONE_SIGN_IN_METHOD="phone";var MC=function(e){m(n,e);var t=w(n);function n(e){var r;return c(this,n),(r=t.call(this,"custom","custom")).params=e,r}return p(n,[{key:"_getIdTokenResponse",value:function(e){return hE(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return hE(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return hE(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(tE);function FC(e){return UE(e.auth,new MC(e),e.bypassAuthState)}function jC(e){var t=e.auth,n=e.user;return Fx(n,t,"internal-error"),FE(n,new MC(e),e.bypassAuthState)}function UC(e){return VC.apply(this,arguments)}function VC(){return VC=An(Rn().mark((function e(t){var n,r;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Fx(r=t.user,n,"internal-error"),e.abrupt("return",LE(r,new MC(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),VC.apply(this,arguments)}var zC=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];c(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return p(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=An(Rn().mark((function t(n,r){return Rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=An(Rn().mark((function e(t){var n,r,i,a,o,s,u;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FC;case"linkViaPopup":case"linkViaRedirect":return UC;case"reauthViaPopup":case"reauthViaRedirect":return jC;default:Ax(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Ux(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Ux(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),qC=new Kx(2e3,1e4);var BC=function(e){m(n,e);var t=w(n);function n(e,r,i,a,o){var s;return c(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=k(s),s}return p(n,[{key:"executeNotNull",value:function(){var e=An(Rn().mark((function e(){var t;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Fx(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=An(Rn().mark((function e(){var t,n=this;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ux(1===this.filter.length,"Popup operations only handle one event"),t=sC(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Dx(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Dx(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Dx(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,qC.get())}()}}]),n}(zC);BC.currentPopupAction=null;var HC=new Map,WC=function(e){m(n,e);var t=w(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return c(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return p(n,[{key:"execute",value:function(){var e=An(Rn().mark((function e(){var t,r;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=HC.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,GC(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Nn(g(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:HC.set(this.auth._key(),t);case 21:return this.bypassAuthState||HC.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=An(Rn().mark((function e(t){var r;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Nn(g(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Nn(g(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=An(Rn().mark((function e(){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(zC);function GC(e,t){return KC.apply(this,arguments)}function KC(){return KC=An(Rn().mark((function e(t,n){var r,i,a;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=YC(n),i=$C(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),KC.apply(this,arguments)}function QC(e,t){HC.set(e._key(),t)}function $C(e){return zx(e._redirectPersistence)}function YC(e){return AS("pendingRedirect",e.config.apiKey,e.name)}function XC(e,t){return JC.apply(this,arguments)}function JC(){return JC=An(Rn().mark((function e(t,n){var r,i,a,o,s,u=arguments;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=YS(t),a=LC(i,n),o=new WC(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),JC.apply(this,arguments)}var ZC=function(){function e(t){c(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return p(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tT(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!tT(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Dx(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(eT(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(eT(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function eT(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function tT(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function nT(e){return rT.apply(this,arguments)}function rT(){return rT=An(Rn().mark((function e(t){var n,r=arguments;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Zx(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),rT.apply(this,arguments)}var iT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aT=/^https?/;function oT(){return oT=An(Rn().mark((function e(t){var n,r,i,a,o;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,nT(t);case 4:n=e.sent,r=n.authorizedDomains,i=Pn(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!sT(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Ax(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),oT.apply(this,arguments)}function sT(e){var t=Bx(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!aT.test(r))return!1;if(iT.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var uT=new Kx(3e4,6e4);function lT(){var e=lC().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=l(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var cT=null;function hT(e){return cT=cT||function(e){return new Promise((function(t,n){var r,i,a;function o(){lT(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){lT(),n(Dx(e,"network-request-failed"))},timeout:uT.get()})}if(null===(i=null===(r=lC().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=lC().gapi)||void 0===a?void 0:a.load)){var s=PC("iframefcb");return lC()[s]=function(){gapi.load?o():n(Dx(e,"network-request-failed"))},NC("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw cT=null,e}))}(e),cT}var fT=new Kx(5e3,15e3),dT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vT(e){var t=e.config;Fx(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Qx(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:yi},i=pT.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(yr(r).slice(1))}function mT(e){return gT.apply(this,arguments)}function gT(){return gT=An(Rn().mark((function e(t){var n,r;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hT(t);case 2:return n=e.sent,Fx(r=lC().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:vT(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dT,dontclear:!0},(function(e){return new Promise(function(){var n=An(Rn().mark((function n(r,i){var a,o,s;return Rn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){lC().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Dx(t,"network-request-failed"),o=lC().setTimeout((function(){i(a)}),fT.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),gT.apply(this,arguments)}var yT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kT="_blank",bT="http://localhost",wT=function(){function e(t){c(this,e),this.window=t,this.associatedEvent=null}return p(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function _T(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",l=Object.assign(Object.assign({},yT),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Gn().toLowerCase();n&&(s=jS(c)?kT:n),MS(c)&&(t=t||bT,l.scrollbars="yes");var h=Object.entries(l).reduce((function(e,t){var n=u(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(HS(c)&&"_self"!==s)return xT(t||"",s),new wT(null);var f=window.open(t||"",s,h);Fx(f,e,"popup-blocked");try{f.focus()}catch(d){}return new wT(f)}function xT(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var ST="__/auth/handler",ET="emulator/auth/handler";function CT(e,t,n,r,i,a){Fx(e.config.authDomain,e,"auth-domain-config-required"),Fx(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:yi,eventId:i};if(t instanceof xE){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",pr(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,l=Object.entries(a||{});s<l.length;s++){var c=u(l[s],2),h=c[0],f=c[1];o[h]=f}}if(t instanceof SE){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var g=m[v];void 0===p[g]&&delete p[g]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(ST);return Qx(t,ET)}(e),"?").concat(yr(p).slice(1))}var TT="webStorageSupport",IT=function(){function e(){c(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iC,this._completeRedirectFn=XC,this._overrideRedirectResult=QC}return p(e,[{key:"_openPopup",value:function(){var e=An(Rn().mark((function e(t,n,r,i){var a,o;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ux(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=CT(t,n,r,Bx(),i),e.abrupt("return",_T(t,o,sC()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=An(Rn().mark((function e(t,n,r,i){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=CT(t,n,r,Bx(),i),lC().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Ux(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=An(Rn().mark((function e(t){var n,r;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mT(t);case 2:return n=e.sent,r=new ZC(t),n.register("authEvent",(function(e){return Fx(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(TT,{type:TT},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[TT];void 0!==i&&t(!!i),Ax(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return oT.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return GS()||FS()||BS()}}]),e}(),NT=IT,PT=function(){function e(t){c(this,e),this.factorId=t}return p(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return jx("unexpected MultiFactorSessionType")}}}]),e}(),RT=function(e){m(n,e);var t=w(n);function n(e){var r;return c(this,n),(r=t.call(this,"phone")).credential=e,r}return p(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Zx(e,"POST","/v2/accounts/mfaEnrollment:finalize",Jx(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Zx(e,"POST","/v2/accounts/mfaSignIn:finalize",Jx(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(PT);(function(){function e(){c(this,e)}return p(e,null,[{key:"assertion",value:function(e){return RT._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var OT="@firebase/auth",AT="0.21.0",DT=function(){function e(t){c(this,e),this.auth=t,this.internalListeners=new Map}return p(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=An(Rn().mark((function e(t){var n;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Fx(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var LT,MT=nr("authIdTokenMaxAge")||300,FT=null,jT=function(e){return function(){var t=An(Rn().mark((function t(n){var r,i,a;return Rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,!t.t0){t.next=5;break}return t.next=4,n.getIdTokenResult();case 4:t.t0=t.sent;case 5:if(r=t.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>MT)){t.next=9;break}return t.abrupt("return");case 9:if(a=null===r||void 0===r?void 0:r.token,FT!==a){t.next=12;break}return t.abrupt("return");case 12:return FT=a,t.next=15,fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};LT="Browser",di(new Tr("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){Fx(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Fx(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:LT,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KS(LT)},i=new $S(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zx);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),di(new Tr("auth-internal",(function(e){return function(e){return new DT(e)}(YS(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),wi(OT,AT,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(LT)),wi(OT,AT,"esm2017");var UT=function(e){function n(){return(n=An(Rn().mark((function e(t,n){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!n){e.next=11;break}return e.prev=1,e.next=4,WE(QT,t,n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),v(e.t0.code);case 9:e.next=12;break;case 11:v("Enter both an email and a password.");case 12:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}var r=u((0,t.useState)("initial"),2),i=r[0],a=r[1],o=u((0,t.useState)(null),2),s=o[0],l=o[1],c=u((0,t.useState)(null),2),h=c[0],f=c[1],d=u((0,t.useState)(""),2),p=d[0],v=d[1];return(0,_n.jsxs)("div",{className:"flex flex-col bg-beige",id:"SignContainer",style:{position:"relative",zIndex:"30"},ref:e.boxRef,children:[e.authot&&(0,_n.jsxs)("div",{className:"flex flex-col grow-0 border-2 border-offblack text-center",children:[(0,_n.jsxs)("p",{className:"py-2 textSignin bg-beigeLight text-offblack",children:["Logged in as: ",e.authot.displayName]}),(0,_n.jsx)("button",{className:"textSignin border-t-2 border-offblack py-2 btnHover bg-sea",onClick:function(){return QT.signOut()},children:"Log out"})]}),!e.authot&&"initial"===i&&(0,_n.jsxs)("div",{className:"flex flex-col grow-0 w-full border-2 border-offblack",children:[(0,_n.jsx)("button",{className:"textSignin py-2 btnHover bg-sea",onClick:function(e){return function(e){e.nativeEvent.stopImmediatePropagation(),a("LogIn")}(e)},children:"Log in"}),(0,_n.jsx)(Ue,{to:"/Sign-Up",onClick:function(){return e.changeClick(!1)},className:"flex flex-row justify-center textSignin btnHover py-2 border-t-2 border-offblack bg-sea",children:"Sign up"})]}),!e.authot&&"LogIn"===i&&(0,_n.jsxs)("div",{className:"flex flex-col grow-0 w-full border-2 border-offblack bg-beigeLight",children:[(0,_n.jsxs)("div",{className:"mx-auto mt-2 flex-col",children:[(0,_n.jsx)("label",{className:"textSignin flex",children:"Email "}),(0,_n.jsx)("input",{type:"text",className:"flex textSignin",value:s,onChange:function(e){return l(e.target.value)}})]}),(0,_n.jsxs)("div",{className:"mx-auto mt-1 mb-4 flex-col",children:[(0,_n.jsx)("label",{className:"textSignin flex",children:"Password "}),(0,_n.jsx)("input",{type:"password",className:"flex textSignin",value:h,onChange:function(e){return f(e.target.value)}})]}),(0,_n.jsx)("button",{className:"textSignin btnHover border-t-2 border-offblack py-2 bg-sea",onClick:function(){return function(e,t){return n.apply(this,arguments)}(s,h)},children:"Log In"}),(0,_n.jsx)(Ue,{onClick:function(){return e.changeClick(!1)},to:"/Sign-Up",className:"flex flex-row justify-center textSignin btnHover border-t-2 border-offblack py-2 bg-sea",children:"Sign up instead"}),(0,_n.jsx)("p",{id:"errorP",className:"text-center bg-offblack text-terra flex-row textSignin",children:p})]})]})},VT=function(e){var n=(0,t.useContext)(HT),r=(0,t.useContext)(WT),i=(0,t.useRef)(null),a=(0,t.useRef)(null);return(0,t.useEffect)((function(){function t(t){void 0!==t.target&&i.current&&!i.current.contains(t.target)&&a.current&&!a.current.contains(t.target)&&e.changeClick(!1)}return document.addEventListener("click",t),function(){return document.removeEventListener("click",t)}}),[i]),(0,_n.jsxs)(_n.Fragment,{children:[(0,_n.jsxs)("div",{className:"Navbar",style:{zIndex:"10"},children:[(0,_n.jsx)("div",{style:{backgroundColor:"#ffe1bd"},className:"flex justify-center",children:(0,_n.jsx)(Ue,{to:"/",className:"text-8xl text-center mp-4",id:"logoH1",children:"CRISPIES"})}),(0,_n.jsxs)("div",{className:"border-t-2 border-b-2 border-offblack flex flex-row justify-between h-12",children:[(0,_n.jsx)(Ue,{to:"/Menu",className:"bg-sea hover:bg-sealight font-bold py-2 px-2 border-r-2\r border-offblack text-center flex items-center text-offblack shrink-0 itemNav",children:"Menu"}),(0,_n.jsx)(Ue,{to:"/Find-Us",className:"bg-sea hover:bg-sealight font-bold py-2 px-2 border-r-2\r border-offblack text-center flex items-center text-offblack shrink-0 itemNav",children:"Find Us"}),(0,_n.jsx)("div",{className:"flex-auto whitespace-nowrap text-offblack bg-terra",id:"scroll-container",children:(0,_n.jsx)("div",{id:"scroll-text",className:"text-2xl mt-1",children:"For 15% off on all menu items use coupon XMAS15 on checkout at any of our locations during the period of 20.12.2022 till 28.12.2022"})}),(0,_n.jsxs)("div",{className:"flex flex-row shrink-0",children:[(0,_n.jsx)("button",{className:"buttonBorder bg-sea hover:bg-sealight",onClick:function(){return e.changeClick(!e.clicked)},ref:a,children:(0,_n.jsx)("img",{src:Sx,className:"float-right w-10 pt-1 mx-3 justify-end",alt:" "})}),(0,_n.jsx)(Ue,{to:"/Order",className:"buttonBorder bg-sea hover:bg-sealight",children:(0,_n.jsxs)("div",{className:"float-right relative",children:[(0,_n.jsx)("img",{src:Ex,className:"w-10 pt-1 mx-3 justify-end"}),n&&Object.keys(r).length>0&&(0,_n.jsx)("div",{className:"absolute top-0 left-0 bg-terra w-4 h-4 text-offblack border-2 border-t-0 border-l-0 border-offblack text-xs text-align-center flex flex-row align-center justify-center textSignin",children:Object.keys(r).length})]})})]})]}),e.clicked&&(0,_n.jsx)("div",{id:"userDiv",children:(0,_n.jsx)(UT,{authot:e.authot,changeAuth:e.changeAuth,changeClick:e.changeClick,boxRef:i})})]}),(0,_n.jsx)("div",{className:"phantomNavbar"})]})},zT=n.p+"static/media/nugget.84e7f699e847d35507a7.png",qT=function(){function e(){return e=An(Rn().mark((function e(t,n,r){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n){e.next=12;break}return e.next=4,BE(QT,t,r);case 4:return e.next=6,ug(Jv($T,"users",QT.currentUser.uid),{fullName:"",deliveryAddress:"",cardNo:"",expiryDate:"",cvv:"",billingAddress:""}).catch((function(e){return console.log(e)}));case 6:return e.next=8,QE(QT.currentUser,{displayName:n}).catch((function(e){return console.log(e)}));case 8:return e.next=10,WE(QT,t,r);case 10:e.next=13;break;case 12:i("ERROR: No username entered.");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),i("ERROR: "+e.t0.code);case 18:case"end":return e.stop()}}),e,null,[[0,15]])}))),e.apply(this,arguments)}var n=u((0,t.useState)(""),2),r=n[0],i=n[1];return(0,_n.jsxs)("div",{className:"minusNavbar",style:{overflow:"hidden"},children:[(0,_n.jsxs)("div",{className:"mx-auto max-w-max z-0",children:[(0,_n.jsx)("img",{src:zT,alt:"nugget",className:"i n1 nuggetRain"}),(0,_n.jsx)("img",{src:zT,alt:"nugget",className:"i n2 nuggetRain"}),(0,_n.jsx)("img",{src:zT,alt:"nugget",className:"i n3 nuggetRain"}),(0,_n.jsx)("img",{src:zT,alt:"nugget",className:"i n4 nuggetRain"}),(0,_n.jsx)("img",{src:zT,alt:"nugget",className:"i n5 nuggetRain"}),(0,_n.jsx)("img",{src:zT,alt:"nugget",className:"i n6 nuggetRain"}),(0,_n.jsx)("img",{src:zT,alt:"nugget",className:"i n7 nuggetRain"}),(0,_n.jsx)("img",{src:zT,alt:"nugget",className:"i n8 nuggetRain"})]}),(0,_n.jsx)("div",{className:"flex justify-center",children:(0,_n.jsx)("div",{className:"flex mt-16 border-2 border-offblack bg-beige",style:{zIndex:1},children:(0,_n.jsxs)("div",{className:"flex flex-col grow-0 w-full",children:[(0,_n.jsx)("label",{className:"textSignup w-full mt-5 mx-10",children:"Email"}),(0,_n.jsx)("input",{type:"text",id:"emailInput",className:"textSignup mx-10 p-0"}),(0,_n.jsx)("label",{className:"textSignup mx-10",children:"Username"}),(0,_n.jsx)("input",{type:"text",id:"usernameInput",className:"textSignup mx-10 p-0"}),(0,_n.jsx)("label",{className:"textSignup mx-10",children:"Password"}),(0,_n.jsx)("input",{type:"password",id:"passwordInput",className:"textSignup mx-10 p-0"}),(0,_n.jsx)("button",{className:"btnHover textSignup mt-6 border-t-2 border-offblack py-2 bg-sea",onClick:function(){return function(t,n,r){return e.apply(this,arguments)}(document.getElementById("emailInput").value,document.getElementById("usernameInput").value,document.getElementById("passwordInput").value)},children:"Sign Up"}),(0,_n.jsx)("p",{id:"errorP",className:"text-center bg-offblack text-terra flex-row textSignin",children:r})]})})})]})};function BT(){return(BT=An(Rn().mark((function e(t,n){var r,i,a,o;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},e.t0=Rn().keys(t);case 2:if((e.t1=e.t0()).done){e.next=11;break}return i=e.t1.value,e.next=6,ag(Jv($T,"menuItems",i));case 6:a=e.sent,o=a.data(),r[i]={name:o.name,quantity:t[i],picture:o.picture,priceEach:o.price},e.next=2;break;case 11:n(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var HT=t.createContext(null),WT=t.createContext({});var GT=function(){var e=u((0,t.useState)({uid:null}),2),n=e[0],r=e[1],i=u((0,t.useState)({unsub:function(){}}),2),a=i[0],o=i[1];(0,t.useEffect)((function(){QT.onAuthStateChanged((function(e){if(r(e),e){var t=K_(YT,"users/".concat(e.uid));a.unsub(),o({unsub:ex(t,(function(e){!function(e,t){BT.apply(this,arguments)}(e.val(),d)}))})}else a.unsub(),o((function(){}))}))}),[]);var s=u((0,t.useState)(!1),2),l=s[0],c=s[1],h=u((0,t.useState)({}),2),f=h[0],d=h[1];return(0,_n.jsx)(je,{children:(0,_n.jsx)(WT.Provider,{value:f,children:(0,_n.jsxs)(HT.Provider,{value:n,children:[(0,_n.jsx)(VT,{authot:n,clicked:l,changeClick:c}),(0,_n.jsxs)(Oe,{children:[(0,_n.jsx)(Pe,{exact:!0,path:"/",element:(0,_n.jsx)(Sn,{})}),(0,_n.jsx)(Pe,{exact:!0,path:"/Find-Us",element:(0,_n.jsx)(bg,{})}),(0,_n.jsx)(Pe,{exact:!0,path:"/Order",element:n?(0,_n.jsx)(fx,{}):(0,_n.jsx)(Ne,{to:"/Sign-Up"})}),(0,_n.jsx)(Pe,{exact:!0,path:"/Menu",element:(0,_n.jsx)(_x,{authot:n,changeClick:c})}),(0,_n.jsx)(Pe,{exact:!0,path:"/Sign-Up",element:n?(0,_n.jsx)(Ne,{to:"/"}):(0,_n.jsx)(qT,{authot:n})}),(0,_n.jsx)(Pe,{exact:!0,path:"/Crispies-React-Foodchain-site-DIGIT-2022/",element:(0,_n.jsx)(Ne,{to:"/"})}),(0,_n.jsx)(Pe,{path:"*",element:(0,_n.jsx)(xx,{})})]})]})})})};wi("firebase","9.15.0","app");var KT=ki({apiKey:"AIzaSyD_OeG5MmNul_6QhTtB_16zvamik9uBD2c",authDomain:"crispies-3dcb9.firebaseapp.com",databaseURL:"https://crispies-3dcb9-default-rtdb.europe-west1.firebasedatabase.app",projectId:"crispies-3dcb9",storageBucket:"crispies-3dcb9.appspot.com",messagingSenderId:"1075287717682",appId:"1:1075287717682:web:805edd9097efe41635892b"}),QT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bi(),t=pi(e,"auth");if(t.isInitialized())return t.getImmediate();var n=qx(e,{popupRedirectResolver:NT,persistence:[TC,nC,iC]}),r=nr("authTokenSyncURL");if(r){var i=jT(r);XE(n,i,(function(){return i(n.currentUser)})),YE(n,(function(e){return i(e)}))}var a=Zn("auth");return a&&JS(n,"http://".concat(a)),n}(KT),$T=function(e,t){var n="string"==typeof e?e:t||"(default)",r=pi("object"==typeof e?e:bi(),"firestore").getImmediate({identifier:n});if(!r._initialized){var i=er("firestore");i&&Kv.apply(void 0,[r].concat(l(i)))}return r}(),YT=ox(KT);a.createRoot(document.getElementById("root")).render((0,_n.jsx)(t.StrictMode,{children:(0,_n.jsx)(GT,{})}))}()}();
//# sourceMappingURL=main.1b0a1fc1.js.map